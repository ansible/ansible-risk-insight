{# Copyright (C) 2020-2021 Maciej Delmanowski <drybjed@gmail.com>
 # Copyright (C) 2020-2021 DebOps <https://debops.org/>
 # SPDX-License-Identifier: GPL-3.0-or-later
 #}
# -*- conf -*-

# Define custom paths which can be used to override files and templates in
# Ansible roles or inject tasks via lookup plugins provided with DebOps.
[override_paths]
files_path = ansible/overrides/files
tasks_path = ansible/overrides/tasks
templates_path = ansible/overrides/templates

[ansible defaults]

# Path to the default Ansible inventory directory managed in the DebOps project
# directory.
inventory = {{ env['ANSIBLE_INVENTORY'] | d('ansible/inventory') }}

# String which will be set as the "ansible_amanged" variable in templates
# generated by Ansible.
ansible_managed = {{ env['DEBOPS_MANAGED'] | d('This file is managed remotely, all changes will be lost') }}

# Don't show tasks that were skipped during Ansible execution
display_skipped_hosts = {{ env['ANSIBLE_DISPLAY_SKIPPED_HOSTS'] | d('false') }}

# In case of failure, Ansible creates the '<playbook>.retry' files beside the
# playbook which contain names of hosts that failed. This is useless with
# DebOps since playbooks are in a central location therefore it will be
# disabled by default.
retry_files_enabled = {{ env['ANSIBLE_RETRY_FILES_ENABLED'] | d('false') }}

# Make the default output of 'ansible-playbook' easier to read by a human.
stdout_callback = {{ env['ANSIBLE_STDOUT_CALLBACK'] | d('yaml') }}

# Define the list of the built-in callback plugins enabled by default.
callback_whitelist = {{ env['ANSIBLE_CALLBACK_WHITELIST'] | d('timer') }}

;callback_plugins = /my/plugins/callback
;roles_path = /my/roles

[ansible inventory]

# This option disables the warnings about missing Ansible inventory groups
# defined in a playbook. This warning message is very common in DebOps
# playbooks and disabling it is recommended.
host_pattern_mismatch = {{ env['ANSIBLE_HOST_PATTERN_MISMATCH'] | d('ignore') }}

[ansible paramiko]
;record_host_keys=True

[ansible ssh_connection]
;ssh_args = -o ControlMaster=auto -o ControlPersist=60s
