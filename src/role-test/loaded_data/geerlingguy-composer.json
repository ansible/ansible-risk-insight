{"py/object": "struct4.Repository", "name": "", "path": "", "my_collection_name": "", "playbooks": [], "roles": [], "installed_collections_path": "", "installed_collections": [], "installed_roles_path": "./role-test/testdata/geerlingguy-composer", "installed_roles": [{"py/object": "struct4.Role", "name": "geerlingguy.composer", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer", "fqcn": "geerlingguy.composer", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "global-require.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install configured globally-required packages.", "module": "command", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Install configured globally-required packages.", "environment": {"COMPOSER_HOME": "{{ composer_home_path }}"}, "become": true, "become_user": "{{ composer_home_owner }}", "register": "composer_global_require_result", "with_items": "{{ composer_global_packages }}"}, "module_options": "{{ composer_path }} global require {{ item.name }}:{{ item.release | default('@stable') }} --no-progress --no-interaction creates={{ composer_home_path }}/vendor/{{ item.name }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add composer_home_path bin directory to global $PATH.", "module": "template", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Add composer_home_path bin directory to global $PATH.", "when": "composer_add_to_path | bool"}, "module_options": {"src": "composer.sh.j2", "dest": "/etc/profile.d/composer.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "project-bin.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add composer_project_path bin directory to global $PATH.", "module": "template", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml", "options": {"name": "Add composer_project_path bin directory to global $PATH."}, "module_options": {"src": "composer-project.sh.j2", "dest": "/etc/profile.d/composer-project.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check if requested version parameters are valid", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if requested version parameters are valid", "when": "composer_version != '' and composer_keep_updated"}, "module_options": {"msg": "You cannot request a specific version AND keep the composer up to date. Set either composer_version or composer_keep_updated, but not both."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set php_executable variable to a default if not defined.", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Set php_executable variable to a default if not defined.", "when": "php_executable is not defined"}, "module_options": {"php_executable": "php"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check if Composer is installed.", "module": "stat", "index": 2, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if Composer is installed.", "register": "composer_bin"}, "module_options": "path={{ composer_path }}", "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get Composer installer signature.", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Get Composer installer signature.", "register": "composer_installer_signature", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://composer.github.io/installer.sig", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download Composer installer.", "module": "get_url", "index": 4, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Download Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://getcomposer.org/installer", "dest": "/tmp/composer-installer.php", "mode": 493, "checksum": "sha384:{{ composer_installer_signature.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Run Composer installer.", "module": "command", "index": 5, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Run Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": "{{ php_executable }} composer-installer.php {% if composer_version_branch %} {{ composer_version_branch }}{% elif composer_version %} --version={{ composer_version }}{% endif %} chdir=/tmp\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Move Composer into globally-accessible location.", "module": "command", "index": 6, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Move Composer into globally-accessible location.", "when": "not composer_bin.stat.exists"}, "module_options": "mv /tmp/composer.phar {{ composer_path }} creates={{ composer_path }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Update Composer to latest version (if configured).", "module": "command", "index": 7, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Update Composer to latest version (if configured).", "register": "composer_update", "changed_when": "'Updating to version' in composer_update.stdout", "when": "composer_keep_updated | bool"}, "module_options": "{{ php_executable }} {{ composer_path }} self-update {{ composer_version_branch }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure composer directory exists.", "module": "file", "index": 8, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Ensure composer directory exists.", "become": true, "become_user": "{{ composer_home_owner }}"}, "module_options": {"path": "{{ composer_home_path }}", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "state": "directory", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add GitHub OAuth token for Composer (if configured).", "module": "template", "index": 9, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Add GitHub OAuth token for Composer (if configured).", "become": true, "become_user": "{{ composer_home_owner }}", "when": "composer_github_oauth_token | length > 0"}, "module_options": {"src": "auth.json.j2", "dest": "{{ composer_home_path }}/auth.json", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_global_packages | length > 0"}, "module_options": "global-require.yml", "executable": "global-require.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_add_project_to_path | bool"}, "module_options": "project-bin.yml", "executable": "project-bin.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}], "modules": [], "taskfiles": [], "version": "", "module_dict": {}, "task_dict": {"{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install configured globally-required packages.", "module": "command", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Install configured globally-required packages.", "environment": {"COMPOSER_HOME": "{{ composer_home_path }}"}, "become": true, "become_user": "{{ composer_home_owner }}", "register": "composer_global_require_result", "with_items": "{{ composer_global_packages }}"}, "module_options": "{{ composer_path }} global require {{ item.name }}:{{ item.release | default('@stable') }} --no-progress --no-interaction creates={{ composer_home_path }}/vendor/{{ item.name }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Add composer_home_path bin directory to global $PATH.", "module": "template", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Add composer_home_path bin directory to global $PATH.", "when": "composer_add_to_path | bool"}, "module_options": {"src": "composer.sh.j2", "dest": "/etc/profile.d/composer.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Add composer_project_path bin directory to global $PATH.", "module": "template", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml", "options": {"name": "Add composer_project_path bin directory to global $PATH."}, "module_options": {"src": "composer-project.sh.j2", "dest": "/etc/profile.d/composer-project.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check if requested version parameters are valid", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if requested version parameters are valid", "when": "composer_version != '' and composer_keep_updated"}, "module_options": {"msg": "You cannot request a specific version AND keep the composer up to date. Set either composer_version or composer_keep_updated, but not both."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Set php_executable variable to a default if not defined.", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Set php_executable variable to a default if not defined.", "when": "php_executable is not defined"}, "module_options": {"php_executable": "php"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Check if Composer is installed.", "module": "stat", "index": 2, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if Composer is installed.", "register": "composer_bin"}, "module_options": "path={{ composer_path }}", "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Get Composer installer signature.", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Get Composer installer signature.", "register": "composer_installer_signature", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://composer.github.io/installer.sig", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Download Composer installer.", "module": "get_url", "index": 4, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Download Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://getcomposer.org/installer", "dest": "/tmp/composer-installer.php", "mode": 493, "checksum": "sha384:{{ composer_installer_signature.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Run Composer installer.", "module": "command", "index": 5, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Run Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": "{{ php_executable }} composer-installer.php {% if composer_version_branch %} {{ composer_version_branch }}{% elif composer_version %} --version={{ composer_version }}{% endif %} chdir=/tmp\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Move Composer into globally-accessible location.", "module": "command", "index": 6, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Move Composer into globally-accessible location.", "when": "not composer_bin.stat.exists"}, "module_options": "mv /tmp/composer.phar {{ composer_path }} creates={{ composer_path }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "Update Composer to latest version (if configured).", "module": "command", "index": 7, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Update Composer to latest version (if configured).", "register": "composer_update", "changed_when": "'Updating to version' in composer_update.stdout", "when": "composer_keep_updated | bool"}, "module_options": "{{ php_executable }} {{ composer_path }} self-update {{ composer_version_branch }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "Ensure composer directory exists.", "module": "file", "index": 8, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Ensure composer directory exists.", "become": true, "become_user": "{{ composer_home_owner }}"}, "module_options": {"path": "{{ composer_home_path }}", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "state": "directory", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "Add GitHub OAuth token for Composer (if configured).", "module": "template", "index": 9, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Add GitHub OAuth token for Composer (if configured).", "become": true, "become_user": "{{ composer_home_owner }}", "when": "composer_github_oauth_token | length > 0"}, "module_options": {"src": "auth.json.j2", "dest": "{{ composer_home_path }}/auth.json", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_global_packages | length > 0"}, "module_options": "global-require.yml", "executable": "global-require.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml\", \"index\": 11}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_add_project_to_path | bool"}, "module_options": "project-bin.yml", "executable": "project-bin.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}}, "taskfile_dict": {"./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml": {"py/object": "struct4.TaskFile", "name": "global-require.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install configured globally-required packages.", "module": "command", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Install configured globally-required packages.", "environment": {"COMPOSER_HOME": "{{ composer_home_path }}"}, "become": true, "become_user": "{{ composer_home_owner }}", "register": "composer_global_require_result", "with_items": "{{ composer_global_packages }}"}, "module_options": "{{ composer_path }} global require {{ item.name }}:{{ item.release | default('@stable') }} --no-progress --no-interaction creates={{ composer_home_path }}/vendor/{{ item.name }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add composer_home_path bin directory to global $PATH.", "module": "template", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Add composer_home_path bin directory to global $PATH.", "when": "composer_add_to_path | bool"}, "module_options": {"src": "composer.sh.j2", "dest": "/etc/profile.d/composer.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}, "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml": {"py/object": "struct4.TaskFile", "name": "project-bin.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add composer_project_path bin directory to global $PATH.", "module": "template", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml", "options": {"name": "Add composer_project_path bin directory to global $PATH."}, "module_options": {"src": "composer-project.sh.j2", "dest": "/etc/profile.d/composer-project.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}, "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check if requested version parameters are valid", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if requested version parameters are valid", "when": "composer_version != '' and composer_keep_updated"}, "module_options": {"msg": "You cannot request a specific version AND keep the composer up to date. Set either composer_version or composer_keep_updated, but not both."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set php_executable variable to a default if not defined.", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Set php_executable variable to a default if not defined.", "when": "php_executable is not defined"}, "module_options": {"php_executable": "php"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check if Composer is installed.", "module": "stat", "index": 2, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if Composer is installed.", "register": "composer_bin"}, "module_options": "path={{ composer_path }}", "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get Composer installer signature.", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Get Composer installer signature.", "register": "composer_installer_signature", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://composer.github.io/installer.sig", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download Composer installer.", "module": "get_url", "index": 4, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Download Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://getcomposer.org/installer", "dest": "/tmp/composer-installer.php", "mode": 493, "checksum": "sha384:{{ composer_installer_signature.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Run Composer installer.", "module": "command", "index": 5, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Run Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": "{{ php_executable }} composer-installer.php {% if composer_version_branch %} {{ composer_version_branch }}{% elif composer_version %} --version={{ composer_version }}{% endif %} chdir=/tmp\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Move Composer into globally-accessible location.", "module": "command", "index": 6, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Move Composer into globally-accessible location.", "when": "not composer_bin.stat.exists"}, "module_options": "mv /tmp/composer.phar {{ composer_path }} creates={{ composer_path }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Update Composer to latest version (if configured).", "module": "command", "index": 7, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Update Composer to latest version (if configured).", "register": "composer_update", "changed_when": "'Updating to version' in composer_update.stdout", "when": "composer_keep_updated | bool"}, "module_options": "{{ php_executable }} {{ composer_path }} self-update {{ composer_version_branch }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure composer directory exists.", "module": "file", "index": 8, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Ensure composer directory exists.", "become": true, "become_user": "{{ composer_home_owner }}"}, "module_options": {"path": "{{ composer_home_path }}", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "state": "directory", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add GitHub OAuth token for Composer (if configured).", "module": "template", "index": 9, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Add GitHub OAuth token for Composer (if configured).", "become": true, "become_user": "{{ composer_home_owner }}", "when": "composer_github_oauth_token | length > 0"}, "module_options": {"src": "auth.json.j2", "dest": "{{ composer_home_path }}/auth.json", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_global_packages | length > 0"}, "module_options": "global-require.yml", "executable": "global-require.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_add_project_to_path | bool"}, "module_options": "project-bin.yml", "executable": "project-bin.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}}, "role_dict": {"geerlingguy.composer": {"py/object": "struct4.Role", "name": "geerlingguy.composer", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer", "fqcn": "geerlingguy.composer", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "global-require.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install configured globally-required packages.", "module": "command", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Install configured globally-required packages.", "environment": {"COMPOSER_HOME": "{{ composer_home_path }}"}, "become": true, "become_user": "{{ composer_home_owner }}", "register": "composer_global_require_result", "with_items": "{{ composer_global_packages }}"}, "module_options": "{{ composer_path }} global require {{ item.name }}:{{ item.release | default('@stable') }} --no-progress --no-interaction creates={{ composer_home_path }}/vendor/{{ item.name }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add composer_home_path bin directory to global $PATH.", "module": "template", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/global-require.yml", "options": {"name": "Add composer_home_path bin directory to global $PATH.", "when": "composer_add_to_path | bool"}, "module_options": {"src": "composer.sh.j2", "dest": "/etc/profile.d/composer.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "project-bin.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add composer_project_path bin directory to global $PATH.", "module": "template", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/project-bin.yml", "options": {"name": "Add composer_project_path bin directory to global $PATH."}, "module_options": {"src": "composer-project.sh.j2", "dest": "/etc/profile.d/composer-project.sh", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check if requested version parameters are valid", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if requested version parameters are valid", "when": "composer_version != '' and composer_keep_updated"}, "module_options": {"msg": "You cannot request a specific version AND keep the composer up to date. Set either composer_version or composer_keep_updated, but not both."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set php_executable variable to a default if not defined.", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Set php_executable variable to a default if not defined.", "when": "php_executable is not defined"}, "module_options": {"php_executable": "php"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check if Composer is installed.", "module": "stat", "index": 2, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Check if Composer is installed.", "register": "composer_bin"}, "module_options": "path={{ composer_path }}", "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get Composer installer signature.", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Get Composer installer signature.", "register": "composer_installer_signature", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://composer.github.io/installer.sig", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download Composer installer.", "module": "get_url", "index": 4, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Download Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": {"url": "https://getcomposer.org/installer", "dest": "/tmp/composer-installer.php", "mode": 493, "checksum": "sha384:{{ composer_installer_signature.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Run Composer installer.", "module": "command", "index": 5, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Run Composer installer.", "when": "not composer_bin.stat.exists"}, "module_options": "{{ php_executable }} composer-installer.php {% if composer_version_branch %} {{ composer_version_branch }}{% elif composer_version %} --version={{ composer_version }}{% endif %} chdir=/tmp\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Move Composer into globally-accessible location.", "module": "command", "index": 6, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Move Composer into globally-accessible location.", "when": "not composer_bin.stat.exists"}, "module_options": "mv /tmp/composer.phar {{ composer_path }} creates={{ composer_path }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Update Composer to latest version (if configured).", "module": "command", "index": 7, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Update Composer to latest version (if configured).", "register": "composer_update", "changed_when": "'Updating to version' in composer_update.stdout", "when": "composer_keep_updated | bool"}, "module_options": "{{ php_executable }} {{ composer_path }} self-update {{ composer_version_branch }}\n", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure composer directory exists.", "module": "file", "index": 8, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Ensure composer directory exists.", "become": true, "become_user": "{{ composer_home_owner }}"}, "module_options": {"path": "{{ composer_home_path }}", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "state": "directory", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add GitHub OAuth token for Composer (if configured).", "module": "template", "index": 9, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"name": "Add GitHub OAuth token for Composer (if configured).", "become": true, "become_user": "{{ composer_home_owner }}", "when": "composer_github_oauth_token | length > 0"}, "module_options": {"src": "auth.json.j2", "dest": "{{ composer_home_path }}/auth.json", "owner": "{{ composer_home_owner }}", "group": "{{ composer_home_group }}", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_global_packages | length > 0"}, "module_options": "global-require.yml", "executable": "global-require.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/geerlingguy-composer/geerlingguy.composer/tasks/main.yml", "options": {"when": "composer_add_project_to_path | bool"}, "module_options": "project-bin.yml", "executable": "project-bin.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "geerlingguy.composer", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}}, "annotations": {}}