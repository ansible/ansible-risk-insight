{"py/object": "struct4.Repository", "name": "", "path": "", "my_collection_name": "", "playbooks": [], "roles": [], "installed_collections_path": "", "installed_collections": [], "installed_roles_path": "./role-test/testdata/buluma-bootstrap", "installed_roles": [{"py/object": "struct4.Role", "name": "buluma.bootstrap", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap", "fqcn": "buluma.bootstrap", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "assert.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "tasks": [{"py/object": "struct4.Task", "name": "test if bootstrap_wait_for_host is set correctly", "module": "ansible.builtin.assert", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_wait_for_host is set correctly"}, "module_options": {"that": ["bootstrap_wait_for_host is defined", "bootstrap_wait_for_host is boolean"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}, {"py/object": "struct4.Task", "name": "test if bootstrap_timeout is set correctly", "module": "ansible.builtin.assert", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_timeout is set correctly"}, "module_options": {"that": ["bootstrap_timeout is defined", "bootstrap_timeout is number", "bootstrap_timeout >= 0"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "import assert.yml", "module": "ansible.builtin.import_tasks", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "import assert.yml", "run_once": true, "delegate_to": "localhost"}, "module_options": "assert.yml", "executable": "assert.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "wait for port to be available", "module": "ansible.builtin.wait_for", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "wait for port to be available", "become": false, "when": ["ansible_connection is defined", "ansible_connection not in [ \"container\", \"docker\", \"community.docker.docker\" ]", "bootstrap_wait_for_host | bool"]}, "module_options": {"port": "{{ ansible_port | default('22') }}", "timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for", "annotations": {}}, {"py/object": "struct4.Task", "name": "test connection", "module": "ansible.builtin.wait_for_connection", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "test connection", "register": "bootstrap_connect", "changed_when": false}, "module_options": {"timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for_connection", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for_connection", "annotations": {}}, {"py/object": "struct4.Task", "name": "gather ansible facts", "module": "ansible.builtin.setup", "index": 3, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "gather ansible facts"}, "module_options": null, "executable": "ansible.builtin.setup", "executable_type": "Module", "fqcn": "ansible.builtin.setup", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (apt)", "module": "ansible.builtin.apt", "index": 4, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apt)", "changed_when": false, "when": "ansible_pkg_mgr == \"apt\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (yum)", "module": "ansible.builtin.yum", "index": 5, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (yum)", "changed_when": false, "when": "ansible_pkg_mgr == \"yum\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (apk)", "module": "community.general.apk", "index": 6, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apk)", "changed_when": false, "when": "ansible_pkg_mgr == \"apk\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.apk", "executable_type": "Module", "fqcn": "community.general.apk", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (dnf)", "module": "ansible.builtin.dnf", "index": 7, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (dnf)", "changed_when": false, "when": "ansible_pkg_mgr == \"dnf\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.dnf", "executable_type": "Module", "fqcn": "ansible.builtin.dnf", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (zypper)", "module": "community.general.zypper", "index": 8, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (zypper)", "changed_when": false, "when": "ansible_pkg_mgr == \"zypper\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.zypper", "executable_type": "Module", "fqcn": "community.general.zypper", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (pacman)", "module": "community.general.pacman", "index": 9, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (pacman)", "changed_when": false, "when": "ansible_pkg_mgr == \"pacman\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.pacman", "executable_type": "Module", "fqcn": "community.general.pacman", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (portage)", "module": "community.general.portage", "index": 10, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (portage)", "changed_when": false, "when": "ansible_pkg_mgr == \"portage\""}, "module_options": {"package": "{{ bootstrap_facts_packages.split() }}", "sync": true}, "executable": "community.general.portage", "executable_type": "Module", "fqcn": "community.general.portage", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "gather_facts.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "lookup bootstrap facts", "module": "ansible.builtin.raw", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "lookup bootstrap facts", "become": false, "check_mode": false, "register": "bootstrap_facts", "changed_when": false}, "module_options": "cat /etc/os-release", "executable": "ansible.builtin.raw", "executable_type": "Module", "fqcn": "ansible.builtin.raw", "annotations": {}}, {"py/object": "struct4.Task", "name": "set bootstrap facts (I)", "module": "ansible.builtin.set_fact", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (I)", "loop": "{{ bootstrap_os_family_map | dict2items | map(attribute='value') | flatten }}", "when": ["bootstrap_facts.rc == 0", "bootstrap_distribution is not defined", "bootstrap_facts.stdout is regex('PRETTY_NAME=.'~ bootstrap_search[item] | default(item) ~'.*')"], "become": false}, "module_options": {"bootstrap_distribution": "{{ item }}", "bootstrap_distribution_major_version": "{{ bootstrap_facts.stdout_lines | join(',') | regex_replace( '^.*VERSION_ID=\"(\\d{1,2})(\\.\\d{1,4})*?\".*$','\\1') | default('NA') }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "set bootstrap facts (II)", "module": "ansible.builtin.set_fact", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (II)", "loop": "{{ bootstrap_os_family_map | dict2items }}", "loop_control": {"label": "{{ item.key }}"}, "when": ["bootstrap_distribution in item.value"], "become": false}, "module_options": {"bootstrap_os_family": "{{ item.key }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}], "modules": [], "taskfiles": [], "version": "", "module_dict": {}, "task_dict": {"{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "test if bootstrap_wait_for_host is set correctly", "module": "ansible.builtin.assert", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_wait_for_host is set correctly"}, "module_options": {"that": ["bootstrap_wait_for_host is defined", "bootstrap_wait_for_host is boolean"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "test if bootstrap_timeout is set correctly", "module": "ansible.builtin.assert", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_timeout is set correctly"}, "module_options": {"that": ["bootstrap_timeout is defined", "bootstrap_timeout is number", "bootstrap_timeout >= 0"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "import assert.yml", "module": "ansible.builtin.import_tasks", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "import assert.yml", "run_once": true, "delegate_to": "localhost"}, "module_options": "assert.yml", "executable": "assert.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "wait for port to be available", "module": "ansible.builtin.wait_for", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "wait for port to be available", "become": false, "when": ["ansible_connection is defined", "ansible_connection not in [ \"container\", \"docker\", \"community.docker.docker\" ]", "bootstrap_wait_for_host | bool"]}, "module_options": {"port": "{{ ansible_port | default('22') }}", "timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "test connection", "module": "ansible.builtin.wait_for_connection", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "test connection", "register": "bootstrap_connect", "changed_when": false}, "module_options": {"timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for_connection", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for_connection", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "gather ansible facts", "module": "ansible.builtin.setup", "index": 3, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "gather ansible facts"}, "module_options": null, "executable": "ansible.builtin.setup", "executable_type": "Module", "fqcn": "ansible.builtin.setup", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "install bootstrap packages (apt)", "module": "ansible.builtin.apt", "index": 4, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apt)", "changed_when": false, "when": "ansible_pkg_mgr == \"apt\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "install bootstrap packages (yum)", "module": "ansible.builtin.yum", "index": 5, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (yum)", "changed_when": false, "when": "ansible_pkg_mgr == \"yum\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "install bootstrap packages (apk)", "module": "community.general.apk", "index": 6, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apk)", "changed_when": false, "when": "ansible_pkg_mgr == \"apk\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.apk", "executable_type": "Module", "fqcn": "community.general.apk", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "install bootstrap packages (dnf)", "module": "ansible.builtin.dnf", "index": 7, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (dnf)", "changed_when": false, "when": "ansible_pkg_mgr == \"dnf\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.dnf", "executable_type": "Module", "fqcn": "ansible.builtin.dnf", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "install bootstrap packages (zypper)", "module": "community.general.zypper", "index": 8, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (zypper)", "changed_when": false, "when": "ansible_pkg_mgr == \"zypper\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.zypper", "executable_type": "Module", "fqcn": "community.general.zypper", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "install bootstrap packages (pacman)", "module": "community.general.pacman", "index": 9, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (pacman)", "changed_when": false, "when": "ansible_pkg_mgr == \"pacman\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.pacman", "executable_type": "Module", "fqcn": "community.general.pacman", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "install bootstrap packages (portage)", "module": "community.general.portage", "index": 10, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (portage)", "changed_when": false, "when": "ansible_pkg_mgr == \"portage\""}, "module_options": {"package": "{{ bootstrap_facts_packages.split() }}", "sync": true}, "executable": "community.general.portage", "executable_type": "Module", "fqcn": "community.general.portage", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "lookup bootstrap facts", "module": "ansible.builtin.raw", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "lookup bootstrap facts", "become": false, "check_mode": false, "register": "bootstrap_facts", "changed_when": false}, "module_options": "cat /etc/os-release", "executable": "ansible.builtin.raw", "executable_type": "Module", "fqcn": "ansible.builtin.raw", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "set bootstrap facts (I)", "module": "ansible.builtin.set_fact", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (I)", "loop": "{{ bootstrap_os_family_map | dict2items | map(attribute='value') | flatten }}", "when": ["bootstrap_facts.rc == 0", "bootstrap_distribution is not defined", "bootstrap_facts.stdout is regex('PRETTY_NAME=.'~ bootstrap_search[item] | default(item) ~'.*')"], "become": false}, "module_options": {"bootstrap_distribution": "{{ item }}", "bootstrap_distribution_major_version": "{{ bootstrap_facts.stdout_lines | join(',') | regex_replace( '^.*VERSION_ID=\"(\\d{1,2})(\\.\\d{1,4})*?\".*$','\\1') | default('NA') }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "set bootstrap facts (II)", "module": "ansible.builtin.set_fact", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (II)", "loop": "{{ bootstrap_os_family_map | dict2items }}", "loop_control": {"label": "{{ item.key }}"}, "when": ["bootstrap_distribution in item.value"], "become": false}, "module_options": {"bootstrap_os_family": "{{ item.key }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}}, "taskfile_dict": {"./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml": {"py/object": "struct4.TaskFile", "name": "assert.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "tasks": [{"py/object": "struct4.Task", "name": "test if bootstrap_wait_for_host is set correctly", "module": "ansible.builtin.assert", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_wait_for_host is set correctly"}, "module_options": {"that": ["bootstrap_wait_for_host is defined", "bootstrap_wait_for_host is boolean"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}, {"py/object": "struct4.Task", "name": "test if bootstrap_timeout is set correctly", "module": "ansible.builtin.assert", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_timeout is set correctly"}, "module_options": {"that": ["bootstrap_timeout is defined", "bootstrap_timeout is number", "bootstrap_timeout >= 0"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}, "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "import assert.yml", "module": "ansible.builtin.import_tasks", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "import assert.yml", "run_once": true, "delegate_to": "localhost"}, "module_options": "assert.yml", "executable": "assert.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "wait for port to be available", "module": "ansible.builtin.wait_for", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "wait for port to be available", "become": false, "when": ["ansible_connection is defined", "ansible_connection not in [ \"container\", \"docker\", \"community.docker.docker\" ]", "bootstrap_wait_for_host | bool"]}, "module_options": {"port": "{{ ansible_port | default('22') }}", "timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for", "annotations": {}}, {"py/object": "struct4.Task", "name": "test connection", "module": "ansible.builtin.wait_for_connection", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "test connection", "register": "bootstrap_connect", "changed_when": false}, "module_options": {"timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for_connection", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for_connection", "annotations": {}}, {"py/object": "struct4.Task", "name": "gather ansible facts", "module": "ansible.builtin.setup", "index": 3, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "gather ansible facts"}, "module_options": null, "executable": "ansible.builtin.setup", "executable_type": "Module", "fqcn": "ansible.builtin.setup", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (apt)", "module": "ansible.builtin.apt", "index": 4, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apt)", "changed_when": false, "when": "ansible_pkg_mgr == \"apt\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (yum)", "module": "ansible.builtin.yum", "index": 5, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (yum)", "changed_when": false, "when": "ansible_pkg_mgr == \"yum\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (apk)", "module": "community.general.apk", "index": 6, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apk)", "changed_when": false, "when": "ansible_pkg_mgr == \"apk\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.apk", "executable_type": "Module", "fqcn": "community.general.apk", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (dnf)", "module": "ansible.builtin.dnf", "index": 7, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (dnf)", "changed_when": false, "when": "ansible_pkg_mgr == \"dnf\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.dnf", "executable_type": "Module", "fqcn": "ansible.builtin.dnf", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (zypper)", "module": "community.general.zypper", "index": 8, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (zypper)", "changed_when": false, "when": "ansible_pkg_mgr == \"zypper\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.zypper", "executable_type": "Module", "fqcn": "community.general.zypper", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (pacman)", "module": "community.general.pacman", "index": 9, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (pacman)", "changed_when": false, "when": "ansible_pkg_mgr == \"pacman\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.pacman", "executable_type": "Module", "fqcn": "community.general.pacman", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (portage)", "module": "community.general.portage", "index": 10, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (portage)", "changed_when": false, "when": "ansible_pkg_mgr == \"portage\""}, "module_options": {"package": "{{ bootstrap_facts_packages.split() }}", "sync": true}, "executable": "community.general.portage", "executable_type": "Module", "fqcn": "community.general.portage", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}, "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml": {"py/object": "struct4.TaskFile", "name": "gather_facts.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "lookup bootstrap facts", "module": "ansible.builtin.raw", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "lookup bootstrap facts", "become": false, "check_mode": false, "register": "bootstrap_facts", "changed_when": false}, "module_options": "cat /etc/os-release", "executable": "ansible.builtin.raw", "executable_type": "Module", "fqcn": "ansible.builtin.raw", "annotations": {}}, {"py/object": "struct4.Task", "name": "set bootstrap facts (I)", "module": "ansible.builtin.set_fact", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (I)", "loop": "{{ bootstrap_os_family_map | dict2items | map(attribute='value') | flatten }}", "when": ["bootstrap_facts.rc == 0", "bootstrap_distribution is not defined", "bootstrap_facts.stdout is regex('PRETTY_NAME=.'~ bootstrap_search[item] | default(item) ~'.*')"], "become": false}, "module_options": {"bootstrap_distribution": "{{ item }}", "bootstrap_distribution_major_version": "{{ bootstrap_facts.stdout_lines | join(',') | regex_replace( '^.*VERSION_ID=\"(\\d{1,2})(\\.\\d{1,4})*?\".*$','\\1') | default('NA') }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "set bootstrap facts (II)", "module": "ansible.builtin.set_fact", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (II)", "loop": "{{ bootstrap_os_family_map | dict2items }}", "loop_control": {"label": "{{ item.key }}"}, "when": ["bootstrap_distribution in item.value"], "become": false}, "module_options": {"bootstrap_os_family": "{{ item.key }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}}, "role_dict": {"buluma.bootstrap": {"py/object": "struct4.Role", "name": "buluma.bootstrap", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap", "fqcn": "buluma.bootstrap", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "assert.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "tasks": [{"py/object": "struct4.Task", "name": "test if bootstrap_wait_for_host is set correctly", "module": "ansible.builtin.assert", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_wait_for_host is set correctly"}, "module_options": {"that": ["bootstrap_wait_for_host is defined", "bootstrap_wait_for_host is boolean"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}, {"py/object": "struct4.Task", "name": "test if bootstrap_timeout is set correctly", "module": "ansible.builtin.assert", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/assert.yml", "options": {"name": "test if bootstrap_timeout is set correctly"}, "module_options": {"that": ["bootstrap_timeout is defined", "bootstrap_timeout is number", "bootstrap_timeout >= 0"], "quiet": true}, "executable": "ansible.builtin.assert", "executable_type": "Module", "fqcn": "ansible.builtin.assert", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "import assert.yml", "module": "ansible.builtin.import_tasks", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "import assert.yml", "run_once": true, "delegate_to": "localhost"}, "module_options": "assert.yml", "executable": "assert.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "wait for port to be available", "module": "ansible.builtin.wait_for", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "wait for port to be available", "become": false, "when": ["ansible_connection is defined", "ansible_connection not in [ \"container\", \"docker\", \"community.docker.docker\" ]", "bootstrap_wait_for_host | bool"]}, "module_options": {"port": "{{ ansible_port | default('22') }}", "timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for", "annotations": {}}, {"py/object": "struct4.Task", "name": "test connection", "module": "ansible.builtin.wait_for_connection", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "test connection", "register": "bootstrap_connect", "changed_when": false}, "module_options": {"timeout": "{{ bootstrap_timeout }}"}, "executable": "ansible.builtin.wait_for_connection", "executable_type": "Module", "fqcn": "ansible.builtin.wait_for_connection", "annotations": {}}, {"py/object": "struct4.Task", "name": "gather ansible facts", "module": "ansible.builtin.setup", "index": 3, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "gather ansible facts"}, "module_options": null, "executable": "ansible.builtin.setup", "executable_type": "Module", "fqcn": "ansible.builtin.setup", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (apt)", "module": "ansible.builtin.apt", "index": 4, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apt)", "changed_when": false, "when": "ansible_pkg_mgr == \"apt\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (yum)", "module": "ansible.builtin.yum", "index": 5, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (yum)", "changed_when": false, "when": "ansible_pkg_mgr == \"yum\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (apk)", "module": "community.general.apk", "index": 6, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (apk)", "changed_when": false, "when": "ansible_pkg_mgr == \"apk\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.apk", "executable_type": "Module", "fqcn": "community.general.apk", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (dnf)", "module": "ansible.builtin.dnf", "index": 7, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (dnf)", "changed_when": false, "when": "ansible_pkg_mgr == \"dnf\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "ansible.builtin.dnf", "executable_type": "Module", "fqcn": "ansible.builtin.dnf", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (zypper)", "module": "community.general.zypper", "index": 8, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (zypper)", "changed_when": false, "when": "ansible_pkg_mgr == \"zypper\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.zypper", "executable_type": "Module", "fqcn": "community.general.zypper", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (pacman)", "module": "community.general.pacman", "index": 9, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (pacman)", "changed_when": false, "when": "ansible_pkg_mgr == \"pacman\""}, "module_options": {"name": "{{ bootstrap_facts_packages.split() }}", "update_cache": true}, "executable": "community.general.pacman", "executable_type": "Module", "fqcn": "community.general.pacman", "annotations": {}}, {"py/object": "struct4.Task", "name": "install bootstrap packages (portage)", "module": "community.general.portage", "index": 10, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/main.yml", "options": {"name": "install bootstrap packages (portage)", "changed_when": false, "when": "ansible_pkg_mgr == \"portage\""}, "module_options": {"package": "{{ bootstrap_facts_packages.split() }}", "sync": true}, "executable": "community.general.portage", "executable_type": "Module", "fqcn": "community.general.portage", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "gather_facts.yml", "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "lookup bootstrap facts", "module": "ansible.builtin.raw", "index": 0, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "lookup bootstrap facts", "become": false, "check_mode": false, "register": "bootstrap_facts", "changed_when": false}, "module_options": "cat /etc/os-release", "executable": "ansible.builtin.raw", "executable_type": "Module", "fqcn": "ansible.builtin.raw", "annotations": {}}, {"py/object": "struct4.Task", "name": "set bootstrap facts (I)", "module": "ansible.builtin.set_fact", "index": 1, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (I)", "loop": "{{ bootstrap_os_family_map | dict2items | map(attribute='value') | flatten }}", "when": ["bootstrap_facts.rc == 0", "bootstrap_distribution is not defined", "bootstrap_facts.stdout is regex('PRETTY_NAME=.'~ bootstrap_search[item] | default(item) ~'.*')"], "become": false}, "module_options": {"bootstrap_distribution": "{{ item }}", "bootstrap_distribution_major_version": "{{ bootstrap_facts.stdout_lines | join(',') | regex_replace( '^.*VERSION_ID=\"(\\d{1,2})(\\.\\d{1,4})*?\".*$','\\1') | default('NA') }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "set bootstrap facts (II)", "module": "ansible.builtin.set_fact", "index": 2, "defined_in": "./role-test/testdata/buluma-bootstrap/buluma.bootstrap/tasks/gather_facts.yml", "options": {"name": "set bootstrap facts (II)", "loop": "{{ bootstrap_os_family_map | dict2items }}", "loop_control": {"label": "{{ item.key }}"}, "when": ["bootstrap_distribution in item.value"], "become": false}, "module_options": {"bootstrap_os_family": "{{ item.key }}"}, "executable": "ansible.builtin.set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "buluma.bootstrap", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}}, "annotations": {}}