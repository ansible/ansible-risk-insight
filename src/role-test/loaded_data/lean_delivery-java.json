{"py/object": "struct4.Repository", "name": "", "path": "", "my_collection_name": "", "playbooks": [], "roles": [], "installed_collections_path": "", "installed_collections": [], "installed_roles_path": "./role-test/testdata/lean_delivery-java", "installed_roles": [{"py/object": "struct4.Role", "name": "lean_delivery.java", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java", "fqcn": "lean_delivery.java", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Load a system variables file based on distribution or OS family", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Load a system variables file based on distribution or OS family", "with_first_found": ["{{ ansible_os_family }}.yml", "default.yml"], "loop_control": {"loop_var": "distribution"}}, "module_options": "{{ distribution }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set base variables based on java distribution", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Set base variables based on java distribution"}, "module_options": "java_distro_configs/{{ java_distribution }}_vars.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch oracle artifact with {{ transport }} transport", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Fetch oracle artifact with {{ transport }} transport", "with_first_found": ["{{ ansible_system }}/fetch/{{ java_distribution }}-{{ transport }}.yml", "{{ ansible_system }}/fetch/{{ transport }}.yml", "unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Choose platform based task", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Choose platform based task", "with_first_found": ["{{ ansible_system }}/system_{{ transport }}.yml", "{{ ansible_system }}/system_{{ java_binary_type }}.yml", "{{ ansible_system }}/system.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Finalize binary paths", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Finalize binary paths", "when": "java_setup_path | bool"}, "module_options": "{{ ansible_system }}/finalize_paths.yml", "executable": "{{ ansible_system }}/finalize_paths.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply security policy patch", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Apply security policy patch", "with_first_found": ["{{ ansible_system }}/security_policy.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}, "when": ["java_setup_path", "java_unlimited_policy_enabled", "java_distribution == 'oracle_java'"]}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "unknown-transport.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml", "tasks": [{"py/object": "struct4.Task", "name": "Warn on unsupported transport", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml", "options": {"name": "Warn on unsupported transport"}, "module_options": {"msg": "This role does not support '{{ transport }}' transport.\nPlease contact support@lean-delivery.com\n"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "not-supported.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml", "tasks": [{"py/object": "struct4.Task", "name": "Warn on unsupported platform", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml", "options": {"name": "Warn on unsupported platform"}, "module_options": {"msg": "This role does not support '{{ ansible_os_family }}' platform.\n  Please contact support@lean-delivery.com\n"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "finalize_paths.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "tasks": [{"py/object": "struct4.Task", "name": "Find java_folder", "module": "win_find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_act_path": "{{ java_dir.files | map(attribute='path') | list | last }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set java environment variable", "module": "win_environment", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set java environment variable"}, "module_options": {"name": "JAVA_HOME", "state": "present", "value": "{{ java_act_path }}", "level": "machine"}, "executable": "win_environment", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable", "module": "win_path", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable"}, "module_options": {"elements": "{{ java_act_path }}\\bin", "state": "present", "scope": "machine"}, "executable": "win_path", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security_policy.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-winfetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-winfetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "creates": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply patch file", "module": "win_copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}\\{{ policy_item }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply setting", "module": "win_lineinfile", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9"}, "module_options": {"path": "{{ java_act_path }}\\jre\\lib\\security\\java.security", "line": "crypto.policy=unlimited"}, "executable": "win_lineinfile", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system_chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "corretto_package.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "adoptopenjdk_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapmachine_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}", "creates": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install {{ choco_java_package }} from chocolatey", "module": "win_chocolatey", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Install {{ choco_java_package }} from chocolatey", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "{{ choco_java_package }}"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "zulu_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}\\bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "package.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present", "arguments": "/s INSTALLDIR=\"{{ java_path }}\\{{ java_folder }}\"", "creates_path": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install vcredist package prior to using SAP JVM", "module": "win_chocolatey", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Install vcredist package prior to using SAP JVM", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "vcredist2013"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "openjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content'] | regex_findall('(https://download[\\.\\w]+/java/GA/jdk' + java_major_version|string + '[.\\d]*/[\\d\\w]+/' + '[.\\d]+/GPL/openjdk-' + java_major_version|string + '[\\d._]+windows-x64_bin[\\w\\d.]+)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release, or maybe something wrong with java.net"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}\\{{ (release_url[0]|urlsplit).path|basename }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "corretto-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "win_get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}\\{{ (release_url|urlsplit).path|basename }}", "checksum": "{{ lookup('url', release_checksum) }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}\\"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}\\{{ (transport_web | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-windows-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download sapjvm artifact", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Download sapjvm artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}, "dest": "{{ java_download_path }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapmachine-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch version page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "win_uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "headers": {"user-agent": "Mozilla/5.0"}}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Windows is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact link"}, "module_options": {"artifact_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".zip'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get checksum link", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get checksum link"}, "module_options": {"checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact", "module": "win_get_url", "index": 8, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_link[0] }}", "dest": "{{ java_download_path }}", "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "sha256", "force": true}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "adoptopenjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=windows&arch={{ (java_arch == 'x64') | ternary('x64', 'x32') }}&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if AdobtOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdobtOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": {"content": "{{ artifact_checksum_file['content'] |\n  regex_search('([^\\s]+)')\n}}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Set java_binary_type = chocolatey", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Set java_binary_type = chocolatey"}, "module_options": {"java_binary_type": "chocolatey"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Chocolatey will download artifact itself", "module": "debug", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Chocolatey will download artifact itself"}, "module_options": {"msg": "Chocolatey will download artifact itself"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "zulu-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=zip&os=win&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set artifact checksum and url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Set artifact checksum and url"}, "module_options": {"artifact_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ artifact_url }}", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ artifact_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_url }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-winfetch-local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-winfetch-web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}\\{{ (java_unlimited_policy_url\n  | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-winfetch-oracle_java-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}\\{{ (fallback_oracle_security_policy_artifacts[java_major_version|int]\n  | urlsplit('path')).split('/')[-1] }}", "headers": {"Cookie": "oraclelicense=accept-securebackup-cookie"}, "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "finalize_paths.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "tasks": [{"py/object": "struct4.Task", "name": "Find java_folder", "module": "find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "find", "executable_type": "Module", "fqcn": "ansible.builtin.find", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_folder": "{{ java_dir.files | map(attribute='path') | list | last | basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Put java profile", "module": "template", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Put java profile"}, "module_options": {"src": "java.sh.j2", "dest": "/etc/profile.d/java.sh", "owner": "root", "group": "root", "mode": 365}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check for java binaries existence", "module": "stat", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Check for java binaries existence", "register": "java_binary_collection", "loop": ["java", "javac", "jar", "keytool"], "loop_control": {"loop_var": "binary"}}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin/{{ binary }}"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Update alternatives", "module": "alternatives", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Update alternatives", "when": "java_item.stat.exists | bool", "loop": "{{ java_binary_collection.results }}", "loop_control": {"loop_var": "java_item"}}, "module_options": {"name": "{{ java_item.binary }}", "path": "{{ java_path }}/{{ java_folder }}/bin/{{ java_item.binary }}", "link": "/usr/bin/{{ java_item.binary }}", "priority": "{{ java_alternative_priority }}"}, "executable": "alternatives", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security_policy.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-fetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-fetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_distribution == 'oracle_java'", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ security_patch_path }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply patch file", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar", "README.txt"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_path }}/{{ java_folder }}/jre/lib/security/{{ security_patch_folders[java_major_version|int] }}/{{ policy_item }}", "dest": "{{ security_patch_path }}/", "remote_src": true, "directory_mode": true, "owner": "root", "group": "root", "mode": 420}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply setting", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9", "become": true}, "module_options": {"path": "{{ security_patch_path }}/java.security", "regexp": "#crypto.policy=unlimited", "replace": "crypto.policy=unlimited"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system_repositories.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform repo install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml", "options": {"name": "Perform repo install", "with_first_found": ["install/{{ ansible_distribution }}_{{ ansible_distribution_version }}_{{ java_distribution }}_{{ java_major_version }}.yml", "install/{{ ansible_os_family }}_{{ java_distribution }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install requirements", "module": "package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Install requirements", "register": "installed_packages", "retries": 10, "delay": 5, "until": "installed_packages is succeeded", "when": "transport != 'repositories'"}, "module_options": {"name": "{{ java_package_requirements\n  | union(java_extra_package_requirements) | unique }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "RedHat.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml", "options": {"name": "Install java packages", "register": "package_install", "retries": 20, "delay": 5, "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "Debian_adoptopenjdk.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add apt-key for AdoptOpenJDK", "module": "apt_key", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add apt-key for AdoptOpenJDK", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"url": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public", "state": "present"}, "executable": "apt_key", "executable_type": "Module", "fqcn": "ansible.builtin.apt_key", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "apt_repository", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"repo": "deb https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/ bionic main", "filename": "adoptopenjdk", "state": "present", "codename": "trusty", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "RedHat_adoptopenjdk.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"name": "AdoptOpenJDK", "description": "AdoptOpenJDK", "baseurl": "http://adoptopenjdk.jfrog.io/adoptopenjdk/rpm/centos/{{ rh_dist_repo_version }}/x86_64", "enabled": true, "gpgcheck": true, "gpgkey": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public"}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "Debian.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "Amazon_2_corretto_8.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add Amazon yum repository for corretto8", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Add Amazon yum repository for corretto8"}, "module_options": {"name": "amazon-corretto8", "description": "Amazon Extras repo for corretto8", "mirrorlist": "http://amazonlinux.$awsregion.$awsdomain/$releasever/extras/corretto8/latest/$basearch/mirror.list", "priority": 10}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Corretto {{ java_major_version }}", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Install Corretto {{ java_major_version }}"}, "module_options": "RedHat.yml", "executable": "RedHat.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory", "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}/{{ java_folder }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493, "extra_opts": ["--strip-components=1"], "creates": "{{ java_path }}/{{ java_folder }}/bin/"}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir"}, "module_options": {"state": "directory"}, "executable": "tempfile", "executable_type": "Module", "fqcn": "ansible.builtin.tempfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "unarchive", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory", "register": "unarchived_folder"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir.path }}", "remote_src": true, "list_files": true}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "Sync from temporary directory", "module": "synchronize", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Sync from temporary directory", "delegate_to": "{{ inventory_hostname }}"}, "module_options": {"src": "{{ temp_dir.path }}/{{ unarchived_folder.files[0].split(\"/\")[0] }}/", "dest": "{{ java_path }}/{{ java_folder }}", "recursive": true, "archive": false, "checksum": true}, "executable": "synchronize", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set permissions for java installation", "module": "file", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Set permissions for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "recurse": true, "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "openjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content']\n  | regex_findall('(https://download[\\.\\w]+/java/GA/jdk'\n    + java_major_version|string + '[.\\d]*/[\\d\\w]+/'\n    + '[.\\d]+/GPL/openjdk-'\n    + java_major_version|string + '[\\d._]+linux-x64_bin[\\w\\d.]+)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "repositories.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install {{ java_distribution }} from repositories", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml", "options": {"name": "Install {{ java_distribution }} from repositories"}, "module_options": {"msg": "Install {{ java_distribution }} from repositories"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "corretto-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ lookup('url', release_checksum) }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-linux-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "dest": "{{ java_download_path }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapmachine-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch version page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "body_format": "json"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Linux is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact and checksum link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact and checksum link"}, "module_options": {"release_url": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".tar.gz'].browser_download_url\") }}", "checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "uri", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "adoptopenjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=linux&arch=x64&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if AdoptOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdoptOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file['content']\n  | regex_search('([^\\s]+)') }}", "java_downloaded_file": "{{ (release_url[0]|urlsplit).path|basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ java_downloaded_file }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "dragonwell8-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Alibaba Dragonwell", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested major version for Alibaba Dragonwell", "when": "java_major_version != 8"}, "module_options": {"msg": "Alibaba Dragonwell corresponds to OpenJDK 8 only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Alibaba Dragonwell", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested architecture for Alibaba Dragonwell", "when": "java_arch != \"x64\""}, "module_options": {"msg": "Alibaba Dragonwell JDK currently supports Linux/x86_64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Prepare GitHub API release tag", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Prepare GitHub API release tag"}, "module_options": {"sub_uri": "{{ ((java_minor_version != '*')\n  | ternary('tags/v{{ java_major_version }}.{{ java_minor_version }}-GA', 'latest')) }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch Dragonwell version by tag", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Fetch Dragonwell version by tag", "register": "response"}, "module_options": {"url": "{{ github_api_page }}/repos/alibaba/dragonwell8/releases/{{ sub_uri }}", "return_content": true, "body_format": "json", "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if Dragonwell version is not found", "module": "fail", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Exit if Dragonwell version is not found", "when": "response.status == 404"}, "module_options": {"msg": "Dragonwell version {{ java_major_version }}.{{ java_minor_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get release URL", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Get release URL"}, "module_options": {"release_url": "{{ response.json.assets\n    | selectattr('browser_download_url', 'match', '.*_Linux_x64\\.tar\\.gz')\n    | map(attribute='browser_download_url') | list | first }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "s3.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Download artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ transport_s3_bucket }}", "object": "{{ transport_s3_path }}", "dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different", "ignore_nonexistent_bucket": true}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set downloaded artifact vars", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Set downloaded artifact vars"}, "module_options": {"file_downloaded": {"dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "zulu-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=tar.gz&os=linux&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url and artifact_checksum", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Find release url and artifact_checksum"}, "module_options": {"release_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if Zulu version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Exit if Zulu version is not found", "when": "release_url is not defined"}, "module_options": {"msg": "Zulu version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-oracle_java-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}", "mode": 493, "headers": {"Cookie": "gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie; --no-check-certificate"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-s3.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Download security policy artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ java_unlimited_policy_transport_s3_bucket }}", "object": "{{ java_unlimited_policy_transport_s3_path }}", "dest": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path|basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different"}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path\n                       | basename }}\n"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}], "modules": [], "taskfiles": [], "version": "", "module_dict": {}, "task_dict": {"{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Load a system variables file based on distribution or OS family", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Load a system variables file based on distribution or OS family", "with_first_found": ["{{ ansible_os_family }}.yml", "default.yml"], "loop_control": {"loop_var": "distribution"}}, "module_options": "{{ distribution }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Set base variables based on java distribution", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Set base variables based on java distribution"}, "module_options": "java_distro_configs/{{ java_distribution }}_vars.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Fetch oracle artifact with {{ transport }} transport", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Fetch oracle artifact with {{ transport }} transport", "with_first_found": ["{{ ansible_system }}/fetch/{{ java_distribution }}-{{ transport }}.yml", "{{ ansible_system }}/fetch/{{ transport }}.yml", "unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Choose platform based task", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Choose platform based task", "with_first_found": ["{{ ansible_system }}/system_{{ transport }}.yml", "{{ ansible_system }}/system_{{ java_binary_type }}.yml", "{{ ansible_system }}/system.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Finalize binary paths", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Finalize binary paths", "when": "java_setup_path | bool"}, "module_options": "{{ ansible_system }}/finalize_paths.yml", "executable": "{{ ansible_system }}/finalize_paths.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Apply security policy patch", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Apply security policy patch", "with_first_found": ["{{ ansible_system }}/security_policy.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}, "when": ["java_setup_path", "java_unlimited_policy_enabled", "java_distribution == 'oracle_java'"]}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Warn on unsupported transport", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml", "options": {"name": "Warn on unsupported transport"}, "module_options": {"msg": "This role does not support '{{ transport }}' transport.\nPlease contact support@lean-delivery.com\n"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Warn on unsupported platform", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml", "options": {"name": "Warn on unsupported platform"}, "module_options": {"msg": "This role does not support '{{ ansible_os_family }}' platform.\n  Please contact support@lean-delivery.com\n"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Find java_folder", "module": "win_find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_act_path": "{{ java_dir.files | map(attribute='path') | list | last }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Set java environment variable", "module": "win_environment", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set java environment variable"}, "module_options": {"name": "JAVA_HOME", "state": "present", "value": "{{ java_act_path }}", "level": "machine"}, "executable": "win_environment", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable", "module": "win_path", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable"}, "module_options": {"elements": "{{ java_act_path }}\\bin", "state": "present", "scope": "machine"}, "executable": "win_path", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-winfetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-winfetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "creates": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Apply patch file", "module": "win_copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}\\{{ policy_item }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Apply setting", "module": "win_lineinfile", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9"}, "module_options": {"path": "{{ java_act_path }}\\jre\\lib\\security\\java.security", "line": "crypto.policy=unlimited"}, "executable": "win_lineinfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}", "creates": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install {{ choco_java_package }} from chocolatey", "module": "win_chocolatey", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Install {{ choco_java_package }} from chocolatey", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "{{ choco_java_package }}"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}\\bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present", "arguments": "/s INSTALLDIR=\"{{ java_path }}\\{{ java_folder }}\"", "creates_path": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "Install vcredist package prior to using SAP JVM", "module": "win_chocolatey", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Install vcredist package prior to using SAP JVM", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "vcredist2013"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content'] | regex_findall('(https://download[\\.\\w]+/java/GA/jdk' + java_major_version|string + '[.\\d]*/[\\d\\w]+/' + '[.\\d]+/GPL/openjdk-' + java_major_version|string + '[\\d._]+windows-x64_bin[\\w\\d.]+)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release, or maybe something wrong with java.net"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}\\{{ (release_url[0]|urlsplit).path|basename }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "win_get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}\\{{ (release_url|urlsplit).path|basename }}", "checksum": "{{ lookup('url', release_checksum) }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}\\"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}\\{{ (transport_web | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-windows-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Download sapjvm artifact", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Download sapjvm artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}, "dest": "{{ java_download_path }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch version page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "win_uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "headers": {"user-agent": "Mozilla/5.0"}}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Windows is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Get artifact link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact link"}, "module_options": {"artifact_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".zip'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Get checksum link", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get checksum link"}, "module_options": {"checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "Download artifact", "module": "win_get_url", "index": 8, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_link[0] }}", "dest": "{{ java_download_path }}", "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "sha256", "force": true}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=windows&arch={{ (java_arch == 'x64') | ternary('x64', 'x32') }}&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Exit if AdobtOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdobtOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": {"content": "{{ artifact_checksum_file['content'] |\n  regex_search('([^\\s]+)')\n}}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Set java_binary_type = chocolatey", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Set java_binary_type = chocolatey"}, "module_options": {"java_binary_type": "chocolatey"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Chocolatey will download artifact itself", "module": "debug", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Chocolatey will download artifact itself"}, "module_options": {"msg": "Chocolatey will download artifact itself"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=zip&os=win&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Set artifact checksum and url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Set artifact checksum and url"}, "module_options": {"artifact_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Download artifact from {{ artifact_url }}", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ artifact_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_url }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}\\{{ (java_unlimited_policy_url\n  | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}\\{{ (fallback_oracle_security_policy_artifacts[java_major_version|int]\n  | urlsplit('path')).split('/')[-1] }}", "headers": {"Cookie": "oraclelicense=accept-securebackup-cookie"}, "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Find java_folder", "module": "find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "find", "executable_type": "Module", "fqcn": "ansible.builtin.find", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_folder": "{{ java_dir.files | map(attribute='path') | list | last | basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Put java profile", "module": "template", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Put java profile"}, "module_options": {"src": "java.sh.j2", "dest": "/etc/profile.d/java.sh", "owner": "root", "group": "root", "mode": 365}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Check for java binaries existence", "module": "stat", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Check for java binaries existence", "register": "java_binary_collection", "loop": ["java", "javac", "jar", "keytool"], "loop_control": {"loop_var": "binary"}}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin/{{ binary }}"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Update alternatives", "module": "alternatives", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Update alternatives", "when": "java_item.stat.exists | bool", "loop": "{{ java_binary_collection.results }}", "loop_control": {"loop_var": "java_item"}}, "module_options": {"name": "{{ java_item.binary }}", "path": "{{ java_path }}/{{ java_folder }}/bin/{{ java_item.binary }}", "link": "/usr/bin/{{ java_item.binary }}", "priority": "{{ java_alternative_priority }}"}, "executable": "alternatives", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-fetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-fetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_distribution == 'oracle_java'", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ security_patch_path }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Apply patch file", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar", "README.txt"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_path }}/{{ java_folder }}/jre/lib/security/{{ security_patch_folders[java_major_version|int] }}/{{ policy_item }}", "dest": "{{ security_patch_path }}/", "remote_src": true, "directory_mode": true, "owner": "root", "group": "root", "mode": 420}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Apply setting", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9", "become": true}, "module_options": {"path": "{{ security_patch_path }}/java.security", "regexp": "#crypto.policy=unlimited", "replace": "crypto.policy=unlimited"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Perform repo install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml", "options": {"name": "Perform repo install", "with_first_found": ["install/{{ ansible_distribution }}_{{ ansible_distribution_version }}_{{ java_distribution }}_{{ java_major_version }}.yml", "install/{{ ansible_os_family }}_{{ java_distribution }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install requirements", "module": "package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Install requirements", "register": "installed_packages", "retries": 10, "delay": 5, "until": "installed_packages is succeeded", "when": "transport != 'repositories'"}, "module_options": {"name": "{{ java_package_requirements\n  | union(java_extra_package_requirements) | unique }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml", "options": {"name": "Install java packages", "register": "package_install", "retries": 20, "delay": 5, "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Add apt-key for AdoptOpenJDK", "module": "apt_key", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add apt-key for AdoptOpenJDK", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"url": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public", "state": "present"}, "executable": "apt_key", "executable_type": "Module", "fqcn": "ansible.builtin.apt_key", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "apt_repository", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"repo": "deb https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/ bionic main", "filename": "adoptopenjdk", "state": "present", "codename": "trusty", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"name": "AdoptOpenJDK", "description": "AdoptOpenJDK", "baseurl": "http://adoptopenjdk.jfrog.io/adoptopenjdk/rpm/centos/{{ rh_dist_repo_version }}/x86_64", "enabled": true, "gpgcheck": true, "gpgkey": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public"}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Add Amazon yum repository for corretto8", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Add Amazon yum repository for corretto8"}, "module_options": {"name": "amazon-corretto8", "description": "Amazon Extras repo for corretto8", "mirrorlist": "http://amazonlinux.$awsregion.$awsdomain/$releasever/extras/corretto8/latest/$basearch/mirror.list", "priority": 10}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install Corretto {{ java_major_version }}", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Install Corretto {{ java_major_version }}"}, "module_options": "RedHat.yml", "executable": "RedHat.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory", "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}/{{ java_folder }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493, "extra_opts": ["--strip-components=1"], "creates": "{{ java_path }}/{{ java_folder }}/bin/"}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir"}, "module_options": {"state": "directory"}, "executable": "tempfile", "executable_type": "Module", "fqcn": "ansible.builtin.tempfile", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "unarchive", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory", "register": "unarchived_folder"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir.path }}", "remote_src": true, "list_files": true}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Sync from temporary directory", "module": "synchronize", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Sync from temporary directory", "delegate_to": "{{ inventory_hostname }}"}, "module_options": {"src": "{{ temp_dir.path }}/{{ unarchived_folder.files[0].split(\"/\")[0] }}/", "dest": "{{ java_path }}/{{ java_folder }}", "recursive": true, "archive": false, "checksum": true}, "executable": "synchronize", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Set permissions for java installation", "module": "file", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Set permissions for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "recurse": true, "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content']\n  | regex_findall('(https://download[\\.\\w]+/java/GA/jdk'\n    + java_major_version|string + '[.\\d]*/[\\d\\w]+/'\n    + '[.\\d]+/GPL/openjdk-'\n    + java_major_version|string + '[\\d._]+linux-x64_bin[\\w\\d.]+)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install {{ java_distribution }} from repositories", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml", "options": {"name": "Install {{ java_distribution }} from repositories"}, "module_options": {"msg": "Install {{ java_distribution }} from repositories"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ lookup('url', release_checksum) }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-linux-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "dest": "{{ java_download_path }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch version page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "body_format": "json"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Linux is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Get artifact and checksum link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact and checksum link"}, "module_options": {"release_url": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".tar.gz'].browser_download_url\") }}", "checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "uri", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "Download artifact", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=linux&arch=x64&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Exit if AdoptOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdoptOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file['content']\n  | regex_search('([^\\s]+)') }}", "java_downloaded_file": "{{ (release_url[0]|urlsplit).path|basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ java_downloaded_file }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check requested major version for Alibaba Dragonwell", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested major version for Alibaba Dragonwell", "when": "java_major_version != 8"}, "module_options": {"msg": "Alibaba Dragonwell corresponds to OpenJDK 8 only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Check requested architecture for Alibaba Dragonwell", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested architecture for Alibaba Dragonwell", "when": "java_arch != \"x64\""}, "module_options": {"msg": "Alibaba Dragonwell JDK currently supports Linux/x86_64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Prepare GitHub API release tag", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Prepare GitHub API release tag"}, "module_options": {"sub_uri": "{{ ((java_minor_version != '*')\n  | ternary('tags/v{{ java_major_version }}.{{ java_minor_version }}-GA', 'latest')) }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Fetch Dragonwell version by tag", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Fetch Dragonwell version by tag", "register": "response"}, "module_options": {"url": "{{ github_api_page }}/repos/alibaba/dragonwell8/releases/{{ sub_uri }}", "return_content": true, "body_format": "json", "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Exit if Dragonwell version is not found", "module": "fail", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Exit if Dragonwell version is not found", "when": "response.status == 404"}, "module_options": {"msg": "Dragonwell version {{ java_major_version }}.{{ java_minor_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Get release URL", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Get release URL"}, "module_options": {"release_url": "{{ response.json.assets\n    | selectattr('browser_download_url', 'match', '.*_Linux_x64\\.tar\\.gz')\n    | map(attribute='browser_download_url') | list | first }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Download artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ transport_s3_bucket }}", "object": "{{ transport_s3_path }}", "dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different", "ignore_nonexistent_bucket": true}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Set downloaded artifact vars", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Set downloaded artifact vars"}, "module_options": {"file_downloaded": {"dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=tar.gz&os=linux&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Find release url and artifact_checksum", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Find release url and artifact_checksum"}, "module_options": {"release_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Exit if Zulu version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Exit if Zulu version is not found", "when": "release_url is not defined"}, "module_options": {"msg": "Zulu version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}", "mode": 493, "headers": {"Cookie": "gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie; --no-check-certificate"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download security policy artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Download security policy artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ java_unlimited_policy_transport_s3_bucket }}", "object": "{{ java_unlimited_policy_transport_s3_path }}", "dest": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path|basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different"}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path\n                       | basename }}\n"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}}, "taskfile_dict": {"./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Load a system variables file based on distribution or OS family", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Load a system variables file based on distribution or OS family", "with_first_found": ["{{ ansible_os_family }}.yml", "default.yml"], "loop_control": {"loop_var": "distribution"}}, "module_options": "{{ distribution }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set base variables based on java distribution", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Set base variables based on java distribution"}, "module_options": "java_distro_configs/{{ java_distribution }}_vars.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch oracle artifact with {{ transport }} transport", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Fetch oracle artifact with {{ transport }} transport", "with_first_found": ["{{ ansible_system }}/fetch/{{ java_distribution }}-{{ transport }}.yml", "{{ ansible_system }}/fetch/{{ transport }}.yml", "unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Choose platform based task", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Choose platform based task", "with_first_found": ["{{ ansible_system }}/system_{{ transport }}.yml", "{{ ansible_system }}/system_{{ java_binary_type }}.yml", "{{ ansible_system }}/system.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Finalize binary paths", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Finalize binary paths", "when": "java_setup_path | bool"}, "module_options": "{{ ansible_system }}/finalize_paths.yml", "executable": "{{ ansible_system }}/finalize_paths.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply security policy patch", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Apply security policy patch", "with_first_found": ["{{ ansible_system }}/security_policy.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}, "when": ["java_setup_path", "java_unlimited_policy_enabled", "java_distribution == 'oracle_java'"]}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml": {"py/object": "struct4.TaskFile", "name": "unknown-transport.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml", "tasks": [{"py/object": "struct4.Task", "name": "Warn on unsupported transport", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml", "options": {"name": "Warn on unsupported transport"}, "module_options": {"msg": "This role does not support '{{ transport }}' transport.\nPlease contact support@lean-delivery.com\n"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml": {"py/object": "struct4.TaskFile", "name": "not-supported.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml", "tasks": [{"py/object": "struct4.Task", "name": "Warn on unsupported platform", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml", "options": {"name": "Warn on unsupported platform"}, "module_options": {"msg": "This role does not support '{{ ansible_os_family }}' platform.\n  Please contact support@lean-delivery.com\n"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml": {"py/object": "struct4.TaskFile", "name": "finalize_paths.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "tasks": [{"py/object": "struct4.Task", "name": "Find java_folder", "module": "win_find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_act_path": "{{ java_dir.files | map(attribute='path') | list | last }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set java environment variable", "module": "win_environment", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set java environment variable"}, "module_options": {"name": "JAVA_HOME", "state": "present", "value": "{{ java_act_path }}", "level": "machine"}, "executable": "win_environment", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable", "module": "win_path", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable"}, "module_options": {"elements": "{{ java_act_path }}\\bin", "state": "present", "scope": "machine"}, "executable": "win_path", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml": {"py/object": "struct4.TaskFile", "name": "security_policy.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-winfetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-winfetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "creates": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply patch file", "module": "win_copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}\\{{ policy_item }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply setting", "module": "win_lineinfile", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9"}, "module_options": {"path": "{{ java_act_path }}\\jre\\lib\\security\\java.security", "line": "crypto.policy=unlimited"}, "executable": "win_lineinfile", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml": {"py/object": "struct4.TaskFile", "name": "system.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml": {"py/object": "struct4.TaskFile", "name": "system_chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml": {"py/object": "struct4.TaskFile", "name": "corretto_package.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml": {"py/object": "struct4.TaskFile", "name": "adoptopenjdk_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml": {"py/object": "struct4.TaskFile", "name": "sapmachine_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml": {"py/object": "struct4.TaskFile", "name": "tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}", "creates": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml": {"py/object": "struct4.TaskFile", "name": "chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install {{ choco_java_package }} from chocolatey", "module": "win_chocolatey", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Install {{ choco_java_package }} from chocolatey", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "{{ choco_java_package }}"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml": {"py/object": "struct4.TaskFile", "name": "zulu_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}\\bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml": {"py/object": "struct4.TaskFile", "name": "package.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present", "arguments": "/s INSTALLDIR=\"{{ java_path }}\\{{ java_folder }}\"", "creates_path": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml": {"py/object": "struct4.TaskFile", "name": "sapjvm_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install vcredist package prior to using SAP JVM", "module": "win_chocolatey", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Install vcredist package prior to using SAP JVM", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "vcredist2013"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml": {"py/object": "struct4.TaskFile", "name": "openjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content'] | regex_findall('(https://download[\\.\\w]+/java/GA/jdk' + java_major_version|string + '[.\\d]*/[\\d\\w]+/' + '[.\\d]+/GPL/openjdk-' + java_major_version|string + '[\\d._]+windows-x64_bin[\\w\\d.]+)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release, or maybe something wrong with java.net"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}\\{{ (release_url[0]|urlsplit).path|basename }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml": {"py/object": "struct4.TaskFile", "name": "corretto-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "win_get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}\\{{ (release_url|urlsplit).path|basename }}", "checksum": "{{ lookup('url', release_checksum) }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml": {"py/object": "struct4.TaskFile", "name": "local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}\\"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml": {"py/object": "struct4.TaskFile", "name": "web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}\\{{ (transport_web | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml": {"py/object": "struct4.TaskFile", "name": "sapjvm-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-windows-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download sapjvm artifact", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Download sapjvm artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}, "dest": "{{ java_download_path }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml": {"py/object": "struct4.TaskFile", "name": "sapmachine-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch version page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "win_uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "headers": {"user-agent": "Mozilla/5.0"}}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Windows is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact link"}, "module_options": {"artifact_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".zip'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get checksum link", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get checksum link"}, "module_options": {"checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact", "module": "win_get_url", "index": 8, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_link[0] }}", "dest": "{{ java_download_path }}", "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "sha256", "force": true}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml": {"py/object": "struct4.TaskFile", "name": "adoptopenjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=windows&arch={{ (java_arch == 'x64') | ternary('x64', 'x32') }}&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if AdobtOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdobtOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": {"content": "{{ artifact_checksum_file['content'] |\n  regex_search('([^\\s]+)')\n}}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml": {"py/object": "struct4.TaskFile", "name": "chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Set java_binary_type = chocolatey", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Set java_binary_type = chocolatey"}, "module_options": {"java_binary_type": "chocolatey"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Chocolatey will download artifact itself", "module": "debug", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Chocolatey will download artifact itself"}, "module_options": {"msg": "Chocolatey will download artifact itself"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml": {"py/object": "struct4.TaskFile", "name": "zulu-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=zip&os=win&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set artifact checksum and url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Set artifact checksum and url"}, "module_options": {"artifact_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ artifact_url }}", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ artifact_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_url }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml": {"py/object": "struct4.TaskFile", "name": "security-winfetch-local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml": {"py/object": "struct4.TaskFile", "name": "security-winfetch-web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}\\{{ (java_unlimited_policy_url\n  | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml": {"py/object": "struct4.TaskFile", "name": "security-winfetch-oracle_java-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}\\{{ (fallback_oracle_security_policy_artifacts[java_major_version|int]\n  | urlsplit('path')).split('/')[-1] }}", "headers": {"Cookie": "oraclelicense=accept-securebackup-cookie"}, "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml": {"py/object": "struct4.TaskFile", "name": "finalize_paths.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "tasks": [{"py/object": "struct4.Task", "name": "Find java_folder", "module": "find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "find", "executable_type": "Module", "fqcn": "ansible.builtin.find", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_folder": "{{ java_dir.files | map(attribute='path') | list | last | basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Put java profile", "module": "template", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Put java profile"}, "module_options": {"src": "java.sh.j2", "dest": "/etc/profile.d/java.sh", "owner": "root", "group": "root", "mode": 365}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check for java binaries existence", "module": "stat", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Check for java binaries existence", "register": "java_binary_collection", "loop": ["java", "javac", "jar", "keytool"], "loop_control": {"loop_var": "binary"}}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin/{{ binary }}"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Update alternatives", "module": "alternatives", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Update alternatives", "when": "java_item.stat.exists | bool", "loop": "{{ java_binary_collection.results }}", "loop_control": {"loop_var": "java_item"}}, "module_options": {"name": "{{ java_item.binary }}", "path": "{{ java_path }}/{{ java_folder }}/bin/{{ java_item.binary }}", "link": "/usr/bin/{{ java_item.binary }}", "priority": "{{ java_alternative_priority }}"}, "executable": "alternatives", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml": {"py/object": "struct4.TaskFile", "name": "security_policy.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-fetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-fetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_distribution == 'oracle_java'", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ security_patch_path }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply patch file", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar", "README.txt"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_path }}/{{ java_folder }}/jre/lib/security/{{ security_patch_folders[java_major_version|int] }}/{{ policy_item }}", "dest": "{{ security_patch_path }}/", "remote_src": true, "directory_mode": true, "owner": "root", "group": "root", "mode": 420}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply setting", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9", "become": true}, "module_options": {"path": "{{ security_patch_path }}/java.security", "regexp": "#crypto.policy=unlimited", "replace": "crypto.policy=unlimited"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml": {"py/object": "struct4.TaskFile", "name": "system_repositories.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform repo install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml", "options": {"name": "Perform repo install", "with_first_found": ["install/{{ ansible_distribution }}_{{ ansible_distribution_version }}_{{ java_distribution }}_{{ java_major_version }}.yml", "install/{{ ansible_os_family }}_{{ java_distribution }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml": {"py/object": "struct4.TaskFile", "name": "system.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install requirements", "module": "package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Install requirements", "register": "installed_packages", "retries": 10, "delay": 5, "until": "installed_packages is succeeded", "when": "transport != 'repositories'"}, "module_options": {"name": "{{ java_package_requirements\n  | union(java_extra_package_requirements) | unique }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml": {"py/object": "struct4.TaskFile", "name": "RedHat.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml", "options": {"name": "Install java packages", "register": "package_install", "retries": 20, "delay": 5, "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml": {"py/object": "struct4.TaskFile", "name": "Debian_adoptopenjdk.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add apt-key for AdoptOpenJDK", "module": "apt_key", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add apt-key for AdoptOpenJDK", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"url": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public", "state": "present"}, "executable": "apt_key", "executable_type": "Module", "fqcn": "ansible.builtin.apt_key", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "apt_repository", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"repo": "deb https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/ bionic main", "filename": "adoptopenjdk", "state": "present", "codename": "trusty", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml": {"py/object": "struct4.TaskFile", "name": "RedHat_adoptopenjdk.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"name": "AdoptOpenJDK", "description": "AdoptOpenJDK", "baseurl": "http://adoptopenjdk.jfrog.io/adoptopenjdk/rpm/centos/{{ rh_dist_repo_version }}/x86_64", "enabled": true, "gpgcheck": true, "gpgkey": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public"}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml": {"py/object": "struct4.TaskFile", "name": "Debian.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml": {"py/object": "struct4.TaskFile", "name": "Amazon_2_corretto_8.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add Amazon yum repository for corretto8", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Add Amazon yum repository for corretto8"}, "module_options": {"name": "amazon-corretto8", "description": "Amazon Extras repo for corretto8", "mirrorlist": "http://amazonlinux.$awsregion.$awsdomain/$releasever/extras/corretto8/latest/$basearch/mirror.list", "priority": 10}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Corretto {{ java_major_version }}", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Install Corretto {{ java_major_version }}"}, "module_options": "RedHat.yml", "executable": "RedHat.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml": {"py/object": "struct4.TaskFile", "name": "tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory", "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}/{{ java_folder }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493, "extra_opts": ["--strip-components=1"], "creates": "{{ java_path }}/{{ java_folder }}/bin/"}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml": {"py/object": "struct4.TaskFile", "name": "sapjvm_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir"}, "module_options": {"state": "directory"}, "executable": "tempfile", "executable_type": "Module", "fqcn": "ansible.builtin.tempfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "unarchive", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory", "register": "unarchived_folder"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir.path }}", "remote_src": true, "list_files": true}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "Sync from temporary directory", "module": "synchronize", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Sync from temporary directory", "delegate_to": "{{ inventory_hostname }}"}, "module_options": {"src": "{{ temp_dir.path }}/{{ unarchived_folder.files[0].split(\"/\")[0] }}/", "dest": "{{ java_path }}/{{ java_folder }}", "recursive": true, "archive": false, "checksum": true}, "executable": "synchronize", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set permissions for java installation", "module": "file", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Set permissions for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "recurse": true, "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml": {"py/object": "struct4.TaskFile", "name": "openjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content']\n  | regex_findall('(https://download[\\.\\w]+/java/GA/jdk'\n    + java_major_version|string + '[.\\d]*/[\\d\\w]+/'\n    + '[.\\d]+/GPL/openjdk-'\n    + java_major_version|string + '[\\d._]+linux-x64_bin[\\w\\d.]+)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml": {"py/object": "struct4.TaskFile", "name": "repositories.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install {{ java_distribution }} from repositories", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml", "options": {"name": "Install {{ java_distribution }} from repositories"}, "module_options": {"msg": "Install {{ java_distribution }} from repositories"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml": {"py/object": "struct4.TaskFile", "name": "corretto-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ lookup('url', release_checksum) }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml": {"py/object": "struct4.TaskFile", "name": "local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml": {"py/object": "struct4.TaskFile", "name": "web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml": {"py/object": "struct4.TaskFile", "name": "sapjvm-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-linux-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "dest": "{{ java_download_path }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml": {"py/object": "struct4.TaskFile", "name": "sapmachine-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch version page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "body_format": "json"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Linux is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact and checksum link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact and checksum link"}, "module_options": {"release_url": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".tar.gz'].browser_download_url\") }}", "checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "uri", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml": {"py/object": "struct4.TaskFile", "name": "adoptopenjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=linux&arch=x64&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if AdoptOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdoptOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file['content']\n  | regex_search('([^\\s]+)') }}", "java_downloaded_file": "{{ (release_url[0]|urlsplit).path|basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ java_downloaded_file }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml": {"py/object": "struct4.TaskFile", "name": "dragonwell8-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Alibaba Dragonwell", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested major version for Alibaba Dragonwell", "when": "java_major_version != 8"}, "module_options": {"msg": "Alibaba Dragonwell corresponds to OpenJDK 8 only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Alibaba Dragonwell", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested architecture for Alibaba Dragonwell", "when": "java_arch != \"x64\""}, "module_options": {"msg": "Alibaba Dragonwell JDK currently supports Linux/x86_64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Prepare GitHub API release tag", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Prepare GitHub API release tag"}, "module_options": {"sub_uri": "{{ ((java_minor_version != '*')\n  | ternary('tags/v{{ java_major_version }}.{{ java_minor_version }}-GA', 'latest')) }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch Dragonwell version by tag", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Fetch Dragonwell version by tag", "register": "response"}, "module_options": {"url": "{{ github_api_page }}/repos/alibaba/dragonwell8/releases/{{ sub_uri }}", "return_content": true, "body_format": "json", "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if Dragonwell version is not found", "module": "fail", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Exit if Dragonwell version is not found", "when": "response.status == 404"}, "module_options": {"msg": "Dragonwell version {{ java_major_version }}.{{ java_minor_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get release URL", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Get release URL"}, "module_options": {"release_url": "{{ response.json.assets\n    | selectattr('browser_download_url', 'match', '.*_Linux_x64\\.tar\\.gz')\n    | map(attribute='browser_download_url') | list | first }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml": {"py/object": "struct4.TaskFile", "name": "s3.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Download artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ transport_s3_bucket }}", "object": "{{ transport_s3_path }}", "dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different", "ignore_nonexistent_bucket": true}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set downloaded artifact vars", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Set downloaded artifact vars"}, "module_options": {"file_downloaded": {"dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml": {"py/object": "struct4.TaskFile", "name": "zulu-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=tar.gz&os=linux&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url and artifact_checksum", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Find release url and artifact_checksum"}, "module_options": {"release_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if Zulu version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Exit if Zulu version is not found", "when": "release_url is not defined"}, "module_options": {"msg": "Zulu version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml": {"py/object": "struct4.TaskFile", "name": "security-fetch-oracle_java-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}", "mode": 493, "headers": {"Cookie": "gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie; --no-check-certificate"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml": {"py/object": "struct4.TaskFile", "name": "security-fetch-s3.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Download security policy artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ java_unlimited_policy_transport_s3_bucket }}", "object": "{{ java_unlimited_policy_transport_s3_path }}", "dest": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path|basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different"}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path\n                       | basename }}\n"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml": {"py/object": "struct4.TaskFile", "name": "security-fetch-local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml": {"py/object": "struct4.TaskFile", "name": "security-fetch-web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}}, "role_dict": {"lean_delivery.java": {"py/object": "struct4.Role", "name": "lean_delivery.java", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java", "fqcn": "lean_delivery.java", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Load a system variables file based on distribution or OS family", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Load a system variables file based on distribution or OS family", "with_first_found": ["{{ ansible_os_family }}.yml", "default.yml"], "loop_control": {"loop_var": "distribution"}}, "module_options": "{{ distribution }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set base variables based on java distribution", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Set base variables based on java distribution"}, "module_options": "java_distro_configs/{{ java_distribution }}_vars.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch oracle artifact with {{ transport }} transport", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Fetch oracle artifact with {{ transport }} transport", "with_first_found": ["{{ ansible_system }}/fetch/{{ java_distribution }}-{{ transport }}.yml", "{{ ansible_system }}/fetch/{{ transport }}.yml", "unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Choose platform based task", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Choose platform based task", "with_first_found": ["{{ ansible_system }}/system_{{ transport }}.yml", "{{ ansible_system }}/system_{{ java_binary_type }}.yml", "{{ ansible_system }}/system.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Finalize binary paths", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Finalize binary paths", "when": "java_setup_path | bool"}, "module_options": "{{ ansible_system }}/finalize_paths.yml", "executable": "{{ ansible_system }}/finalize_paths.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply security policy patch", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/main.yml", "options": {"name": "Apply security policy patch", "with_first_found": ["{{ ansible_system }}/security_policy.yml", "not-supported.yml"], "loop_control": {"loop_var": "java_os_platform"}, "when": ["java_setup_path", "java_unlimited_policy_enabled", "java_distribution == 'oracle_java'"]}, "module_options": "{{ java_os_platform }}", "executable": "{{ java_os_platform }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "unknown-transport.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml", "tasks": [{"py/object": "struct4.Task", "name": "Warn on unsupported transport", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/unknown-transport.yml", "options": {"name": "Warn on unsupported transport"}, "module_options": {"msg": "This role does not support '{{ transport }}' transport.\nPlease contact support@lean-delivery.com\n"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "not-supported.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml", "tasks": [{"py/object": "struct4.Task", "name": "Warn on unsupported platform", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/not-supported.yml", "options": {"name": "Warn on unsupported platform"}, "module_options": {"msg": "This role does not support '{{ ansible_os_family }}' platform.\n  Please contact support@lean-delivery.com\n"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "finalize_paths.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "tasks": [{"py/object": "struct4.Task", "name": "Find java_folder", "module": "win_find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_act_path": "{{ java_dir.files | map(attribute='path') | list | last }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set java environment variable", "module": "win_environment", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Set java environment variable"}, "module_options": {"name": "JAVA_HOME", "state": "present", "value": "{{ java_act_path }}", "level": "machine"}, "executable": "win_environment", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable", "module": "win_path", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/finalize_paths.yml", "options": {"name": "Ensure that 'JAVA_HOME\\bin' present in 'Path' variable"}, "module_options": {"elements": "{{ java_act_path }}\\bin", "state": "present", "scope": "machine"}, "executable": "win_path", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security_policy.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-winfetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-winfetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "creates": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply patch file", "module": "win_copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_act_path }}\\jre\\lib\\security\\{{ security_patch_folders[java_major_version|int] }}\\{{ policy_item }}", "dest": "{{ java_act_path }}\\jre\\lib\\security\\", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply setting", "module": "win_lineinfile", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9"}, "module_options": {"path": "{{ java_act_path }}\\jre\\lib\\security\\java.security", "line": "crypto.policy=unlimited"}, "executable": "win_lineinfile", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system_chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/system_chocolatey.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "corretto_package.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/corretto_package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "adoptopenjdk_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/adoptopenjdk_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapmachine_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapmachine_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "win_unzip", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}", "creates": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install {{ choco_java_package }} from chocolatey", "module": "win_chocolatey", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/chocolatey.yml", "options": {"name": "Install {{ choco_java_package }} from chocolatey", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "{{ choco_java_package }}"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "zulu_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}\\bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/zulu_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "package.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "win_package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/package.yml", "options": {"name": "Install java packages"}, "module_options": {"path": "{{ java_artifact }}", "product_id": "{{ java_product_id }}", "state": "present", "arguments": "/s INSTALLDIR=\"{{ java_path }}\\{{ java_folder }}\"", "creates_path": "{{ java_path }}\\{{ java_folder }}"}, "executable": "win_package", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "win_stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}/bin"}, "executable": "win_stat", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "win_file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}\\{{ java_folder }}", "state": "directory"}, "executable": "win_file", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "win_tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir_path"}, "module_options": {"state": "directory"}, "executable": "win_tempfile", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "win_unzip", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir_path }}"}, "executable": "win_unzip", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find java_folder in temp", "module": "win_find", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Find java_folder in temp", "register": "java_temp_folder"}, "module_options": {"paths": "{{ temp_dir_path }}", "recurse": false, "file_type": "directory"}, "executable": "win_find", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy from temporary directory", "module": "win_copy", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Copy from temporary directory"}, "module_options": {"src": "{{ java_temp_folder.files | map(attribute=\"path\") | list | last }}\\", "dest": "{{ java_path }}\\{{ java_folder }}", "remote_src": true}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check choco", "module": "win_chocolatey", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Check choco"}, "module_options": {"name": "chocolatey", "state": "present"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install vcredist package prior to using SAP JVM", "module": "win_chocolatey", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/install/sapjvm_tarball.yml", "options": {"name": "Install vcredist package prior to using SAP JVM", "register": "choco_install", "retries": 15, "delay": 5, "until": "choco_install is succeeded"}, "module_options": {"name": "vcredist2013"}, "executable": "win_chocolatey", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "openjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content'] | regex_findall('(https://download[\\.\\w]+/java/GA/jdk' + java_major_version|string + '[.\\d]*/[\\d\\w]+/' + '[.\\d]+/GPL/openjdk-' + java_major_version|string + '[\\d._]+windows-x64_bin[\\w\\d.]+)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release, or maybe something wrong with java.net"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}\\{{ (release_url[0]|urlsplit).path|basename }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "corretto-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-windows-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "win_get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}\\{{ (release_url|urlsplit).path|basename }}", "checksum": "{{ lookup('url', release_checksum) }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}\\"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}\\{{ (transport_web | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-windows-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download sapjvm artifact", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapjvm-fallback.yml", "options": {"name": "Download sapjvm artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}, "dest": "{{ java_download_path }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapmachine-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch version page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "win_uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "headers": {"user-agent": "Mozilla/5.0"}}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Windows is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact link"}, "module_options": {"artifact_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".zip'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get checksum link", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Get checksum link"}, "module_options": {"checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "win_uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact", "module": "win_get_url", "index": 8, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_link[0] }}", "dest": "{{ java_download_path }}", "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "sha256", "force": true}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "adoptopenjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=windows&arch={{ (java_arch == 'x64') | ternary('x64', 'x32') }}&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if AdobtOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdobtOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "win_uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": {"content": "{{ artifact_checksum_file['content'] |\n  regex_search('([^\\s]+)')\n}}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "win_get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum.content }}", "checksum_algorithm": "sha256"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "chocolatey.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "tasks": [{"py/object": "struct4.Task", "name": "Set java_binary_type = chocolatey", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Set java_binary_type = chocolatey"}, "module_options": {"java_binary_type": "chocolatey"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Chocolatey will download artifact itself", "module": "debug", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/chocolatey.yml", "options": {"name": "Chocolatey will download artifact itself"}, "module_options": {"msg": "Chocolatey will download artifact itself"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "zulu-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "win_uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=zip&os=win&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "win_uri", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set artifact checksum and url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Set artifact checksum and url"}, "module_options": {"artifact_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ artifact_url }}", "module": "win_get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ artifact_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ artifact_url }}", "dest": "{{ java_download_path }}", "force": true, "checksum": "{{ artifact_checksum }}", "checksum_algorithm": "md5"}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-winfetch-local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "win_copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "win_copy", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-winfetch-web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}\\{{ (java_unlimited_policy_url\n  | urlsplit('path')).split('/')[-1] }}", "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-winfetch-oracle_java-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "win_get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}\\{{ (fallback_oracle_security_policy_artifacts[java_major_version|int]\n  | urlsplit('path')).split('/')[-1] }}", "headers": {"Cookie": "oraclelicense=accept-securebackup-cookie"}, "force": false}, "executable": "win_get_url", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Win32NT/fetch/security-fetch/security-winfetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "finalize_paths.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "tasks": [{"py/object": "struct4.Task", "name": "Find java_folder", "module": "find", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Find java_folder", "register": "java_dir"}, "module_options": {"paths": "{{ java_path }}", "recurse": false, "file_type": "directory", "patterns": "{{ java_folder }}", "use_regex": true}, "executable": "find", "executable_type": "Module", "fqcn": "ansible.builtin.find", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set actual java directory", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Set actual java directory"}, "module_options": {"java_folder": "{{ java_dir.files | map(attribute='path') | list | last | basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Put java profile", "module": "template", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Put java profile"}, "module_options": {"src": "java.sh.j2", "dest": "/etc/profile.d/java.sh", "owner": "root", "group": "root", "mode": 365}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check for java binaries existence", "module": "stat", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Check for java binaries existence", "register": "java_binary_collection", "loop": ["java", "javac", "jar", "keytool"], "loop_control": {"loop_var": "binary"}}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin/{{ binary }}"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Update alternatives", "module": "alternatives", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/finalize_paths.yml", "options": {"name": "Update alternatives", "when": "java_item.stat.exists | bool", "loop": "{{ java_binary_collection.results }}", "loop_control": {"loop_var": "java_item"}}, "module_options": {"name": "{{ java_item.binary }}", "path": "{{ java_path }}/{{ java_folder }}/bin/{{ java_item.binary }}", "link": "/usr/bin/{{ java_item.binary }}", "priority": "{{ java_alternative_priority }}"}, "executable": "alternatives", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security_policy.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Fetch oracle security policy with {{ java_unlimited_policy_transport }} transport", "with_first_found": ["fetch/security-fetch/security-fetch-{{ java_unlimited_policy_transport }}.yml", "fetch/security-fetch/security-fetch-{{ java_distribution }}-{{ java_unlimited_policy_transport }}.yml", "fetch/unknown-transport.yml"], "loop_control": {"loop_var": "transport_driver"}, "when": ["java_unlimited_policy_enabled", "java_distribution == 'oracle_java'", "java_full_version is version('8.151', '<')"]}, "module_options": "{{ transport_driver }}", "executable": "{{ transport_driver }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unzip patch file", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Unzip patch file"}, "module_options": {"src": "{{ security_policy_java_artifact }}", "dest": "{{ security_patch_path }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply patch file", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply patch file", "loop": ["local_policy.jar", "US_export_policy.jar", "README.txt"], "loop_control": {"loop_var": "policy_item"}}, "module_options": {"src": "{{ java_path }}/{{ java_folder }}/jre/lib/security/{{ security_patch_folders[java_major_version|int] }}/{{ policy_item }}", "dest": "{{ security_patch_path }}/", "remote_src": true, "directory_mode": true, "owner": "root", "group": "root", "mode": 420}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Apply setting", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/security_policy.yml", "options": {"name": "Apply setting", "when": "java_major_version | int < 9", "become": true}, "module_options": {"path": "{{ security_patch_path }}/java.security", "regexp": "#crypto.policy=unlimited", "replace": "crypto.policy=unlimited"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system_repositories.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml", "tasks": [{"py/object": "struct4.Task", "name": "Perform repo install", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system_repositories.yml", "options": {"name": "Perform repo install", "with_first_found": ["install/{{ ansible_distribution }}_{{ ansible_distribution_version }}_{{ java_distribution }}_{{ java_major_version }}.yml", "install/{{ ansible_os_family }}_{{ java_distribution }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "system.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install requirements", "module": "package", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Install requirements", "register": "installed_packages", "retries": 10, "delay": 5, "until": "installed_packages is succeeded", "when": "transport != 'repositories'"}, "module_options": {"name": "{{ java_package_requirements\n  | union(java_extra_package_requirements) | unique }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Perform {{ java_binary_type }} install", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/system.yml", "options": {"name": "Perform {{ java_binary_type }} install", "with_first_found": ["install/{{ java_distribution }}_{{ java_binary_type }}.yml", "install/{{ java_binary_type }}.yml", "install/{{ ansible_os_family }}.yml"], "loop_control": {"loop_var": "install_task"}}, "module_options": "{{ install_task }}", "executable": "{{ install_task }}", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "RedHat.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat.yml", "options": {"name": "Install java packages", "register": "package_install", "retries": 20, "delay": 5, "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "Debian_adoptopenjdk.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add apt-key for AdoptOpenJDK", "module": "apt_key", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add apt-key for AdoptOpenJDK", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"url": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public", "state": "present"}, "executable": "apt_key", "executable_type": "Module", "fqcn": "ansible.builtin.apt_key", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "apt_repository", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"repo": "deb https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/ bionic main", "filename": "adoptopenjdk", "state": "present", "codename": "trusty", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "RedHat_adoptopenjdk.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add repository for AdoptOpenJDK", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Add repository for AdoptOpenJDK"}, "module_options": {"name": "AdoptOpenJDK", "description": "AdoptOpenJDK", "baseurl": "http://adoptopenjdk.jfrog.io/adoptopenjdk/rpm/centos/{{ rh_dist_repo_version }}/x86_64", "enabled": true, "gpgcheck": true, "gpgkey": "https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public"}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java packages", "module": "yum", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/RedHat_adoptopenjdk.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"name": "{{ (transport == \"repositories\") | ternary(jdk_package, java_artifact) }}", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "Debian.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install java packages", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Debian.yml", "options": {"name": "Install java packages", "register": "package_install", "until": "package_install is succeeded"}, "module_options": {"deb": "{{ java_artifact | default(omit, true) }}", "name": "{{ (jdk_package if transport == \"repositories\") | default(omit, true) }}", "state": "present", "update_cache": true, "cache_valid_time": 3600}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "Amazon_2_corretto_8.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "tasks": [{"py/object": "struct4.Task", "name": "Add Amazon yum repository for corretto8", "module": "yum_repository", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Add Amazon yum repository for corretto8"}, "module_options": {"name": "amazon-corretto8", "description": "Amazon Extras repo for corretto8", "mirrorlist": "http://amazonlinux.$awsregion.$awsdomain/$releasever/extras/corretto8/latest/$basearch/mirror.list", "priority": 10}, "executable": "yum_repository", "executable_type": "Module", "fqcn": "ansible.builtin.yum_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Corretto {{ java_major_version }}", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/Amazon_2_corretto_8.yml", "options": {"name": "Install Corretto {{ java_major_version }}"}, "module_options": "RedHat.yml", "executable": "RedHat.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory", "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install java {{ java_full_version }}", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/tarball.yml", "options": {"name": "Install java {{ java_full_version }}"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ java_path }}/{{ java_folder }}", "remote_src": true, "owner": "root", "group": "root", "mode": 493, "extra_opts": ["--strip-components=1"], "creates": "{{ java_path }}/{{ java_folder }}/bin/"}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm_tarball.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check that the java_folder exists", "module": "stat", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Check that the java_folder exists", "register": "java_folder_bin"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}/bin"}, "executable": "stat", "executable_type": "Module", "fqcn": "ansible.builtin.stat", "annotations": {}}, {"py/object": "struct4.Task", "name": "Mkdir for java installation", "module": "file", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Mkdir for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create temporary directory", "module": "tempfile", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Create temporary directory", "register": "temp_dir"}, "module_options": {"state": "directory"}, "executable": "tempfile", "executable_type": "Module", "fqcn": "ansible.builtin.tempfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unarchive to temporary directory", "module": "unarchive", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Unarchive to temporary directory", "register": "unarchived_folder"}, "module_options": {"src": "{{ java_artifact }}", "dest": "{{ temp_dir.path }}", "remote_src": true, "list_files": true}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "Sync from temporary directory", "module": "synchronize", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Sync from temporary directory", "delegate_to": "{{ inventory_hostname }}"}, "module_options": {"src": "{{ temp_dir.path }}/{{ unarchived_folder.files[0].split(\"/\")[0] }}/", "dest": "{{ java_path }}/{{ java_folder }}", "recursive": true, "archive": false, "checksum": true}, "executable": "synchronize", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set permissions for java installation", "module": "file", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/install/sapjvm_tarball.yml", "options": {"name": "Set permissions for java installation"}, "module_options": {"path": "{{ java_path }}/{{ java_folder }}", "recurse": true, "owner": "root", "group": "root", "mode": 493}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "openjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ openjdk_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch root page {{ openjdk_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ openjdk_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find GA release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find GA release version"}, "module_options": {"java_major_version": "{{ root_page['content']\n  | regex_findall('Ready for use:.*>JDK ([\\d]+)<')\n  | first\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Out java_major_version", "module": "debug", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Out java_major_version"}, "module_options": {"var": "java_major_version"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch GA release page", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Fetch GA release page", "register": "ga_release_page"}, "module_options": {"url": "{{ openjdk_root_page }}/{{ java_major_version }}/", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ ga_release_page['content']\n  | regex_findall('(https://download[\\.\\w]+/java/GA/jdk'\n    + java_major_version|string + '[.\\d]*/[\\d\\w]+/'\n    + '[.\\d]+/GPL/openjdk-'\n    + java_major_version|string + '[\\d._]+linux-x64_bin[\\w\\d.]+)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if OpenJDK version is not General-Availability Release", "module": "fail", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Exit if OpenJDK version is not General-Availability Release", "when": "release_url[1] is not defined"}, "module_options": {"msg": "OpenJDK version {{ java_major_version }} not GA Release"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum {{ release_url[1] }}", "module": "uri", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Get artifact checksum {{ release_url[1] }}", "register": "artifact_checksum"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/openjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum.content }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "repositories.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install {{ java_distribution }} from repositories", "module": "debug", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/repositories.yml", "options": {"name": "Install {{ java_distribution }} from repositories"}, "module_options": {"msg": "Install {{ java_distribution }} from repositories"}, "executable": "debug", "executable_type": "Module", "fqcn": "ansible.builtin.debug", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "corretto-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Corretto", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested major version for Corretto", "when": ["java_major_version|int != 8", "java_major_version|int != 11"]}, "module_options": {"msg": "Supported versions of Amazon Corretto only 8 and 11"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Corretto", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Check requested architecture for Corretto", "when": "java_arch != 'x64'"}, "module_options": {"msg": "Amazon Corretto currently supports x64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ 'https://corretto.aws/downloads/latest/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~'.'\n    ~ java_package_type\n    }}", "release_checksum": "{{ 'https://corretto.aws/downloads/latest_checksum/amazon-corretto-'\n    ~ java_major_version ~ '-' ~ java_arch ~ '-' ~ corretto_linux_distro ~ '-' ~ java_package ~ '.'\n    ~ java_package_type\n    }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/corretto-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ lookup('url', release_checksum) }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/local.yml", "options": {"name": "Copy artifact to destination", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"src": "{{ transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/web.yml", "options": {"name": "Download artifact from web", "register": "file_downloaded", "retries": 5, "delay": 2, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ transport_web }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapjvm-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch root page {{ sapjvm_root_page }}", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Fetch root page {{ sapjvm_root_page }}", "register": "root_page"}, "module_options": {"url": "{{ sapjvm_root_page }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ root_page['content']\n  | regex_findall('(additional/sapjvm-'\n    + java_major_version|string\n    + '[\\d.]+-linux-x64.zip)')\n}}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapjvm-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ sapjvm_root_page }}/{{ release_url[0] }}", "dest": "{{ java_download_path }}", "headers": {"Cookie": "eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sapmachine-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch version page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch version page", "register": "version_page"}, "module_options": {"url": "https://sap.github.io/SapMachine/latest/{{ java_major_version }}/", "return_content": true, "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release version", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find release version"}, "module_options": {"release_version": "{{ version_page.content | regex_search('(1.*[.|-]\\d)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact page", "module": "uri", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact page", "register": "artifact_page"}, "module_options": {"url": "{{ java_sapmachine_release_page }}", "status_code": [200, 404], "return_content": true, "body_format": "json"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if SapMachine version is wrong", "module": "fail", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Exit if SapMachine version is wrong", "when": "artifact_page.status == 404"}, "module_options": {"msg": "{{ 'SapMachine version ' + java_major_version|string\n        + (java_minor_version == '*') | ternary('', '.' + java_minor_version|string)\n            + '_' + java_arch|string + ' for Linux is not supported!' }}"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact and checksum link", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Get artifact and checksum link"}, "module_options": {"release_url": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".tar.gz'].browser_download_url\") }}", "checksum_link": "{{ artifact_page.json | json_query(\"assets[?name=='\" + java_sapmachine_release_name + \".sha256.txt'].browser_download_url\") }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file", "module": "uri", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Fetch artifact checksum file", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ checksum_link[0] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find artifact checksum", "module": "set_fact", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Find artifact checksum"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file.content | regex_search('(^\\w*)') }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact", "module": "get_url", "index": 7, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/sapmachine-fallback.yml", "options": {"name": "Download artifact", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ (release_url[0]|urlsplit).path|basename }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "adoptopenjdk-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch download page", "register": "download_page"}, "module_options": {"url": "{{ adoptopenjdk_api_page }}info/releases/openjdk{{ java_major_version }}?openjdk_impl={{ adoptopenjdk_impl }}&os=linux&arch=x64&release=latest&type={{ java_package }}&heap_size=normal", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Find release url"}, "module_options": {"release_url": "{{ (download_page.content | from_json).binaries | map(attribute='binary_link') | list +\n  (download_page.content | from_json).binaries | map(attribute='checksum_link') | list }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if AdoptOpenJDK version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Exit if AdoptOpenJDK version is not found", "when": "release_url[0] is not defined"}, "module_options": {"msg": "AdoptOpenJDK version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch artifact checksum file {{ release_url[1] }}", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Fetch artifact checksum file {{ release_url[1] }}", "register": "artifact_checksum_file"}, "module_options": {"url": "{{ release_url[1] }}", "return_content": true}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get artifact checksum from file {{ release_url[1] }}", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Get artifact checksum from file {{ release_url[1] }}"}, "module_options": {"artifact_checksum": "{{ artifact_checksum_file['content']\n  | regex_search('([^\\s]+)') }}", "java_downloaded_file": "{{ (release_url[0]|urlsplit).path|basename }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/adoptopenjdk-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url[0] }}", "dest": "{{ java_download_path }}/{{ java_downloaded_file }}", "checksum": "sha256:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "dragonwell8-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check requested major version for Alibaba Dragonwell", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested major version for Alibaba Dragonwell", "when": "java_major_version != 8"}, "module_options": {"msg": "Alibaba Dragonwell corresponds to OpenJDK 8 only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check requested architecture for Alibaba Dragonwell", "module": "fail", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Check requested architecture for Alibaba Dragonwell", "when": "java_arch != \"x64\""}, "module_options": {"msg": "Alibaba Dragonwell JDK currently supports Linux/x86_64 platform only"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Prepare GitHub API release tag", "module": "set_fact", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Prepare GitHub API release tag"}, "module_options": {"sub_uri": "{{ ((java_minor_version != '*')\n  | ternary('tags/v{{ java_major_version }}.{{ java_minor_version }}-GA', 'latest')) }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Fetch Dragonwell version by tag", "module": "uri", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Fetch Dragonwell version by tag", "register": "response"}, "module_options": {"url": "{{ github_api_page }}/repos/alibaba/dragonwell8/releases/{{ sub_uri }}", "return_content": true, "body_format": "json", "status_code": [200, 404]}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if Dragonwell version is not found", "module": "fail", "index": 4, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Exit if Dragonwell version is not found", "when": "response.status == 404"}, "module_options": {"msg": "Dragonwell version {{ java_major_version }}.{{ java_minor_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Get release URL", "module": "set_fact", "index": 5, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Get release URL"}, "module_options": {"release_url": "{{ response.json.assets\n    | selectattr('browser_download_url', 'match', '.*_Linux_x64\\.tar\\.gz')\n    | map(attribute='browser_download_url') | list | first }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url[0] }}", "module": "get_url", "index": 6, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/dragonwell8-fallback.yml", "options": {"name": "Download artifact from {{ release_url[0] }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "s3.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Download artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ transport_s3_bucket }}", "object": "{{ transport_s3_path }}", "dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different", "ignore_nonexistent_bucket": true}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set downloaded artifact vars", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/s3.yml", "options": {"name": "Set downloaded artifact vars"}, "module_options": {"file_downloaded": {"dest": "{{ java_download_path }}/{{ transport_s3_path | basename }}"}}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "zulu-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Fetch download page", "module": "uri", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Fetch download page", "register": "root_page"}, "module_options": {"url": "{{ zulu_api_page }}/bundles/latest/?version={{ java_major_version }}&ext=tar.gz&os=linux&arch={{ (java_arch == 'x64') | ternary('x64', 'x86') }}", "return_content": true, "follow_redirects": "all"}, "executable": "uri", "executable_type": "Module", "fqcn": "ansible.builtin.uri", "annotations": {}}, {"py/object": "struct4.Task", "name": "Find release url and artifact_checksum", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Find release url and artifact_checksum"}, "module_options": {"release_url": "{{ (root_page.content | from_json).url }}", "artifact_checksum": "{{ (root_page.content | from_json).md5_hash }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "Exit if Zulu version is not found", "module": "fail", "index": 2, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Exit if Zulu version is not found", "when": "release_url is not defined"}, "module_options": {"msg": "Zulu version {{ java_major_version }} not found"}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Download artifact from {{ release_url }}", "module": "get_url", "index": 3, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/zulu-fallback.yml", "options": {"name": "Download artifact from {{ release_url }}", "register": "file_downloaded", "retries": 20, "delay": 5, "until": "file_downloaded is succeeded"}, "module_options": {"url": "{{ release_url }}", "dest": "{{ java_download_path }}/{{ (release_url|urlsplit).path|basename }}", "checksum": "md5:{{ artifact_checksum }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-oracle_java-fallback.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from Oracle OTN", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Download security policy artifact from Oracle OTN", "register": "policy_file_downloaded", "retries": 15, "delay": 5, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ fallback_oracle_security_policy_artifacts[java_major_version|int] }}", "dest": "{{ java_download_path }}", "mode": 493, "headers": {"Cookie": "gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie; --no-check-certificate"}}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-oracle_java-fallback.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-s3.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from s3", "module": "aws_s3", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Download security policy artifact from s3", "retries": 5, "delay": 2}, "module_options": {"bucket": "{{ java_unlimited_policy_transport_s3_bucket }}", "object": "{{ java_unlimited_policy_transport_s3_path }}", "dest": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path|basename }}", "aws_access_key": "{{ transport_s3_aws_access_key }}", "aws_secret_key": "{{ transport_s3_aws_secret_key }}", "mode": "get", "overwrite": "different"}, "executable": "aws_s3", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-s3.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ java_download_path }}/{{ java_unlimited_policy_transport_s3_path\n                       | basename }}\n"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-local.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy security policy artifact to destination", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Copy security policy artifact to destination", "register": "policy_file_downloaded", "retries": 5, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"src": "{{ java_unlimited_policy_transport_local }}", "dest": "{{ java_download_path }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-local.yml", "options": {"name": "Downloaded artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "security-fetch-web.yml", "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "tasks": [{"py/object": "struct4.Task", "name": "Download security policy artifact from web", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Download security policy artifact from web", "register": "policy_file_downloaded", "retries": 3, "delay": 2, "until": "policy_file_downloaded is succeeded"}, "module_options": {"url": "{{ java_unlimited_policy_url }}", "dest": "{{ java_download_path }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Downloaded security policy artifact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/lean_delivery-java/lean_delivery.java/tasks/Linux/fetch/security-fetch/security-fetch-web.yml", "options": {"name": "Downloaded security policy artifact"}, "module_options": {"security_policy_java_artifact": "{{ policy_file_downloaded.dest }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "lean_delivery.java", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}}, "annotations": {}}