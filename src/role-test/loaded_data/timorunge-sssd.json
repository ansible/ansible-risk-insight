{"py/object": "struct4.Repository", "name": "", "path": "", "my_collection_name": "", "playbooks": [], "roles": [], "installed_collections_path": "", "installed_collections": [], "installed_roles_path": "./role-test/testdata/timorunge-sssd", "installed_roles": [{"py/object": "struct4.Role", "name": "timorunge.sssd", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd", "fqcn": "timorunge.sssd", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "install-pkgs.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install SSSD packages", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml", "options": {"name": "Install SSSD packages", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "facts.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "Set SSSD service status", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml", "options": {"name": "Set SSSD service status", "when": "not sssd_service_enabled"}, "module_options": {"sssd_service_state": "stopped"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Gather general variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather general variables"}, "module_options": "main.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Gather OS specific variables", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather OS specific variables", "vars": {"params": {"files": ["{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}.yml", "{{ ansible_os_family }}.yml"], "paths": ["vars"]}}}, "module_options": "{{ lookup('first_found', params) }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "facts.yml", "executable": "facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "not sssd_from_sources"}, "module_options": "install-pkgs.yml", "executable": "install-pkgs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "sssd_from_sources"}, "module_options": "from_sources/main.yml", "executable": "from_sources/main.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "sssd-config.yml", "executable": "sssd-config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sssd-config.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy SSSD init script", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Copy SSSD init script", "notify": ["restart sssd"], "when": "(not sssd_from_sources) and (ansible_os_family == \"RedHat\")\n"}, "module_options": {"dest": "/etc/init.d/sssd", "group": "root", "mode": 493, "owner": "root", "src": "sssd.init-{{ ansible_os_family }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Configure SSSD service (from config)", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from config)", "notify": ["restart sssd"], "when": "sssd_config_type == \"config\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "sssd.conf.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Configure SSSD service (from file)", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from file)", "notify": ["restart sssd"], "when": "sssd_config_type == \"file\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "{{ sssd_config_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Enable DNS lookup in sshd", "module": "lineinfile", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Enable DNS lookup in sshd", "notify": ["restart ssh"], "when": "sssd_manage_sshd_dns_service_lookup"}, "module_options": {"dest": "/etc/ssh/sshd_config", "regexp": "^UseDNS no", "line": "UseDNS yes", "backrefs": true}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "postinst.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "tasks": [{"py/object": "struct4.Task", "name": "Run ldconfig", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Run ldconfig", "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": "ldconfig", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Pam auth update", "module": "command", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Pam auth update", "ignore_errors": true, "register": "sssd_pam_update", "changed_when": "sssd_pam_update.rc != 0", "when": "ansible_os_family == \"Debian\"", "tags": ["skip_ansible_lint"]}, "module_options": "pam-auth-update --package", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set permissions", "module": "file", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Set permissions", "loop": "{{ sssd_postinst_set_permissions | dict2items }}", "when": "sssd_postinst_set_permissions", "tags": ["skip_ansible_lint"]}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add sss database to /etc/nsswitch.conf", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Add sss database to /etc/nsswitch.conf", "loop": "{{ sssd_add_sss_to_nss_databases | flatten(levels=1) }}"}, "module_options": {"dest": "/etc/nsswitch.conf", "regexp": "^(?={{ item }}:(.*))(?:(?!sss).)+$", "replace": "{{ item }}:\\1 sss"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "dependencies.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install SSSD build dependencies", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD build dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_build_dependency_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SSSD pip dependencies", "module": "pip", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD pip dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pip_dependency_pkgs }}", "state": "present"}, "executable": "pip", "executable_type": "Module", "fqcn": "ansible.builtin.pip", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD group", "module": "group", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD group", "when": "sssd_group not in sssd_forbidden_groups"}, "module_options": {"name": "{{ sssd_group }}", "state": "present"}, "executable": "group", "executable_type": "Module", "fqcn": "ansible.builtin.group", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD user", "module": "user", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD user", "when": "sssd_group not in sssd_forbidden_users"}, "module_options": {"create_home": false, "groups": "{{ sssd_group }}", "home": "/var/lib/sss", "name": "{{ sssd_user }}", "shell": "/usr/sbin/nologin"}, "executable": "user", "executable_type": "Module", "fqcn": "ansible.builtin.user", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create directories", "module": "file", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create directories", "loop": "{{ (sssd_dirs | combine(sssd_additional_dirs)) | dict2items }}"}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "source-facts.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "Get Debian architecture", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Get Debian architecture", "register": "sssd_dpkg_architecture_exec", "changed_when": "sssd_dpkg_architecture_exec.rc != 0", "when": "ansible_os_family == \"Debian\""}, "module_options": "dpkg-architecture -qDEB_HOST_MULTIARCH", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set dpkg architecture fact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Set dpkg architecture fact", "when": "ansible_os_family == \"Debian\""}, "module_options": {"sssd_dpkg_architecture": "{{ sssd_dpkg_architecture_exec.stdout }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "patch.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml", "tasks": [{"py/object": "struct4.Task", "name": "Patch SSSD source", "module": "patch", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml", "options": {"name": "Patch SSSD source", "loop": "{{ sssd_patches | dict2items }}", "register": "sssd_patches", "when": "sssd_patches"}, "module_options": {"dest": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/{{ item.value.dest_file }}", "src": "{{ item.value.patch_file }}", "state": "{{ item.value.state | default(present) }}"}, "executable": "patch", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "cleanup.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml", "tasks": [{"py/object": "struct4.Task", "name": "Remove not required files", "module": "file", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml", "options": {"name": "Remove not required files", "loop": "{{ sssd_files_to_remove | flatten(levels=1) }}"}, "module_options": {"path": "{{ item }}", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "config.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy SSSD defaults file", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD defaults file"}, "module_options": {"dest": "{{ sssd_environment_file }}", "group": "{{ sssd_group }}", "mode": 420, "owner": "{{ sssd_user }}", "src": "{{ sssd_environment_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD systemd configuration", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD systemd configuration", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/lib/systemd/system/sssd.service", "mode": 420, "src": "{{ sssd_service_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD init script", "module": "template", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD init script", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/etc/init.d/sssd", "mode": 493, "src": "{{ sssd_init_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy SSSD logrotate file", "module": "copy", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD logrotate file"}, "module_options": {"dest": "/etc/logrotate.d/sssd", "group": "root", "mode": 420, "owner": "root", "src": "{{ sssd_logrotate_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "prepare.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "tasks": [{"py/object": "struct4.Task", "name": "Downloading SSSD source", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Downloading SSSD source", "register": "sssd_source_download"}, "module_options": {"dest": "{{ sssd_install_dir }}/download/sssd-{{ sssd_version }}.tar.gz", "url": "{{ sssd_tarball_url }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unpacking SSSD source", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Unpacking SSSD source", "register": "sssd_source_files", "when": "sssd_source_download.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"copy": false, "dest": "{{ sssd_install_dir }}/build", "src": "{{ sssd_source_download.dest }}", "extra_opts": ["--overwrite"]}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "git init", "module": "shell", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "git init", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "creates": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/.git/config"}, "tags": ["skip_ansible_lint"]}, "module_options": "git config --global user.email \"root@$(hostname)\" && git init && git add . && git commit -m \"init sssd {{ sssd_version }}\"", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "make.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "tasks": [{"py/object": "struct4.Task", "name": "Compile SSSD", "module": "make", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Compile SSSD", "register": "sssd_compile", "when": "sssd_build.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SSSD", "module": "make", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Install SSSD", "notify": ["systemctl daemon-reload", "restart sssd"], "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "target": "install", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check for valid user- and group names", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for valid user- and group names", "when": "(sssd_user in sssd_forbidden_users) or (sssd_group in sssd_forbidden_groups)"}, "module_options": {"msg": "The user ({{ sssd_user }})- or group ({{ sssd_group }}) name is not allowed."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Gather SSSD specific patches", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Gather SSSD specific patches", "with_first_found": [{"files": ["patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ sssd_version }}.yml", "patches/{{ sssd_version }}.yml"], "skip": true}]}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "dependencies.yml", "executable": "dependencies.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "source-facts.yml", "executable": "source-facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Generate checksum catalog", "module": "template", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Generate checksum catalog"}, "module_options": {"dest": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml", "mode": 384, "src": "checksum_catalog.yml.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check for changes in checksum catalog", "module": "command", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for changes in checksum catalog", "ignore_errors": true, "register": "sssd_checksum_catalog", "changed_when": "sssd_checksum_catalog.rc != 0"}, "module_options": "diff {{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml {{ sssd_install_dir }}/ansible_checksum_catalog.yml", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "prepare.yml", "executable": "prepare.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 7, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "patch.yml", "executable": "patch.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 8, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "build.yml", "executable": "build.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 9, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "make.yml", "executable": "make.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "cleanup.yml", "executable": "cleanup.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "postinst.yml", "executable": "postinst.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 12, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "config.yml", "executable": "config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Save checksum catalog", "module": "copy", "index": 13, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Save checksum catalog", "when": "sssd_from_sources"}, "module_options": {"dest": "{{ sssd_install_dir }}/ansible_checksum_catalog.yml", "remote_src": true, "src": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "build.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "tasks": [{"py/object": "struct4.Task", "name": "Make SRPM", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Make SRPM", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "when": "((sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)) and (ansible_os_family == \"RedHat\")\n", "tags": ["skip_ansible_lint"]}, "module_options": "contrib/fedora/make_srpm.sh && yum-builddep -y rpmbuild/SRPMS/sssd-*.src.rpm", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "Build SSSD", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Build SSSD", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "register": "sssd_build", "when": "(sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)\n", "tags": ["skip_ansible_lint"]}, "module_options": "autoreconf -i -f && ./configure {{ sssd_build_options | join(' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}], "modules": [], "taskfiles": [], "version": "", "module_dict": {}, "task_dict": {"{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install SSSD packages", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml", "options": {"name": "Install SSSD packages", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Set SSSD service status", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml", "options": {"name": "Set SSSD service status", "when": "not sssd_service_enabled"}, "module_options": {"sssd_service_state": "stopped"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Gather general variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather general variables"}, "module_options": "main.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Gather OS specific variables", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather OS specific variables", "vars": {"params": {"files": ["{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}.yml", "{{ ansible_os_family }}.yml"], "paths": ["vars"]}}}, "module_options": "{{ lookup('first_found', params) }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "facts.yml", "executable": "facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "not sssd_from_sources"}, "module_options": "install-pkgs.yml", "executable": "install-pkgs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "sssd_from_sources"}, "module_options": "from_sources/main.yml", "executable": "from_sources/main.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "sssd-config.yml", "executable": "sssd-config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Copy SSSD init script", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Copy SSSD init script", "notify": ["restart sssd"], "when": "(not sssd_from_sources) and (ansible_os_family == \"RedHat\")\n"}, "module_options": {"dest": "/etc/init.d/sssd", "group": "root", "mode": 493, "owner": "root", "src": "sssd.init-{{ ansible_os_family }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Configure SSSD service (from config)", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from config)", "notify": ["restart sssd"], "when": "sssd_config_type == \"config\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "sssd.conf.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Configure SSSD service (from file)", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from file)", "notify": ["restart sssd"], "when": "sssd_config_type == \"file\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "{{ sssd_config_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Enable DNS lookup in sshd", "module": "lineinfile", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Enable DNS lookup in sshd", "notify": ["restart ssh"], "when": "sssd_manage_sshd_dns_service_lookup"}, "module_options": {"dest": "/etc/ssh/sshd_config", "regexp": "^UseDNS no", "line": "UseDNS yes", "backrefs": true}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Run ldconfig", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Run ldconfig", "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": "ldconfig", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Pam auth update", "module": "command", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Pam auth update", "ignore_errors": true, "register": "sssd_pam_update", "changed_when": "sssd_pam_update.rc != 0", "when": "ansible_os_family == \"Debian\"", "tags": ["skip_ansible_lint"]}, "module_options": "pam-auth-update --package", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Set permissions", "module": "file", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Set permissions", "loop": "{{ sssd_postinst_set_permissions | dict2items }}", "when": "sssd_postinst_set_permissions", "tags": ["skip_ansible_lint"]}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Add sss database to /etc/nsswitch.conf", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Add sss database to /etc/nsswitch.conf", "loop": "{{ sssd_add_sss_to_nss_databases | flatten(levels=1) }}"}, "module_options": {"dest": "/etc/nsswitch.conf", "regexp": "^(?={{ item }}:(.*))(?:(?!sss).)+$", "replace": "{{ item }}:\\1 sss"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Install SSSD build dependencies", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD build dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_build_dependency_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install SSSD pip dependencies", "module": "pip", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD pip dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pip_dependency_pkgs }}", "state": "present"}, "executable": "pip", "executable_type": "Module", "fqcn": "ansible.builtin.pip", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Create SSSD group", "module": "group", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD group", "when": "sssd_group not in sssd_forbidden_groups"}, "module_options": {"name": "{{ sssd_group }}", "state": "present"}, "executable": "group", "executable_type": "Module", "fqcn": "ansible.builtin.group", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Create SSSD user", "module": "user", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD user", "when": "sssd_group not in sssd_forbidden_users"}, "module_options": {"create_home": false, "groups": "{{ sssd_group }}", "home": "/var/lib/sss", "name": "{{ sssd_user }}", "shell": "/usr/sbin/nologin"}, "executable": "user", "executable_type": "Module", "fqcn": "ansible.builtin.user", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Create directories", "module": "file", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create directories", "loop": "{{ (sssd_dirs | combine(sssd_additional_dirs)) | dict2items }}"}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Get Debian architecture", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Get Debian architecture", "register": "sssd_dpkg_architecture_exec", "changed_when": "sssd_dpkg_architecture_exec.rc != 0", "when": "ansible_os_family == \"Debian\""}, "module_options": "dpkg-architecture -qDEB_HOST_MULTIARCH", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Set dpkg architecture fact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Set dpkg architecture fact", "when": "ansible_os_family == \"Debian\""}, "module_options": {"sssd_dpkg_architecture": "{{ sssd_dpkg_architecture_exec.stdout }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Patch SSSD source", "module": "patch", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml", "options": {"name": "Patch SSSD source", "loop": "{{ sssd_patches | dict2items }}", "register": "sssd_patches", "when": "sssd_patches"}, "module_options": {"dest": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/{{ item.value.dest_file }}", "src": "{{ item.value.patch_file }}", "state": "{{ item.value.state | default(present) }}"}, "executable": "patch", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Remove not required files", "module": "file", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml", "options": {"name": "Remove not required files", "loop": "{{ sssd_files_to_remove | flatten(levels=1) }}"}, "module_options": {"path": "{{ item }}", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Copy SSSD defaults file", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD defaults file"}, "module_options": {"dest": "{{ sssd_environment_file }}", "group": "{{ sssd_group }}", "mode": 420, "owner": "{{ sssd_user }}", "src": "{{ sssd_environment_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Create SSSD systemd configuration", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD systemd configuration", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/lib/systemd/system/sssd.service", "mode": 420, "src": "{{ sssd_service_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Create SSSD init script", "module": "template", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD init script", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/etc/init.d/sssd", "mode": 493, "src": "{{ sssd_init_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Copy SSSD logrotate file", "module": "copy", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD logrotate file"}, "module_options": {"dest": "/etc/logrotate.d/sssd", "group": "root", "mode": 420, "owner": "root", "src": "{{ sssd_logrotate_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Downloading SSSD source", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Downloading SSSD source", "register": "sssd_source_download"}, "module_options": {"dest": "{{ sssd_install_dir }}/download/sssd-{{ sssd_version }}.tar.gz", "url": "{{ sssd_tarball_url }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Unpacking SSSD source", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Unpacking SSSD source", "register": "sssd_source_files", "when": "sssd_source_download.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"copy": false, "dest": "{{ sssd_install_dir }}/build", "src": "{{ sssd_source_download.dest }}", "extra_opts": ["--overwrite"]}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "git init", "module": "shell", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "git init", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "creates": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/.git/config"}, "tags": ["skip_ansible_lint"]}, "module_options": "git config --global user.email \"root@$(hostname)\" && git init && git add . && git commit -m \"init sssd {{ sssd_version }}\"", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Compile SSSD", "module": "make", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Compile SSSD", "register": "sssd_compile", "when": "sssd_build.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install SSSD", "module": "make", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Install SSSD", "notify": ["systemctl daemon-reload", "restart sssd"], "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "target": "install", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Check for valid user- and group names", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for valid user- and group names", "when": "(sssd_user in sssd_forbidden_users) or (sssd_group in sssd_forbidden_groups)"}, "module_options": {"msg": "The user ({{ sssd_user }})- or group ({{ sssd_group }}) name is not allowed."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Gather SSSD specific patches", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Gather SSSD specific patches", "with_first_found": [{"files": ["patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ sssd_version }}.yml", "patches/{{ sssd_version }}.yml"], "skip": true}]}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "dependencies.yml", "executable": "dependencies.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "source-facts.yml", "executable": "source-facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Generate checksum catalog", "module": "template", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Generate checksum catalog"}, "module_options": {"dest": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml", "mode": 384, "src": "checksum_catalog.yml.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Check for changes in checksum catalog", "module": "command", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for changes in checksum catalog", "ignore_errors": true, "register": "sssd_checksum_catalog", "changed_when": "sssd_checksum_catalog.rc != 0"}, "module_options": "diff {{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml {{ sssd_install_dir }}/ansible_checksum_catalog.yml", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "prepare.yml", "executable": "prepare.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 7, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "patch.yml", "executable": "patch.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 8, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "build.yml", "executable": "build.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 9, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "make.yml", "executable": "make.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "cleanup.yml", "executable": "cleanup.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 11}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "postinst.yml", "executable": "postinst.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 12}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 12, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "config.yml", "executable": "config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml\", \"index\": 13}": {"py/object": "struct4.Task", "name": "Save checksum catalog", "module": "copy", "index": 13, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Save checksum catalog", "when": "sssd_from_sources"}, "module_options": {"dest": "{{ sssd_install_dir }}/ansible_checksum_catalog.yml", "remote_src": true, "src": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Make SRPM", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Make SRPM", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "when": "((sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)) and (ansible_os_family == \"RedHat\")\n", "tags": ["skip_ansible_lint"]}, "module_options": "contrib/fedora/make_srpm.sh && yum-builddep -y rpmbuild/SRPMS/sssd-*.src.rpm", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, "{\"path\": \"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Build SSSD", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Build SSSD", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "register": "sssd_build", "when": "(sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)\n", "tags": ["skip_ansible_lint"]}, "module_options": "autoreconf -i -f && ./configure {{ sssd_build_options | join(' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}}, "taskfile_dict": {"./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml": {"py/object": "struct4.TaskFile", "name": "install-pkgs.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install SSSD packages", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml", "options": {"name": "Install SSSD packages", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml": {"py/object": "struct4.TaskFile", "name": "facts.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "Set SSSD service status", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml", "options": {"name": "Set SSSD service status", "when": "not sssd_service_enabled"}, "module_options": {"sssd_service_state": "stopped"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Gather general variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather general variables"}, "module_options": "main.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Gather OS specific variables", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather OS specific variables", "vars": {"params": {"files": ["{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}.yml", "{{ ansible_os_family }}.yml"], "paths": ["vars"]}}}, "module_options": "{{ lookup('first_found', params) }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "facts.yml", "executable": "facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "not sssd_from_sources"}, "module_options": "install-pkgs.yml", "executable": "install-pkgs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "sssd_from_sources"}, "module_options": "from_sources/main.yml", "executable": "from_sources/main.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "sssd-config.yml", "executable": "sssd-config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml": {"py/object": "struct4.TaskFile", "name": "sssd-config.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy SSSD init script", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Copy SSSD init script", "notify": ["restart sssd"], "when": "(not sssd_from_sources) and (ansible_os_family == \"RedHat\")\n"}, "module_options": {"dest": "/etc/init.d/sssd", "group": "root", "mode": 493, "owner": "root", "src": "sssd.init-{{ ansible_os_family }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Configure SSSD service (from config)", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from config)", "notify": ["restart sssd"], "when": "sssd_config_type == \"config\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "sssd.conf.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Configure SSSD service (from file)", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from file)", "notify": ["restart sssd"], "when": "sssd_config_type == \"file\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "{{ sssd_config_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Enable DNS lookup in sshd", "module": "lineinfile", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Enable DNS lookup in sshd", "notify": ["restart ssh"], "when": "sssd_manage_sshd_dns_service_lookup"}, "module_options": {"dest": "/etc/ssh/sshd_config", "regexp": "^UseDNS no", "line": "UseDNS yes", "backrefs": true}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml": {"py/object": "struct4.TaskFile", "name": "postinst.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "tasks": [{"py/object": "struct4.Task", "name": "Run ldconfig", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Run ldconfig", "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": "ldconfig", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Pam auth update", "module": "command", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Pam auth update", "ignore_errors": true, "register": "sssd_pam_update", "changed_when": "sssd_pam_update.rc != 0", "when": "ansible_os_family == \"Debian\"", "tags": ["skip_ansible_lint"]}, "module_options": "pam-auth-update --package", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set permissions", "module": "file", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Set permissions", "loop": "{{ sssd_postinst_set_permissions | dict2items }}", "when": "sssd_postinst_set_permissions", "tags": ["skip_ansible_lint"]}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add sss database to /etc/nsswitch.conf", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Add sss database to /etc/nsswitch.conf", "loop": "{{ sssd_add_sss_to_nss_databases | flatten(levels=1) }}"}, "module_options": {"dest": "/etc/nsswitch.conf", "regexp": "^(?={{ item }}:(.*))(?:(?!sss).)+$", "replace": "{{ item }}:\\1 sss"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml": {"py/object": "struct4.TaskFile", "name": "dependencies.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install SSSD build dependencies", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD build dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_build_dependency_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SSSD pip dependencies", "module": "pip", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD pip dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pip_dependency_pkgs }}", "state": "present"}, "executable": "pip", "executable_type": "Module", "fqcn": "ansible.builtin.pip", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD group", "module": "group", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD group", "when": "sssd_group not in sssd_forbidden_groups"}, "module_options": {"name": "{{ sssd_group }}", "state": "present"}, "executable": "group", "executable_type": "Module", "fqcn": "ansible.builtin.group", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD user", "module": "user", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD user", "when": "sssd_group not in sssd_forbidden_users"}, "module_options": {"create_home": false, "groups": "{{ sssd_group }}", "home": "/var/lib/sss", "name": "{{ sssd_user }}", "shell": "/usr/sbin/nologin"}, "executable": "user", "executable_type": "Module", "fqcn": "ansible.builtin.user", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create directories", "module": "file", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create directories", "loop": "{{ (sssd_dirs | combine(sssd_additional_dirs)) | dict2items }}"}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml": {"py/object": "struct4.TaskFile", "name": "source-facts.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "Get Debian architecture", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Get Debian architecture", "register": "sssd_dpkg_architecture_exec", "changed_when": "sssd_dpkg_architecture_exec.rc != 0", "when": "ansible_os_family == \"Debian\""}, "module_options": "dpkg-architecture -qDEB_HOST_MULTIARCH", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set dpkg architecture fact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Set dpkg architecture fact", "when": "ansible_os_family == \"Debian\""}, "module_options": {"sssd_dpkg_architecture": "{{ sssd_dpkg_architecture_exec.stdout }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml": {"py/object": "struct4.TaskFile", "name": "patch.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml", "tasks": [{"py/object": "struct4.Task", "name": "Patch SSSD source", "module": "patch", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml", "options": {"name": "Patch SSSD source", "loop": "{{ sssd_patches | dict2items }}", "register": "sssd_patches", "when": "sssd_patches"}, "module_options": {"dest": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/{{ item.value.dest_file }}", "src": "{{ item.value.patch_file }}", "state": "{{ item.value.state | default(present) }}"}, "executable": "patch", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml": {"py/object": "struct4.TaskFile", "name": "cleanup.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml", "tasks": [{"py/object": "struct4.Task", "name": "Remove not required files", "module": "file", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml", "options": {"name": "Remove not required files", "loop": "{{ sssd_files_to_remove | flatten(levels=1) }}"}, "module_options": {"path": "{{ item }}", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml": {"py/object": "struct4.TaskFile", "name": "config.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy SSSD defaults file", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD defaults file"}, "module_options": {"dest": "{{ sssd_environment_file }}", "group": "{{ sssd_group }}", "mode": 420, "owner": "{{ sssd_user }}", "src": "{{ sssd_environment_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD systemd configuration", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD systemd configuration", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/lib/systemd/system/sssd.service", "mode": 420, "src": "{{ sssd_service_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD init script", "module": "template", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD init script", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/etc/init.d/sssd", "mode": 493, "src": "{{ sssd_init_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy SSSD logrotate file", "module": "copy", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD logrotate file"}, "module_options": {"dest": "/etc/logrotate.d/sssd", "group": "root", "mode": 420, "owner": "root", "src": "{{ sssd_logrotate_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml": {"py/object": "struct4.TaskFile", "name": "prepare.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "tasks": [{"py/object": "struct4.Task", "name": "Downloading SSSD source", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Downloading SSSD source", "register": "sssd_source_download"}, "module_options": {"dest": "{{ sssd_install_dir }}/download/sssd-{{ sssd_version }}.tar.gz", "url": "{{ sssd_tarball_url }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unpacking SSSD source", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Unpacking SSSD source", "register": "sssd_source_files", "when": "sssd_source_download.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"copy": false, "dest": "{{ sssd_install_dir }}/build", "src": "{{ sssd_source_download.dest }}", "extra_opts": ["--overwrite"]}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "git init", "module": "shell", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "git init", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "creates": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/.git/config"}, "tags": ["skip_ansible_lint"]}, "module_options": "git config --global user.email \"root@$(hostname)\" && git init && git add . && git commit -m \"init sssd {{ sssd_version }}\"", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml": {"py/object": "struct4.TaskFile", "name": "make.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "tasks": [{"py/object": "struct4.Task", "name": "Compile SSSD", "module": "make", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Compile SSSD", "register": "sssd_compile", "when": "sssd_build.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SSSD", "module": "make", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Install SSSD", "notify": ["systemctl daemon-reload", "restart sssd"], "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "target": "install", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check for valid user- and group names", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for valid user- and group names", "when": "(sssd_user in sssd_forbidden_users) or (sssd_group in sssd_forbidden_groups)"}, "module_options": {"msg": "The user ({{ sssd_user }})- or group ({{ sssd_group }}) name is not allowed."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Gather SSSD specific patches", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Gather SSSD specific patches", "with_first_found": [{"files": ["patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ sssd_version }}.yml", "patches/{{ sssd_version }}.yml"], "skip": true}]}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "dependencies.yml", "executable": "dependencies.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "source-facts.yml", "executable": "source-facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Generate checksum catalog", "module": "template", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Generate checksum catalog"}, "module_options": {"dest": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml", "mode": 384, "src": "checksum_catalog.yml.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check for changes in checksum catalog", "module": "command", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for changes in checksum catalog", "ignore_errors": true, "register": "sssd_checksum_catalog", "changed_when": "sssd_checksum_catalog.rc != 0"}, "module_options": "diff {{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml {{ sssd_install_dir }}/ansible_checksum_catalog.yml", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "prepare.yml", "executable": "prepare.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 7, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "patch.yml", "executable": "patch.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 8, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "build.yml", "executable": "build.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 9, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "make.yml", "executable": "make.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "cleanup.yml", "executable": "cleanup.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "postinst.yml", "executable": "postinst.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 12, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "config.yml", "executable": "config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Save checksum catalog", "module": "copy", "index": 13, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Save checksum catalog", "when": "sssd_from_sources"}, "module_options": {"dest": "{{ sssd_install_dir }}/ansible_checksum_catalog.yml", "remote_src": true, "src": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml": {"py/object": "struct4.TaskFile", "name": "build.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "tasks": [{"py/object": "struct4.Task", "name": "Make SRPM", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Make SRPM", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "when": "((sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)) and (ansible_os_family == \"RedHat\")\n", "tags": ["skip_ansible_lint"]}, "module_options": "contrib/fedora/make_srpm.sh && yum-builddep -y rpmbuild/SRPMS/sssd-*.src.rpm", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "Build SSSD", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Build SSSD", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "register": "sssd_build", "when": "(sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)\n", "tags": ["skip_ansible_lint"]}, "module_options": "autoreconf -i -f && ./configure {{ sssd_build_options | join(' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}}, "role_dict": {"timorunge.sssd": {"py/object": "struct4.Role", "name": "timorunge.sssd", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd", "fqcn": "timorunge.sssd", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "install-pkgs.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install SSSD packages", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/install-pkgs.yml", "options": {"name": "Install SSSD packages", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "facts.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "Set SSSD service status", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/facts.yml", "options": {"name": "Set SSSD service status", "when": "not sssd_service_enabled"}, "module_options": {"sssd_service_state": "stopped"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Gather general variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather general variables"}, "module_options": "main.yml", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Gather OS specific variables", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"name": "Gather OS specific variables", "vars": {"params": {"files": ["{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml", "{{ ansible_os_family }}-{{ ansible_distribution }}.yml", "{{ ansible_os_family }}.yml"], "paths": ["vars"]}}}, "module_options": "{{ lookup('first_found', params) }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "facts.yml", "executable": "facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "not sssd_from_sources"}, "module_options": "install-pkgs.yml", "executable": "install-pkgs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {"when": "sssd_from_sources"}, "module_options": "from_sources/main.yml", "executable": "from_sources/main.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/main.yml", "options": {}, "module_options": "sssd-config.yml", "executable": "sssd-config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "sssd-config.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy SSSD init script", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Copy SSSD init script", "notify": ["restart sssd"], "when": "(not sssd_from_sources) and (ansible_os_family == \"RedHat\")\n"}, "module_options": {"dest": "/etc/init.d/sssd", "group": "root", "mode": 493, "owner": "root", "src": "sssd.init-{{ ansible_os_family }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Configure SSSD service (from config)", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from config)", "notify": ["restart sssd"], "when": "sssd_config_type == \"config\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "sssd.conf.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Configure SSSD service (from file)", "module": "copy", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Configure SSSD service (from file)", "notify": ["restart sssd"], "when": "sssd_config_type == \"file\""}, "module_options": {"dest": "/etc/sssd/sssd.conf", "group": "root", "mode": 384, "owner": "root", "src": "{{ sssd_config_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Enable DNS lookup in sshd", "module": "lineinfile", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/sssd-config.yml", "options": {"name": "Enable DNS lookup in sshd", "notify": ["restart ssh"], "when": "sssd_manage_sshd_dns_service_lookup"}, "module_options": {"dest": "/etc/ssh/sshd_config", "regexp": "^UseDNS no", "line": "UseDNS yes", "backrefs": true}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "postinst.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "tasks": [{"py/object": "struct4.Task", "name": "Run ldconfig", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Run ldconfig", "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": "ldconfig", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Pam auth update", "module": "command", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Pam auth update", "ignore_errors": true, "register": "sssd_pam_update", "changed_when": "sssd_pam_update.rc != 0", "when": "ansible_os_family == \"Debian\"", "tags": ["skip_ansible_lint"]}, "module_options": "pam-auth-update --package", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set permissions", "module": "file", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Set permissions", "loop": "{{ sssd_postinst_set_permissions | dict2items }}", "when": "sssd_postinst_set_permissions", "tags": ["skip_ansible_lint"]}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Add sss database to /etc/nsswitch.conf", "module": "replace", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/postinst.yml", "options": {"name": "Add sss database to /etc/nsswitch.conf", "loop": "{{ sssd_add_sss_to_nss_databases | flatten(levels=1) }}"}, "module_options": {"dest": "/etc/nsswitch.conf", "regexp": "^(?={{ item }}:(.*))(?:(?!sss).)+$", "replace": "{{ item }}:\\1 sss"}, "executable": "replace", "executable_type": "Module", "fqcn": "ansible.builtin.replace", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "dependencies.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "tasks": [{"py/object": "struct4.Task", "name": "Install SSSD build dependencies", "module": "package", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD build dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_build_dependency_pkgs }}", "state": "present", "update_cache": "{{ omit if ((ansible_pkg_mgr == 'dnf') and (ansible_version is version('2.7', '<'))) else 'yes' }}"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SSSD pip dependencies", "module": "pip", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Install SSSD pip dependencies", "delay": 10, "register": "result", "retries": 3, "until": "result is succeeded"}, "module_options": {"name": "{{ sssd_pip_dependency_pkgs }}", "state": "present"}, "executable": "pip", "executable_type": "Module", "fqcn": "ansible.builtin.pip", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD group", "module": "group", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD group", "when": "sssd_group not in sssd_forbidden_groups"}, "module_options": {"name": "{{ sssd_group }}", "state": "present"}, "executable": "group", "executable_type": "Module", "fqcn": "ansible.builtin.group", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD user", "module": "user", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create SSSD user", "when": "sssd_group not in sssd_forbidden_users"}, "module_options": {"create_home": false, "groups": "{{ sssd_group }}", "home": "/var/lib/sss", "name": "{{ sssd_user }}", "shell": "/usr/sbin/nologin"}, "executable": "user", "executable_type": "Module", "fqcn": "ansible.builtin.user", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create directories", "module": "file", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/dependencies.yml", "options": {"name": "Create directories", "loop": "{{ (sssd_dirs | combine(sssd_additional_dirs)) | dict2items }}"}, "module_options": {"group": "{{ item.value.group }}", "mode": "{{ item.value.mode }}", "owner": "{{ item.value.owner }}", "path": "{{ item.key }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "source-facts.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "tasks": [{"py/object": "struct4.Task", "name": "Get Debian architecture", "module": "command", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Get Debian architecture", "register": "sssd_dpkg_architecture_exec", "changed_when": "sssd_dpkg_architecture_exec.rc != 0", "when": "ansible_os_family == \"Debian\""}, "module_options": "dpkg-architecture -qDEB_HOST_MULTIARCH", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "Set dpkg architecture fact", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/source-facts.yml", "options": {"name": "Set dpkg architecture fact", "when": "ansible_os_family == \"Debian\""}, "module_options": {"sssd_dpkg_architecture": "{{ sssd_dpkg_architecture_exec.stdout }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "patch.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml", "tasks": [{"py/object": "struct4.Task", "name": "Patch SSSD source", "module": "patch", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/patch.yml", "options": {"name": "Patch SSSD source", "loop": "{{ sssd_patches | dict2items }}", "register": "sssd_patches", "when": "sssd_patches"}, "module_options": {"dest": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/{{ item.value.dest_file }}", "src": "{{ item.value.patch_file }}", "state": "{{ item.value.state | default(present) }}"}, "executable": "patch", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "cleanup.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml", "tasks": [{"py/object": "struct4.Task", "name": "Remove not required files", "module": "file", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/cleanup.yml", "options": {"name": "Remove not required files", "loop": "{{ sssd_files_to_remove | flatten(levels=1) }}"}, "module_options": {"path": "{{ item }}", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "config.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "tasks": [{"py/object": "struct4.Task", "name": "Copy SSSD defaults file", "module": "copy", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD defaults file"}, "module_options": {"dest": "{{ sssd_environment_file }}", "group": "{{ sssd_group }}", "mode": 420, "owner": "{{ sssd_user }}", "src": "{{ sssd_environment_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD systemd configuration", "module": "template", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD systemd configuration", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/lib/systemd/system/sssd.service", "mode": 420, "src": "{{ sssd_service_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create SSSD init script", "module": "template", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Create SSSD init script", "notify": ["systemctl daemon-reload", "restart sssd"]}, "module_options": {"dest": "/etc/init.d/sssd", "mode": 493, "src": "{{ sssd_init_template }}"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Copy SSSD logrotate file", "module": "copy", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/config.yml", "options": {"name": "Copy SSSD logrotate file"}, "module_options": {"dest": "/etc/logrotate.d/sssd", "group": "root", "mode": 420, "owner": "root", "src": "{{ sssd_logrotate_src_file }}"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "prepare.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "tasks": [{"py/object": "struct4.Task", "name": "Downloading SSSD source", "module": "get_url", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Downloading SSSD source", "register": "sssd_source_download"}, "module_options": {"dest": "{{ sssd_install_dir }}/download/sssd-{{ sssd_version }}.tar.gz", "url": "{{ sssd_tarball_url }}"}, "executable": "get_url", "executable_type": "Module", "fqcn": "ansible.builtin.get_url", "annotations": {}}, {"py/object": "struct4.Task", "name": "Unpacking SSSD source", "module": "unarchive", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "Unpacking SSSD source", "register": "sssd_source_files", "when": "sssd_source_download.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"copy": false, "dest": "{{ sssd_install_dir }}/build", "src": "{{ sssd_source_download.dest }}", "extra_opts": ["--overwrite"]}, "executable": "unarchive", "executable_type": "Module", "fqcn": "ansible.builtin.unarchive", "annotations": {}}, {"py/object": "struct4.Task", "name": "git init", "module": "shell", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/prepare.yml", "options": {"name": "git init", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "creates": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}/.git/config"}, "tags": ["skip_ansible_lint"]}, "module_options": "git config --global user.email \"root@$(hostname)\" && git init && git add . && git commit -m \"init sssd {{ sssd_version }}\"", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "make.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "tasks": [{"py/object": "struct4.Task", "name": "Compile SSSD", "module": "make", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Compile SSSD", "register": "sssd_compile", "when": "sssd_build.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SSSD", "module": "make", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/make.yml", "options": {"name": "Install SSSD", "notify": ["systemctl daemon-reload", "restart sssd"], "when": "sssd_compile.changed", "tags": ["skip_ansible_lint"]}, "module_options": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}", "target": "install", "params": {"NUM_THREADS": "{{ sssd_build_threads }}"}}, "executable": "make", "executable_type": "Module", "fqcn": "", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Check for valid user- and group names", "module": "fail", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for valid user- and group names", "when": "(sssd_user in sssd_forbidden_users) or (sssd_group in sssd_forbidden_groups)"}, "module_options": {"msg": "The user ({{ sssd_user }})- or group ({{ sssd_group }}) name is not allowed."}, "executable": "fail", "executable_type": "Module", "fqcn": "ansible.builtin.fail", "annotations": {}}, {"py/object": "struct4.Task", "name": "Gather SSSD specific patches", "module": "include_vars", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Gather SSSD specific patches", "with_first_found": [{"files": ["patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ ansible_distribution_version }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ ansible_distribution }}-{{ sssd_version }}.yml", "patches/{{ ansible_os_family }}-{{ sssd_version }}.yml", "patches/{{ sssd_version }}.yml"], "skip": true}]}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "dependencies.yml", "executable": "dependencies.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "source-facts.yml", "executable": "source-facts.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Generate checksum catalog", "module": "template", "index": 4, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Generate checksum catalog"}, "module_options": {"dest": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml", "mode": 384, "src": "checksum_catalog.yml.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Check for changes in checksum catalog", "module": "command", "index": 5, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Check for changes in checksum catalog", "ignore_errors": true, "register": "sssd_checksum_catalog", "changed_when": "sssd_checksum_catalog.rc != 0"}, "module_options": "diff {{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml {{ sssd_install_dir }}/ansible_checksum_catalog.yml", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "prepare.yml", "executable": "prepare.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 7, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "patch.yml", "executable": "patch.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 8, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "build.yml", "executable": "build.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 9, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "make.yml", "executable": "make.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 10, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "cleanup.yml", "executable": "cleanup.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 11, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "postinst.yml", "executable": "postinst.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 12, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {}, "module_options": "config.yml", "executable": "config.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Save checksum catalog", "module": "copy", "index": 13, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/main.yml", "options": {"name": "Save checksum catalog", "when": "sssd_from_sources"}, "module_options": {"dest": "{{ sssd_install_dir }}/ansible_checksum_catalog.yml", "remote_src": true, "src": "{{ sssd_install_dir }}/tmp/ansible_checksum_catalog.yml"}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "build.yml", "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "tasks": [{"py/object": "struct4.Task", "name": "Make SRPM", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Make SRPM", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "when": "((sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)) and (ansible_os_family == \"RedHat\")\n", "tags": ["skip_ansible_lint"]}, "module_options": "contrib/fedora/make_srpm.sh && yum-builddep -y rpmbuild/SRPMS/sssd-*.src.rpm", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "Build SSSD", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/timorunge-sssd/timorunge.sssd/tasks/from_sources/build.yml", "options": {"name": "Build SSSD", "args": {"chdir": "{{ sssd_install_dir }}/build/sssd-sssd-{{ sssd_version_src_schema }}"}, "register": "sssd_build", "when": "(sssd_checksum_catalog.changed) or (sssd_source_files.changed) or (sssd_patches.changed) or (sssd_force_build)\n", "tags": ["skip_ansible_lint"]}, "module_options": "autoreconf -i -f && ./configure {{ sssd_build_options | join(' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "timorunge.sssd", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}}, "annotations": {}}