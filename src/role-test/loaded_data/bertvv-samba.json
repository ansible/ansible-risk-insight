{"py/object": "struct4.Repository", "name": "", "path": "", "my_collection_name": "", "playbooks": [], "roles": [], "installed_collections_path": "", "installed_collections": [], "installed_roles_path": "./role-test/testdata/bertvv-samba", "installed_roles": [{"py/object": "struct4.Role", "name": "bertvv.samba", "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba", "fqcn": "bertvv.samba", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Include OS specific variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Include OS specific variables", "with_first_found": ["os_{{ ansible_distribution }}.yml", "os_{{ ansible_os_family }}.yml"], "tags": "samba"}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Samba packages", "module": "package", "index": 1, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba packages", "tags": "samba"}, "module_options": {"name": "{{ samba_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Samba VFS extensions packages", "module": "package", "index": 2, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba VFS extensions packages", "when": "samba_vfs_packages is defined", "tags": "samba"}, "module_options": {"name": "{{ samba_vfs_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Register Samba version", "module": "shell", "index": 3, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Register Samba version", "register": "samba_version", "changed_when": false, "tags": "samba"}, "module_options": "smbd --version | sed 's/Version //'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SELinux package", "module": "package", "index": 4, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install SELinux package", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ samba_selinux_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Make sure SELinux boolean settings are correct", "module": "seboolean", "index": 5, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Make sure SELinux boolean settings are correct", "with_items": "{{ samba_selinux_booleans }}", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": true, "persistent": true}, "executable": "seboolean", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create Samba shares root directory", "module": "file", "index": 6, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba shares root directory", "when": "samba_shares|length > 0", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ samba_shares_root }}", "owner": "root", "group": "root", "mode": "0755"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create share directories", "module": "file", "index": 7, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create share directories", "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}", "owner": "{{ item.owner|default('root') }}", "group": "{{ item.group|default('users') }}", "mode": "{{ item.directory_mode|default('0775') }}", "setype": "{{ item.setype|default('samba_share_t') }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure webserver document root exists", "module": "file", "index": 8, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Ensure webserver document root exists", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"name": "{{ samba_www_documentroot }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create link to shares in webserver document root", "module": "file", "index": 9, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create link to shares in webserver document root", "with_items": "{{ samba_shares }}", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"state": "link", "path": "{{ samba_www_documentroot }}/{{ item.name }}", "src": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Samba configuration", "module": "template", "index": 10, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Samba configuration", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"dest": "{{ samba_configuration }}", "src": "smb.conf.j2", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install global include file", "module": "template", "index": 11, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install global include file", "when": "samba_global_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_global_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install home include file", "module": "template", "index": 12, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install home include file", "when": "samba_homes_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_homes_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install share specific include files", "module": "template", "index": 13, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install share specific include files", "when": "item.include_file is defined", "notify": ["Restart Samba services"], "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"src": "{{ item.include_file }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create username map file if needed", "module": "template", "index": 14, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create username map file if needed", "notify": ["Restart Samba services"], "when": "samba_username_map is defined", "tags": "samba"}, "module_options": {"dest": "{{ samba_username_map_file }}", "src": "smbusers.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Start Samba service(s)", "module": "service", "index": 15, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Start Samba service(s)", "with_items": "{{ samba_services }}", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": "started", "enabled": true}, "executable": "service", "executable_type": "Module", "fqcn": "ansible.builtin.service", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create Samba users if they don't exist yet", "module": "shell", "index": 16, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba users if they don't exist yet", "with_items": "{{ samba_users }}", "no_log": true, "register": "create_user_output", "changed_when": "'Added user' in create_user_output.stdout", "tags": "samba"}, "module_options": "(pdbedit --user={{ item.name }} 2>&1 > /dev/null) \\ || (echo {{ item.password }}; echo {{ item.password }}) \\ | smbpasswd -s -a {{ item.name }}\n", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "bertvv.samba", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}], "modules": [], "taskfiles": [], "version": "", "module_dict": {}, "task_dict": {"{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "Include OS specific variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Include OS specific variables", "with_first_found": ["os_{{ ansible_distribution }}.yml", "os_{{ ansible_os_family }}.yml"], "tags": "samba"}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "Install Samba packages", "module": "package", "index": 1, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba packages", "tags": "samba"}, "module_options": {"name": "{{ samba_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "Install Samba VFS extensions packages", "module": "package", "index": 2, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba VFS extensions packages", "when": "samba_vfs_packages is defined", "tags": "samba"}, "module_options": {"name": "{{ samba_vfs_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "Register Samba version", "module": "shell", "index": 3, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Register Samba version", "register": "samba_version", "changed_when": false, "tags": "samba"}, "module_options": "smbd --version | sed 's/Version //'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "Install SELinux package", "module": "package", "index": 4, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install SELinux package", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ samba_selinux_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "Make sure SELinux boolean settings are correct", "module": "seboolean", "index": 5, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Make sure SELinux boolean settings are correct", "with_items": "{{ samba_selinux_booleans }}", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": true, "persistent": true}, "executable": "seboolean", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "Create Samba shares root directory", "module": "file", "index": 6, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba shares root directory", "when": "samba_shares|length > 0", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ samba_shares_root }}", "owner": "root", "group": "root", "mode": "0755"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "Create share directories", "module": "file", "index": 7, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create share directories", "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}", "owner": "{{ item.owner|default('root') }}", "group": "{{ item.group|default('users') }}", "mode": "{{ item.directory_mode|default('0775') }}", "setype": "{{ item.setype|default('samba_share_t') }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "Ensure webserver document root exists", "module": "file", "index": 8, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Ensure webserver document root exists", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"name": "{{ samba_www_documentroot }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "Create link to shares in webserver document root", "module": "file", "index": 9, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create link to shares in webserver document root", "with_items": "{{ samba_shares }}", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"state": "link", "path": "{{ samba_www_documentroot }}/{{ item.name }}", "src": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "Samba configuration", "module": "template", "index": 10, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Samba configuration", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"dest": "{{ samba_configuration }}", "src": "smb.conf.j2", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 11}": {"py/object": "struct4.Task", "name": "Install global include file", "module": "template", "index": 11, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install global include file", "when": "samba_global_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_global_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 12}": {"py/object": "struct4.Task", "name": "Install home include file", "module": "template", "index": 12, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install home include file", "when": "samba_homes_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_homes_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 13}": {"py/object": "struct4.Task", "name": "Install share specific include files", "module": "template", "index": 13, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install share specific include files", "when": "item.include_file is defined", "notify": ["Restart Samba services"], "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"src": "{{ item.include_file }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 14}": {"py/object": "struct4.Task", "name": "Create username map file if needed", "module": "template", "index": 14, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create username map file if needed", "notify": ["Restart Samba services"], "when": "samba_username_map is defined", "tags": "samba"}, "module_options": {"dest": "{{ samba_username_map_file }}", "src": "smbusers.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 15}": {"py/object": "struct4.Task", "name": "Start Samba service(s)", "module": "service", "index": 15, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Start Samba service(s)", "with_items": "{{ samba_services }}", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": "started", "enabled": true}, "executable": "service", "executable_type": "Module", "fqcn": "ansible.builtin.service", "annotations": {}}, "{\"path\": \"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml\", \"index\": 16}": {"py/object": "struct4.Task", "name": "Create Samba users if they don't exist yet", "module": "shell", "index": 16, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba users if they don't exist yet", "with_items": "{{ samba_users }}", "no_log": true, "register": "create_user_output", "changed_when": "'Added user' in create_user_output.stdout", "tags": "samba"}, "module_options": "(pdbedit --user={{ item.name }} 2>&1 > /dev/null) \\ || (echo {{ item.password }}; echo {{ item.password }}) \\ | smbpasswd -s -a {{ item.name }}\n", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}}, "taskfile_dict": {"./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Include OS specific variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Include OS specific variables", "with_first_found": ["os_{{ ansible_distribution }}.yml", "os_{{ ansible_os_family }}.yml"], "tags": "samba"}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Samba packages", "module": "package", "index": 1, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba packages", "tags": "samba"}, "module_options": {"name": "{{ samba_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Samba VFS extensions packages", "module": "package", "index": 2, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba VFS extensions packages", "when": "samba_vfs_packages is defined", "tags": "samba"}, "module_options": {"name": "{{ samba_vfs_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Register Samba version", "module": "shell", "index": 3, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Register Samba version", "register": "samba_version", "changed_when": false, "tags": "samba"}, "module_options": "smbd --version | sed 's/Version //'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SELinux package", "module": "package", "index": 4, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install SELinux package", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ samba_selinux_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Make sure SELinux boolean settings are correct", "module": "seboolean", "index": 5, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Make sure SELinux boolean settings are correct", "with_items": "{{ samba_selinux_booleans }}", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": true, "persistent": true}, "executable": "seboolean", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create Samba shares root directory", "module": "file", "index": 6, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba shares root directory", "when": "samba_shares|length > 0", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ samba_shares_root }}", "owner": "root", "group": "root", "mode": "0755"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create share directories", "module": "file", "index": 7, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create share directories", "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}", "owner": "{{ item.owner|default('root') }}", "group": "{{ item.group|default('users') }}", "mode": "{{ item.directory_mode|default('0775') }}", "setype": "{{ item.setype|default('samba_share_t') }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure webserver document root exists", "module": "file", "index": 8, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Ensure webserver document root exists", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"name": "{{ samba_www_documentroot }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create link to shares in webserver document root", "module": "file", "index": 9, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create link to shares in webserver document root", "with_items": "{{ samba_shares }}", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"state": "link", "path": "{{ samba_www_documentroot }}/{{ item.name }}", "src": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Samba configuration", "module": "template", "index": 10, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Samba configuration", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"dest": "{{ samba_configuration }}", "src": "smb.conf.j2", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install global include file", "module": "template", "index": 11, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install global include file", "when": "samba_global_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_global_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install home include file", "module": "template", "index": 12, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install home include file", "when": "samba_homes_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_homes_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install share specific include files", "module": "template", "index": 13, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install share specific include files", "when": "item.include_file is defined", "notify": ["Restart Samba services"], "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"src": "{{ item.include_file }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create username map file if needed", "module": "template", "index": 14, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create username map file if needed", "notify": ["Restart Samba services"], "when": "samba_username_map is defined", "tags": "samba"}, "module_options": {"dest": "{{ samba_username_map_file }}", "src": "smbusers.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Start Samba service(s)", "module": "service", "index": 15, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Start Samba service(s)", "with_items": "{{ samba_services }}", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": "started", "enabled": true}, "executable": "service", "executable_type": "Module", "fqcn": "ansible.builtin.service", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create Samba users if they don't exist yet", "module": "shell", "index": 16, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba users if they don't exist yet", "with_items": "{{ samba_users }}", "no_log": true, "register": "create_user_output", "changed_when": "'Added user' in create_user_output.stdout", "tags": "samba"}, "module_options": "(pdbedit --user={{ item.name }} 2>&1 > /dev/null) \\ || (echo {{ item.password }}; echo {{ item.password }}) \\ | smbpasswd -s -a {{ item.name }}\n", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "bertvv.samba", "used_in": [], "annotations": {}}}, "role_dict": {"bertvv.samba": {"py/object": "struct4.Role", "name": "bertvv.samba", "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba", "fqcn": "bertvv.samba", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "Include OS specific variables", "module": "include_vars", "index": 0, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Include OS specific variables", "with_first_found": ["os_{{ ansible_distribution }}.yml", "os_{{ ansible_os_family }}.yml"], "tags": "samba"}, "module_options": "{{ item }}", "executable": "include_vars", "executable_type": "Module", "fqcn": "ansible.builtin.include_vars", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Samba packages", "module": "package", "index": 1, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba packages", "tags": "samba"}, "module_options": {"name": "{{ samba_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install Samba VFS extensions packages", "module": "package", "index": 2, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install Samba VFS extensions packages", "when": "samba_vfs_packages is defined", "tags": "samba"}, "module_options": {"name": "{{ samba_vfs_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Register Samba version", "module": "shell", "index": 3, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Register Samba version", "register": "samba_version", "changed_when": false, "tags": "samba"}, "module_options": "smbd --version | sed 's/Version //'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install SELinux package", "module": "package", "index": 4, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install SELinux package", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ samba_selinux_packages }}", "state": "present"}, "executable": "package", "executable_type": "Module", "fqcn": "ansible.builtin.package", "annotations": {}}, {"py/object": "struct4.Task", "name": "Make sure SELinux boolean settings are correct", "module": "seboolean", "index": 5, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Make sure SELinux boolean settings are correct", "with_items": "{{ samba_selinux_booleans }}", "when": "ansible_selinux is defined and ansible_selinux.status == 'enabled'", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": true, "persistent": true}, "executable": "seboolean", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create Samba shares root directory", "module": "file", "index": 6, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba shares root directory", "when": "samba_shares|length > 0", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ samba_shares_root }}", "owner": "root", "group": "root", "mode": "0755"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create share directories", "module": "file", "index": 7, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create share directories", "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"state": "directory", "path": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}", "owner": "{{ item.owner|default('root') }}", "group": "{{ item.group|default('users') }}", "mode": "{{ item.directory_mode|default('0775') }}", "setype": "{{ item.setype|default('samba_share_t') }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Ensure webserver document root exists", "module": "file", "index": 8, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Ensure webserver document root exists", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"name": "{{ samba_www_documentroot }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create link to shares in webserver document root", "module": "file", "index": 9, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create link to shares in webserver document root", "with_items": "{{ samba_shares }}", "when": "samba_create_varwww_symlinks|bool", "tags": "samba"}, "module_options": {"state": "link", "path": "{{ samba_www_documentroot }}/{{ item.name }}", "src": "{{ item.path|default([samba_shares_root,item.name]|join('/')) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "Samba configuration", "module": "template", "index": 10, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Samba configuration", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"dest": "{{ samba_configuration }}", "src": "smb.conf.j2", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install global include file", "module": "template", "index": 11, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install global include file", "when": "samba_global_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_global_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install home include file", "module": "template", "index": 12, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install home include file", "when": "samba_homes_include is defined", "notify": ["Restart Samba services"], "tags": "samba"}, "module_options": {"src": "{{ samba_homes_include }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Install share specific include files", "module": "template", "index": 13, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Install share specific include files", "when": "item.include_file is defined", "notify": ["Restart Samba services"], "with_items": "{{ samba_shares }}", "tags": "samba"}, "module_options": {"src": "{{ item.include_file }}", "dest": "{{ samba_configuration_dir }}", "validate": "testparm -s %s"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create username map file if needed", "module": "template", "index": 14, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create username map file if needed", "notify": ["Restart Samba services"], "when": "samba_username_map is defined", "tags": "samba"}, "module_options": {"dest": "{{ samba_username_map_file }}", "src": "smbusers.j2"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "Start Samba service(s)", "module": "service", "index": 15, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Start Samba service(s)", "with_items": "{{ samba_services }}", "tags": "samba"}, "module_options": {"name": "{{ item }}", "state": "started", "enabled": true}, "executable": "service", "executable_type": "Module", "fqcn": "ansible.builtin.service", "annotations": {}}, {"py/object": "struct4.Task", "name": "Create Samba users if they don't exist yet", "module": "shell", "index": 16, "defined_in": "./role-test/testdata/bertvv-samba/bertvv.samba/tasks/main.yml", "options": {"name": "Create Samba users if they don't exist yet", "with_items": "{{ samba_users }}", "no_log": true, "register": "create_user_output", "changed_when": "'Added user' in create_user_output.stdout", "tags": "samba"}, "module_options": "(pdbedit --user={{ item.name }} 2>&1 > /dev/null) \\ || (echo {{ item.password }}; echo {{ item.password }}) \\ | smbpasswd -s -a {{ item.name }}\n", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}], "role": "bertvv.samba", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}}, "annotations": {}}