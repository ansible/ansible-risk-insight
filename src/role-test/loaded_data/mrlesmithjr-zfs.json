{"py/object": "struct4.Repository", "name": "", "path": "", "my_collection_name": "", "playbooks": [], "roles": [], "installed_collections_path": "", "installed_collections": [], "installed_roles_path": "./role-test/testdata/mrlesmithjr-zfs", "installed_roles": [{"py/object": "struct4.Role", "name": "mrlesmithjr.zfs", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs", "fqcn": "mrlesmithjr.zfs", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "manage_zfs.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "tasks": [{"py/object": "struct4.Task", "name": "manage_zfs | checking existing zpool(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | checking existing zpool(s)", "changed_when": false, "register": "zpools", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool list | awk 'FNR >1' | awk '{print $1}'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | Gather ZPool Status", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Gather ZPool Status", "changed_when": false, "register": "zpool_devices", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool status", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | creating basic zpool(s)", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating basic zpool(s)", "register": "zpool_created", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | adding basic zpool(s)", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding basic zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | creating mirror/zraid zpool(s)", "module": "command", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "register": "zpool_created", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | adding mirror/zraid zpool(s)", "module": "command", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing pools", "module": "zfs", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing pools", "with_items": "{{ zfs_pools }}", "when": "zfs_create_pools"}, "module_options": {"name": "{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing filesystems", "module": "zfs", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing filesystems", "with_items": "{{ zfs_filesystems }}", "when": "zfs_create_filesystems"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing volumes", "module": "zfs", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing volumes", "notify": ["restart iscsitarget"], "with_items": "{{ zfs_volumes }}", "when": "zfs_create_volumes"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "volsize": "{{ item.volsize|default(omit) }}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | Setting ZFS Filesystem Permissions", "module": "file", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Setting ZFS Filesystem Permissions", "with_items": "{{ zfs_filesystems }}", "when": "zfs_manage_filesystem_permissions"}, "module_options": {"path": "{{ item.mountpoint }}", "mode": "{{ item.mode|default(omit) }}", "owner": "{{ item.owner|default(omit) }}", "group": "{{ item.group|default(omit) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi devices", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi devices", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/ietd.conf.j2", "dest": "/etc/iet/ietd.conf", "owner": "root", "group": "root", "mode": 384}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi device access", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi device access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/initiators.allow.j2", "dest": "/etc/iet/initiators.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi targets access", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi targets access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/targets.allow.j2", "dest": "/etc/iet/targets.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "ubuntu.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "tasks": [{"py/object": "struct4.Task", "name": "ubuntu | adding zfs ppa", "module": "apt_repository", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | adding zfs ppa", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"repo": "{{ zfs_ubuntu_ppa }}", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"name": "ubuntu-zfs", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "module": "apt_repository", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"repo": "deb http://us.archive.ubuntu.com/ubuntu {{ ansible_distribution_release|lower }} universe", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "module": "apt", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"name": "zfsutils-linux", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | enabling zfs module", "module": "modprobe", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing iscsitarget (if enabled)", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing iscsitarget (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | un-installing iscsitarget (if not enabled)", "module": "apt", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing iscsitarget (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring iscsitarget service", "module": "template", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing NFS (if enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | un-installing NFS (if not enabled)", "module": "apt", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring NFS Kernel Server", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring ZFS", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "module": "command", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "ignore_errors": true, "register": "auto_snapshot", "when": "zfs_enable_auto_snapshots", "changed_when": false, "failed_when": false, "check_mode": false}, "module_options": "apt-cache show zfs-auto-snapshot", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "module": "apt_repository", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "when": "zfs_enable_auto_snapshots and auto_snapshot.stderr == 'E: No packages found'\n"}, "module_options": {"repo": "ppa:bob-ziuchkovski/zfs-auto-snapshot", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Installing ZFS-Auto-Snapshot", "module": "apt", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Installing ZFS-Auto-Snapshot", "when": "zfs_enable_auto_snapshots"}, "module_options": {"name": "zfs-auto-snapshot", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "debian.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"when": "default_debian_distribution is not defined"}, "module_options": {"default_debian_distribution": "{{ ansible_distribution_release }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing pre-reqs", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing pre-reqs"}, "module_options": {"name": ["lsb-release"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | install additional packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install additional packages", "when": "backports_internal_additional_packages | length > 0"}, "module_options": {"pkg": "{{ backports_internal_additional_packages }}", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "set debian release", "module": "apt_repository", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set debian release"}, "module_options": {"repo": "deb {{ backports_internal_uri }} {{ ansible_distribution_release }}-backports {{ backports_internal_components }}", "state": "present", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "set backports", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set backports"}, "module_options": {"debian_release": "{{ default_debian_distribution + \"-backports\" }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | install zfs", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install zfs"}, "module_options": {"name": ["linux-headers-{{ ansible_kernel }}", "zfsutils-linux", "zfs-dkms"], "state": "present", "default_release": "{{ debian_release }}"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | enabling zfs module", "module": "modprobe", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing open-iscsi (if enabled)", "module": "apt", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing open-iscsi (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | un-installing open-iscsi (if not enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing open-iscsi (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring iscsitarget service", "module": "template", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing NFS (if enabled)", "module": "apt", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | un-installing NFS (if not enabled)", "module": "apt", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring NFS Kernel Server", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring ZFS", "module": "template", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "tune_zfs.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml", "tasks": [{"py/object": "struct4.Task", "name": "tune_zfs | tuning zfs performance", "module": "template", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml", "options": {"name": "tune_zfs | tuning zfs performance"}, "module_options": {"src": "etc/modprobe.d/zfs.conf.j2", "dest": "/etc/modprobe.d/zfs.conf", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "monitoring.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "tasks": [{"py/object": "struct4.Task", "name": "monitoring | scheduling zpool scrubs", "module": "cron", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling zpool scrubs", "with_items": "{{ zfs_pools }}", "when": "item.scrub_cron is not defined or item.scrub_cron.enable is undefined or (item.scrub_cron.enable is defined and item.scrub_cron.enable)"}, "module_options": {"name": "{{ item.name }} zpool scrub", "cron_file": "zpool_scrub", "user": "root", "minute": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).minute | default(zfs_pools_scrub_cron.minute) }}", "hour": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).hour | default(zfs_pools_scrub_cron.hour) }}", "day": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).day | default(zfs_pools_scrub_cron.day) }}", "month": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).month | default(zfs_pools_scrub_cron.month) }}", "weekday": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).weekday | default(zfs_pools_scrub_cron.weekday) }}", "job": "/sbin/zpool scrub {{ item.name }}"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | removing zfsutils-linux cron job", "module": "file", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | removing zfsutils-linux cron job", "when": "(zfs_pools\n  | selectattr('scrub_cron', 'defined')\n  | selectattr('scrub_cron.enable', 'defined')\n  | selectattr('scrub_cron.enable', 'equalto', False)\n  | list | length)\n< (zfs_pools | length)"}, "module_options": {"dest": "/etc/cron.d/zfsutils-linux", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | configuring ZFS monitoring", "module": "template", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | configuring ZFS monitoring"}, "module_options": {"src": "opt/zfs_health_check.sh.j2", "dest": "/opt/zfs_health_check.sh", "owner": "root", "group": "root", "mode": 484}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | scheduling ZFS monitoring", "module": "cron", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling ZFS monitoring"}, "module_options": {"name": "zpool health check", "cron_file": "zpool_health_check", "user": "root", "minute": "*/20", "job": "/opt/zfs_health_check.sh"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "samba.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "tasks": [{"py/object": "struct4.Task", "name": "samba | Installing Samba", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Installing Samba", "when": "ansible_os_family == \"Debian\""}, "module_options": {"name": "samba", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "samba | Configuring Samba", "module": "template", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Configuring Samba", "notify": "restart samba"}, "module_options": {"src": "etc/samba/smb.conf.j2", "dest": "/etc/samba/smb.conf"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_install_update is undefined"}, "module_options": {"zfs_install_update": true}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Debian\" and zfs_install_update == true"}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Ubuntu\" and zfs_install_update == true"}, "module_options": "ubuntu.yml", "executable": "ubuntu.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {}, "module_options": "manage_zfs.yml", "executable": "manage_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_samba"}, "module_options": "samba.yml", "executable": "samba.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_performance_tuning is defined and zfs_enable_performance_tuning\n"}, "module_options": "tune_zfs.yml", "executable": "tune_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_monitoring"}, "module_options": "monitoring.yml", "executable": "monitoring.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}], "modules": [], "taskfiles": [], "version": "", "module_dict": {}, "task_dict": {"{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "manage_zfs | checking existing zpool(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | checking existing zpool(s)", "changed_when": false, "register": "zpools", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool list | awk 'FNR >1' | awk '{print $1}'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "manage_zfs | Gather ZPool Status", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Gather ZPool Status", "changed_when": false, "register": "zpool_devices", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool status", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "manage_zfs | creating basic zpool(s)", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating basic zpool(s)", "register": "zpool_created", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "manage_zfs | adding basic zpool(s)", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding basic zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "manage_zfs | creating mirror/zraid zpool(s)", "module": "command", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "register": "zpool_created", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "manage_zfs | adding mirror/zraid zpool(s)", "module": "command", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "manage_zfs | managing pools", "module": "zfs", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing pools", "with_items": "{{ zfs_pools }}", "when": "zfs_create_pools"}, "module_options": {"name": "{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "manage_zfs | managing filesystems", "module": "zfs", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing filesystems", "with_items": "{{ zfs_filesystems }}", "when": "zfs_create_filesystems"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "manage_zfs | managing volumes", "module": "zfs", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing volumes", "notify": ["restart iscsitarget"], "with_items": "{{ zfs_volumes }}", "when": "zfs_create_volumes"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "volsize": "{{ item.volsize|default(omit) }}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "manage_zfs | Setting ZFS Filesystem Permissions", "module": "file", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Setting ZFS Filesystem Permissions", "with_items": "{{ zfs_filesystems }}", "when": "zfs_manage_filesystem_permissions"}, "module_options": {"path": "{{ item.mountpoint }}", "mode": "{{ item.mode|default(omit) }}", "owner": "{{ item.owner|default(omit) }}", "group": "{{ item.group|default(omit) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi devices", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi devices", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/ietd.conf.j2", "dest": "/etc/iet/ietd.conf", "owner": "root", "group": "root", "mode": 384}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 11}": {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi device access", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi device access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/initiators.allow.j2", "dest": "/etc/iet/initiators.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml\", \"index\": 12}": {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi targets access", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi targets access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/targets.allow.j2", "dest": "/etc/iet/targets.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "ubuntu | adding zfs ppa", "module": "apt_repository", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | adding zfs ppa", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"repo": "{{ zfs_ubuntu_ppa }}", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"name": "ubuntu-zfs", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "module": "apt_repository", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"repo": "deb http://us.archive.ubuntu.com/ubuntu {{ ansible_distribution_release|lower }} universe", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "module": "apt", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"name": "zfsutils-linux", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "ubuntu | enabling zfs module", "module": "modprobe", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "ubuntu | installing iscsitarget (if enabled)", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing iscsitarget (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "ubuntu | un-installing iscsitarget (if not enabled)", "module": "apt", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing iscsitarget (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "ubuntu | configuring iscsitarget service", "module": "template", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "ubuntu | installing NFS (if enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "ubuntu | un-installing NFS (if not enabled)", "module": "apt", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "ubuntu | configuring NFS Kernel Server", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 11}": {"py/object": "struct4.Task", "name": "ubuntu | configuring ZFS", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 12}": {"py/object": "struct4.Task", "name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "module": "command", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "ignore_errors": true, "register": "auto_snapshot", "when": "zfs_enable_auto_snapshots", "changed_when": false, "failed_when": false, "check_mode": false}, "module_options": "apt-cache show zfs-auto-snapshot", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 13}": {"py/object": "struct4.Task", "name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "module": "apt_repository", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "when": "zfs_enable_auto_snapshots and auto_snapshot.stderr == 'E: No packages found'\n"}, "module_options": {"repo": "ppa:bob-ziuchkovski/zfs-auto-snapshot", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml\", \"index\": 14}": {"py/object": "struct4.Task", "name": "ubuntu | Installing ZFS-Auto-Snapshot", "module": "apt", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Installing ZFS-Auto-Snapshot", "when": "zfs_enable_auto_snapshots"}, "module_options": {"name": "zfs-auto-snapshot", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"when": "default_debian_distribution is not defined"}, "module_options": {"default_debian_distribution": "{{ ansible_distribution_release }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "debian | installing pre-reqs", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing pre-reqs"}, "module_options": {"name": ["lsb-release"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "debian | install additional packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install additional packages", "when": "backports_internal_additional_packages | length > 0"}, "module_options": {"pkg": "{{ backports_internal_additional_packages }}", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "set debian release", "module": "apt_repository", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set debian release"}, "module_options": {"repo": "deb {{ backports_internal_uri }} {{ ansible_distribution_release }}-backports {{ backports_internal_components }}", "state": "present", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "set backports", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set backports"}, "module_options": {"debian_release": "{{ default_debian_distribution + \"-backports\" }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "debian | install zfs", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install zfs"}, "module_options": {"name": ["linux-headers-{{ ansible_kernel }}", "zfsutils-linux", "zfs-dkms"], "state": "present", "default_release": "{{ debian_release }}"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "debian | enabling zfs module", "module": "modprobe", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "debian | installing open-iscsi (if enabled)", "module": "apt", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing open-iscsi (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "debian | un-installing open-iscsi (if not enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing open-iscsi (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "debian | configuring iscsitarget service", "module": "template", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "debian | installing NFS (if enabled)", "module": "apt", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 11}": {"py/object": "struct4.Task", "name": "debian | un-installing NFS (if not enabled)", "module": "apt", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 12}": {"py/object": "struct4.Task", "name": "debian | configuring NFS Kernel Server", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml\", \"index\": 13}": {"py/object": "struct4.Task", "name": "debian | configuring ZFS", "module": "template", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "tune_zfs | tuning zfs performance", "module": "template", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml", "options": {"name": "tune_zfs | tuning zfs performance"}, "module_options": {"src": "etc/modprobe.d/zfs.conf.j2", "dest": "/etc/modprobe.d/zfs.conf", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "monitoring | scheduling zpool scrubs", "module": "cron", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling zpool scrubs", "with_items": "{{ zfs_pools }}", "when": "item.scrub_cron is not defined or item.scrub_cron.enable is undefined or (item.scrub_cron.enable is defined and item.scrub_cron.enable)"}, "module_options": {"name": "{{ item.name }} zpool scrub", "cron_file": "zpool_scrub", "user": "root", "minute": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).minute | default(zfs_pools_scrub_cron.minute) }}", "hour": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).hour | default(zfs_pools_scrub_cron.hour) }}", "day": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).day | default(zfs_pools_scrub_cron.day) }}", "month": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).month | default(zfs_pools_scrub_cron.month) }}", "weekday": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).weekday | default(zfs_pools_scrub_cron.weekday) }}", "job": "/sbin/zpool scrub {{ item.name }}"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "monitoring | removing zfsutils-linux cron job", "module": "file", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | removing zfsutils-linux cron job", "when": "(zfs_pools\n  | selectattr('scrub_cron', 'defined')\n  | selectattr('scrub_cron.enable', 'defined')\n  | selectattr('scrub_cron.enable', 'equalto', False)\n  | list | length)\n< (zfs_pools | length)"}, "module_options": {"dest": "/etc/cron.d/zfsutils-linux", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "monitoring | configuring ZFS monitoring", "module": "template", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | configuring ZFS monitoring"}, "module_options": {"src": "opt/zfs_health_check.sh.j2", "dest": "/opt/zfs_health_check.sh", "owner": "root", "group": "root", "mode": 484}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "monitoring | scheduling ZFS monitoring", "module": "cron", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling ZFS monitoring"}, "module_options": {"name": "zpool health check", "cron_file": "zpool_health_check", "user": "root", "minute": "*/20", "job": "/opt/zfs_health_check.sh"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "samba | Installing Samba", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Installing Samba", "when": "ansible_os_family == \"Debian\""}, "module_options": {"name": "samba", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "samba | Configuring Samba", "module": "template", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Configuring Samba", "notify": "restart samba"}, "module_options": {"src": "etc/samba/smb.conf.j2", "dest": "/etc/samba/smb.conf"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_install_update is undefined"}, "module_options": {"zfs_install_update": true}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Debian\" and zfs_install_update == true"}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Ubuntu\" and zfs_install_update == true"}, "module_options": "ubuntu.yml", "executable": "ubuntu.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {}, "module_options": "manage_zfs.yml", "executable": "manage_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_samba"}, "module_options": "samba.yml", "executable": "samba.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_performance_tuning is defined and zfs_enable_performance_tuning\n"}, "module_options": "tune_zfs.yml", "executable": "tune_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_monitoring"}, "module_options": "monitoring.yml", "executable": "monitoring.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}}, "taskfile_dict": {"./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml": {"py/object": "struct4.TaskFile", "name": "manage_zfs.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "tasks": [{"py/object": "struct4.Task", "name": "manage_zfs | checking existing zpool(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | checking existing zpool(s)", "changed_when": false, "register": "zpools", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool list | awk 'FNR >1' | awk '{print $1}'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | Gather ZPool Status", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Gather ZPool Status", "changed_when": false, "register": "zpool_devices", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool status", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | creating basic zpool(s)", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating basic zpool(s)", "register": "zpool_created", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | adding basic zpool(s)", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding basic zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | creating mirror/zraid zpool(s)", "module": "command", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "register": "zpool_created", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | adding mirror/zraid zpool(s)", "module": "command", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing pools", "module": "zfs", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing pools", "with_items": "{{ zfs_pools }}", "when": "zfs_create_pools"}, "module_options": {"name": "{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing filesystems", "module": "zfs", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing filesystems", "with_items": "{{ zfs_filesystems }}", "when": "zfs_create_filesystems"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing volumes", "module": "zfs", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing volumes", "notify": ["restart iscsitarget"], "with_items": "{{ zfs_volumes }}", "when": "zfs_create_volumes"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "volsize": "{{ item.volsize|default(omit) }}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | Setting ZFS Filesystem Permissions", "module": "file", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Setting ZFS Filesystem Permissions", "with_items": "{{ zfs_filesystems }}", "when": "zfs_manage_filesystem_permissions"}, "module_options": {"path": "{{ item.mountpoint }}", "mode": "{{ item.mode|default(omit) }}", "owner": "{{ item.owner|default(omit) }}", "group": "{{ item.group|default(omit) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi devices", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi devices", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/ietd.conf.j2", "dest": "/etc/iet/ietd.conf", "owner": "root", "group": "root", "mode": 384}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi device access", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi device access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/initiators.allow.j2", "dest": "/etc/iet/initiators.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi targets access", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi targets access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/targets.allow.j2", "dest": "/etc/iet/targets.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml": {"py/object": "struct4.TaskFile", "name": "ubuntu.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "tasks": [{"py/object": "struct4.Task", "name": "ubuntu | adding zfs ppa", "module": "apt_repository", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | adding zfs ppa", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"repo": "{{ zfs_ubuntu_ppa }}", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"name": "ubuntu-zfs", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "module": "apt_repository", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"repo": "deb http://us.archive.ubuntu.com/ubuntu {{ ansible_distribution_release|lower }} universe", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "module": "apt", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"name": "zfsutils-linux", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | enabling zfs module", "module": "modprobe", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing iscsitarget (if enabled)", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing iscsitarget (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | un-installing iscsitarget (if not enabled)", "module": "apt", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing iscsitarget (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring iscsitarget service", "module": "template", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing NFS (if enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | un-installing NFS (if not enabled)", "module": "apt", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring NFS Kernel Server", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring ZFS", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "module": "command", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "ignore_errors": true, "register": "auto_snapshot", "when": "zfs_enable_auto_snapshots", "changed_when": false, "failed_when": false, "check_mode": false}, "module_options": "apt-cache show zfs-auto-snapshot", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "module": "apt_repository", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "when": "zfs_enable_auto_snapshots and auto_snapshot.stderr == 'E: No packages found'\n"}, "module_options": {"repo": "ppa:bob-ziuchkovski/zfs-auto-snapshot", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Installing ZFS-Auto-Snapshot", "module": "apt", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Installing ZFS-Auto-Snapshot", "when": "zfs_enable_auto_snapshots"}, "module_options": {"name": "zfs-auto-snapshot", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml": {"py/object": "struct4.TaskFile", "name": "debian.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"when": "default_debian_distribution is not defined"}, "module_options": {"default_debian_distribution": "{{ ansible_distribution_release }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing pre-reqs", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing pre-reqs"}, "module_options": {"name": ["lsb-release"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | install additional packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install additional packages", "when": "backports_internal_additional_packages | length > 0"}, "module_options": {"pkg": "{{ backports_internal_additional_packages }}", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "set debian release", "module": "apt_repository", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set debian release"}, "module_options": {"repo": "deb {{ backports_internal_uri }} {{ ansible_distribution_release }}-backports {{ backports_internal_components }}", "state": "present", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "set backports", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set backports"}, "module_options": {"debian_release": "{{ default_debian_distribution + \"-backports\" }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | install zfs", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install zfs"}, "module_options": {"name": ["linux-headers-{{ ansible_kernel }}", "zfsutils-linux", "zfs-dkms"], "state": "present", "default_release": "{{ debian_release }}"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | enabling zfs module", "module": "modprobe", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing open-iscsi (if enabled)", "module": "apt", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing open-iscsi (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | un-installing open-iscsi (if not enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing open-iscsi (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring iscsitarget service", "module": "template", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing NFS (if enabled)", "module": "apt", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | un-installing NFS (if not enabled)", "module": "apt", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring NFS Kernel Server", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring ZFS", "module": "template", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml": {"py/object": "struct4.TaskFile", "name": "tune_zfs.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml", "tasks": [{"py/object": "struct4.Task", "name": "tune_zfs | tuning zfs performance", "module": "template", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml", "options": {"name": "tune_zfs | tuning zfs performance"}, "module_options": {"src": "etc/modprobe.d/zfs.conf.j2", "dest": "/etc/modprobe.d/zfs.conf", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml": {"py/object": "struct4.TaskFile", "name": "monitoring.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "tasks": [{"py/object": "struct4.Task", "name": "monitoring | scheduling zpool scrubs", "module": "cron", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling zpool scrubs", "with_items": "{{ zfs_pools }}", "when": "item.scrub_cron is not defined or item.scrub_cron.enable is undefined or (item.scrub_cron.enable is defined and item.scrub_cron.enable)"}, "module_options": {"name": "{{ item.name }} zpool scrub", "cron_file": "zpool_scrub", "user": "root", "minute": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).minute | default(zfs_pools_scrub_cron.minute) }}", "hour": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).hour | default(zfs_pools_scrub_cron.hour) }}", "day": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).day | default(zfs_pools_scrub_cron.day) }}", "month": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).month | default(zfs_pools_scrub_cron.month) }}", "weekday": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).weekday | default(zfs_pools_scrub_cron.weekday) }}", "job": "/sbin/zpool scrub {{ item.name }}"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | removing zfsutils-linux cron job", "module": "file", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | removing zfsutils-linux cron job", "when": "(zfs_pools\n  | selectattr('scrub_cron', 'defined')\n  | selectattr('scrub_cron.enable', 'defined')\n  | selectattr('scrub_cron.enable', 'equalto', False)\n  | list | length)\n< (zfs_pools | length)"}, "module_options": {"dest": "/etc/cron.d/zfsutils-linux", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | configuring ZFS monitoring", "module": "template", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | configuring ZFS monitoring"}, "module_options": {"src": "opt/zfs_health_check.sh.j2", "dest": "/opt/zfs_health_check.sh", "owner": "root", "group": "root", "mode": 484}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | scheduling ZFS monitoring", "module": "cron", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling ZFS monitoring"}, "module_options": {"name": "zpool health check", "cron_file": "zpool_health_check", "user": "root", "minute": "*/20", "job": "/opt/zfs_health_check.sh"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml": {"py/object": "struct4.TaskFile", "name": "samba.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "tasks": [{"py/object": "struct4.Task", "name": "samba | Installing Samba", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Installing Samba", "when": "ansible_os_family == \"Debian\""}, "module_options": {"name": "samba", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "samba | Configuring Samba", "module": "template", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Configuring Samba", "notify": "restart samba"}, "module_options": {"src": "etc/samba/smb.conf.j2", "dest": "/etc/samba/smb.conf"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_install_update is undefined"}, "module_options": {"zfs_install_update": true}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Debian\" and zfs_install_update == true"}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Ubuntu\" and zfs_install_update == true"}, "module_options": "ubuntu.yml", "executable": "ubuntu.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {}, "module_options": "manage_zfs.yml", "executable": "manage_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_samba"}, "module_options": "samba.yml", "executable": "samba.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_performance_tuning is defined and zfs_enable_performance_tuning\n"}, "module_options": "tune_zfs.yml", "executable": "tune_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_monitoring"}, "module_options": "monitoring.yml", "executable": "monitoring.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}}, "role_dict": {"mrlesmithjr.zfs": {"py/object": "struct4.Role", "name": "mrlesmithjr.zfs", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs", "fqcn": "mrlesmithjr.zfs", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "manage_zfs.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "tasks": [{"py/object": "struct4.Task", "name": "manage_zfs | checking existing zpool(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | checking existing zpool(s)", "changed_when": false, "register": "zpools", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool list | awk 'FNR >1' | awk '{print $1}'", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | Gather ZPool Status", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Gather ZPool Status", "changed_when": false, "register": "zpool_devices", "check_mode": false, "when": "zfs_pools is defined"}, "module_options": "zpool status", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | creating basic zpool(s)", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating basic zpool(s)", "register": "zpool_created", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | adding basic zpool(s)", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding basic zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type == \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | creating mirror/zraid zpool(s)", "module": "command", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | creating mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "register": "zpool_created", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.name not in zpools.stdout and item.state == \"present\") and item.devices[0] not in zpool_devices.stdout and item.action|lower == \"create\"\n"}, "module_options": "zpool create {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | adding mirror/zraid zpool(s)", "module": "command", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | adding mirror/zraid zpool(s)", "with_items": "{{ zfs_pools }}", "when": "zfs_pools is defined and zfs_create_pools and (item.type != \"basic\" and item.state == \"present\") and (item.devices[0]|basename) not in zpool_devices.stdout and item.action|lower == \"add\" and (zpool_created.changed or item.name in zpools.stdout)\n"}, "module_options": "zpool add {{ item.options | join (' ') if item.options is defined else '' }} {{ item.name }} {{ item.type }} {{ item.devices|join (' ') }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing pools", "module": "zfs", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing pools", "with_items": "{{ zfs_pools }}", "when": "zfs_create_pools"}, "module_options": {"name": "{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing filesystems", "module": "zfs", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing filesystems", "with_items": "{{ zfs_filesystems }}", "when": "zfs_create_filesystems"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"atime": "{{ item.atime|default(omit) }}", "compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "mountpoint": "{{ item.mountpoint|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sharenfs": "{{ item.sharenfs|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "snapdev": "{{ item.snapdev|default('hidden')}}", "snapdir": "{{ item.snapdir|default('hidden')}}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | managing volumes", "module": "zfs", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | managing volumes", "notify": ["restart iscsitarget"], "with_items": "{{ zfs_volumes }}", "when": "zfs_create_volumes"}, "module_options": {"name": "{{ item.pool }}/{{ item.name }}", "extra_zfs_properties": {"compression": "{{ item.compression|default(omit) }}", "dedup": "{{ item.dedup|default(omit) }}", "quota": "{{ item.quota|default(omit) }}", "primarycache": "{{ item.primarycache|default(omit) }}", "recordsize": "{{ item.recordsize|default(omit) }}", "sync": "{{ item.sync|default(omit) }}", "logbias": "{{ item.logbias|default(omit) }}", "volsize": "{{ item.volsize|default(omit) }}"}, "state": "{{ item.state }}"}, "executable": "zfs", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | Setting ZFS Filesystem Permissions", "module": "file", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | Setting ZFS Filesystem Permissions", "with_items": "{{ zfs_filesystems }}", "when": "zfs_manage_filesystem_permissions"}, "module_options": {"path": "{{ item.mountpoint }}", "mode": "{{ item.mode|default(omit) }}", "owner": "{{ item.owner|default(omit) }}", "group": "{{ item.group|default(omit) }}"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi devices", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi devices", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/ietd.conf.j2", "dest": "/etc/iet/ietd.conf", "owner": "root", "group": "root", "mode": 384}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi device access", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi device access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/initiators.allow.j2", "dest": "/etc/iet/initiators.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "manage_zfs | configuring iscsi targets access", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/manage_zfs.yml", "options": {"name": "manage_zfs | configuring iscsi targets access", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/iet/targets.allow.j2", "dest": "/etc/iet/targets.allow", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "ubuntu.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "tasks": [{"py/object": "struct4.Task", "name": "ubuntu | adding zfs ppa", "module": "apt_repository", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | adding zfs ppa", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"repo": "{{ zfs_ubuntu_ppa }}", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} <= 14.04)", "when": "ansible_distribution_version <= '14.04'\n"}, "module_options": {"name": "ubuntu-zfs", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "module": "apt_repository", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | ensuring Ubuntu universe repo is enabled ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"repo": "deb http://us.archive.ubuntu.com/ubuntu {{ ansible_distribution_release|lower }} universe", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "module": "apt", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing zfs ({{ ansible_distribution_version }} >= 16.04)", "when": "ansible_distribution_version >= '16.04'\n"}, "module_options": {"name": "zfsutils-linux", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | enabling zfs module", "module": "modprobe", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing iscsitarget (if enabled)", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing iscsitarget (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | un-installing iscsitarget (if not enabled)", "module": "apt", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing iscsitarget (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["iscsitarget", "iscsitarget-dkms"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring iscsitarget service", "module": "template", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | installing NFS (if enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | un-installing NFS (if not enabled)", "module": "apt", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring NFS Kernel Server", "module": "template", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | configuring ZFS", "module": "template", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "module": "command", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Checking for ZFS-Auto-Snapshot package from the distribution", "ignore_errors": true, "register": "auto_snapshot", "when": "zfs_enable_auto_snapshots", "changed_when": false, "failed_when": false, "check_mode": false}, "module_options": "apt-cache show zfs-auto-snapshot", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "module": "apt_repository", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Adding ZFS-Auto-Snapshot Repo", "when": "zfs_enable_auto_snapshots and auto_snapshot.stderr == 'E: No packages found'\n"}, "module_options": {"repo": "ppa:bob-ziuchkovski/zfs-auto-snapshot", "state": "present"}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "ubuntu | Installing ZFS-Auto-Snapshot", "module": "apt", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/ubuntu.yml", "options": {"name": "ubuntu | Installing ZFS-Auto-Snapshot", "when": "zfs_enable_auto_snapshots"}, "module_options": {"name": "zfs-auto-snapshot", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "debian.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"when": "default_debian_distribution is not defined"}, "module_options": {"default_debian_distribution": "{{ ansible_distribution_release }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing pre-reqs", "module": "apt", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing pre-reqs"}, "module_options": {"name": ["lsb-release"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | install additional packages", "module": "apt", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install additional packages", "when": "backports_internal_additional_packages | length > 0"}, "module_options": {"pkg": "{{ backports_internal_additional_packages }}", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "set debian release", "module": "apt_repository", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set debian release"}, "module_options": {"repo": "deb {{ backports_internal_uri }} {{ ansible_distribution_release }}-backports {{ backports_internal_components }}", "state": "present", "update_cache": true}, "executable": "apt_repository", "executable_type": "Module", "fqcn": "ansible.builtin.apt_repository", "annotations": {}}, {"py/object": "struct4.Task", "name": "set backports", "module": "set_fact", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "set backports"}, "module_options": {"debian_release": "{{ default_debian_distribution + \"-backports\" }}"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | install zfs", "module": "apt", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | install zfs"}, "module_options": {"name": ["linux-headers-{{ ansible_kernel }}", "zfsutils-linux", "zfs-dkms"], "state": "present", "default_release": "{{ debian_release }}"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | enabling zfs module", "module": "modprobe", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | enabling zfs module"}, "module_options": {"name": "zfs", "state": "present"}, "executable": "modprobe", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing open-iscsi (if enabled)", "module": "apt", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing open-iscsi (if enabled)", "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | un-installing open-iscsi (if not enabled)", "module": "apt", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing open-iscsi (if not enabled)", "when": "zfs_enable_iscsi is defined and not zfs_enable_iscsi\n"}, "module_options": {"name": ["open-iscsi"], "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring iscsitarget service", "module": "template", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring iscsitarget service", "notify": ["restart iscsitarget"], "when": "zfs_enable_iscsi is defined and zfs_enable_iscsi\n"}, "module_options": {"src": "etc/default/iscsitarget.j2", "dest": "/etc/default/iscsitarget", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | installing NFS (if enabled)", "module": "apt", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | installing NFS (if enabled)", "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | un-installing NFS (if not enabled)", "module": "apt", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | un-installing NFS (if not enabled)", "when": "zfs_enable_nfs is defined and not zfs_enable_nfs\n"}, "module_options": {"name": "nfs-kernel-server", "state": "absent"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring NFS Kernel Server", "module": "template", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring NFS Kernel Server", "notify": ["restart nfs-kernel-server", "start zfs-share"], "when": "zfs_enable_nfs is defined and zfs_enable_nfs\n"}, "module_options": {"src": "etc/exports.j2", "dest": "/etc/exports", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "debian | configuring ZFS", "module": "template", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/debian.yml", "options": {"name": "debian | configuring ZFS", "notify": ["start zfs-share"]}, "module_options": {"src": "etc/default/zfs.j2", "dest": "/etc/default/zfs", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "tune_zfs.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml", "tasks": [{"py/object": "struct4.Task", "name": "tune_zfs | tuning zfs performance", "module": "template", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/tune_zfs.yml", "options": {"name": "tune_zfs | tuning zfs performance"}, "module_options": {"src": "etc/modprobe.d/zfs.conf.j2", "dest": "/etc/modprobe.d/zfs.conf", "owner": "root", "group": "root", "mode": 420}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "monitoring.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "tasks": [{"py/object": "struct4.Task", "name": "monitoring | scheduling zpool scrubs", "module": "cron", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling zpool scrubs", "with_items": "{{ zfs_pools }}", "when": "item.scrub_cron is not defined or item.scrub_cron.enable is undefined or (item.scrub_cron.enable is defined and item.scrub_cron.enable)"}, "module_options": {"name": "{{ item.name }} zpool scrub", "cron_file": "zpool_scrub", "user": "root", "minute": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).minute | default(zfs_pools_scrub_cron.minute) }}", "hour": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).hour | default(zfs_pools_scrub_cron.hour) }}", "day": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).day | default(zfs_pools_scrub_cron.day) }}", "month": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).month | default(zfs_pools_scrub_cron.month) }}", "weekday": "{{ (item.scrub_cron | default(zfs_pools_scrub_cron)).weekday | default(zfs_pools_scrub_cron.weekday) }}", "job": "/sbin/zpool scrub {{ item.name }}"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | removing zfsutils-linux cron job", "module": "file", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | removing zfsutils-linux cron job", "when": "(zfs_pools\n  | selectattr('scrub_cron', 'defined')\n  | selectattr('scrub_cron.enable', 'defined')\n  | selectattr('scrub_cron.enable', 'equalto', False)\n  | list | length)\n< (zfs_pools | length)"}, "module_options": {"dest": "/etc/cron.d/zfsutils-linux", "state": "absent"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | configuring ZFS monitoring", "module": "template", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | configuring ZFS monitoring"}, "module_options": {"src": "opt/zfs_health_check.sh.j2", "dest": "/opt/zfs_health_check.sh", "owner": "root", "group": "root", "mode": 484}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}, {"py/object": "struct4.Task", "name": "monitoring | scheduling ZFS monitoring", "module": "cron", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/monitoring.yml", "options": {"name": "monitoring | scheduling ZFS monitoring"}, "module_options": {"name": "zpool health check", "cron_file": "zpool_health_check", "user": "root", "minute": "*/20", "job": "/opt/zfs_health_check.sh"}, "executable": "cron", "executable_type": "Module", "fqcn": "ansible.builtin.cron", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "samba.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "tasks": [{"py/object": "struct4.Task", "name": "samba | Installing Samba", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Installing Samba", "when": "ansible_os_family == \"Debian\""}, "module_options": {"name": "samba", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "samba | Configuring Samba", "module": "template", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/samba.yml", "options": {"name": "samba | Configuring Samba", "notify": "restart samba"}, "module_options": {"src": "etc/samba/smb.conf.j2", "dest": "/etc/samba/smb.conf"}, "executable": "template", "executable_type": "Module", "fqcn": "ansible.builtin.template", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "set_fact", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_install_update is undefined"}, "module_options": {"zfs_install_update": true}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Debian\" and zfs_install_update == true"}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "ansible_distribution == \"Ubuntu\" and zfs_install_update == true"}, "module_options": "ubuntu.yml", "executable": "ubuntu.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {}, "module_options": "manage_zfs.yml", "executable": "manage_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_samba"}, "module_options": "samba.yml", "executable": "samba.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_performance_tuning is defined and zfs_enable_performance_tuning\n"}, "module_options": "tune_zfs.yml", "executable": "tune_zfs.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-zfs/mrlesmithjr.zfs/tasks/main.yml", "options": {"when": "zfs_enable_monitoring"}, "module_options": "monitoring.yml", "executable": "monitoring.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "mrlesmithjr.zfs", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}}, "annotations": {}}