{"py/object": "struct4.Repository", "name": "", "path": "", "my_collection_name": "", "playbooks": [], "roles": [], "installed_collections_path": "", "installed_collections": [], "installed_roles_path": "./role-test/testdata/mrlesmithjr-mdadm", "installed_roles": [{"py/object": "struct4.Role", "name": "mrlesmithjr.mdadm", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm", "fqcn": "mrlesmithjr.mdadm", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "wipe_disks.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "tasks": [{"py/object": "struct4.Task", "name": "wipe_disks | Wiping Out Array Devices", "module": "command", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Wiping Out Array Devices", "register": "disks_wiped", "with_subelements": ["{{ mdadm_arrays }}", "devices"]}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "wipe_disks | Updating Initramfs", "module": "command", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Updating Initramfs", "when": "disks_wiped.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "debian.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "debian | Installing mdadm", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "debian | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "update-initramfs -u", "mdadm_conf": "/etc/mdadm/mdadm.conf", "mdadm_conf_path": "/etc/mdadm"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "arrays.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "tasks": [{"py/object": "struct4.Task", "name": "arrays | Checking Status Of Array(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Checking Status Of Array(s)", "register": "array_check", "changed_when": false, "failed_when": false, "with_items": "{{ mdadm_arrays }}", "check_mode": false}, "module_options": "cat /proc/mdstat | grep {{ item.name }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Creating Array(s)", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s)", "register": "array_created", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"present\" and array_check.results[0].rc != 0\n"}, "module_options": "yes | mdadm --create /dev/{{ item.name }} --level={{ item.level }} --raid-devices={{ item.devices|count }} {{ item.devices| join (' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_created.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Capturing Array Details", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Capturing Array Details", "register": "array_details", "changed_when": false}, "module_options": "mdadm --detail --scan", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Creating Array(s) Filesystem", "module": "filesystem", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s) Filesystem", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined"]}, "module_options": {"fstype": "{{ item.filesystem }}", "opts": "{{ item.filesystem_opts | default(omit) }}", "dev": "/dev/{{ item.name }}"}, "executable": "filesystem", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Mounting Array(s)", "module": "mount", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Mounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "fstype": "{{ item.filesystem }}", "state": "mounted", "opts": "{{ item.opts | default(omit) }}"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Unmounting Array(s)", "module": "mount", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Unmounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"absent\"", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "state": "unmounted"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Stopping Array(s)", "module": "command", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Stopping Array(s)", "register": "array_stopped", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --stop /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Removing Array(s)", "module": "command", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Removing Array(s)", "register": "array_removed", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --remove /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Zeroing Out Array Devices", "module": "command", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Zeroing Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "mdadm --zero-superblock {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Wiping Out Array Devices", "module": "command", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Wiping Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "module": "file", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "when": "mdadm_conf_path is defined"}, "module_options": {"path": "{{ mdadm_conf_path }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }} file exists", "module": "copy", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }} file exists"}, "module_options": {"content": "", "dest": "{{ mdadm_conf }}", "force": false}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ array_details.stdout_lines }}", "when": "array_created.changed"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^{{ item }}", "line": "{{ item }}", "state": "present"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ mdadm_arrays }}", "when": "item.state == \"absent\"\n"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^ARRAY /dev/{{ item.name }}", "line": "ARRAY /dev/{{ item.name }}", "state": "absent"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 15, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"Debian\""}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 16, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r)-backup.img", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 17, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "dracut /boot/initramfs-$(uname -r).img $(uname -r)", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "el.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "tasks": [{"py/object": "struct4.Task", "name": "el | Installing mdadm", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "el | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "dracut -f", "mdadm_conf": "/etc/mdadm.conf"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"Debian\""}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"RedHat\""}, "module_options": "el.yml", "executable": "el.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "mdadm_force_wipe is defined and mdadm_force_wipe\n"}, "module_options": "wipe_disks.yml", "executable": "wipe_disks.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {}, "module_options": "arrays.yml", "executable": "arrays.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}], "modules": [], "taskfiles": [], "version": "", "module_dict": {}, "task_dict": {"{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "wipe_disks | Wiping Out Array Devices", "module": "command", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Wiping Out Array Devices", "register": "disks_wiped", "with_subelements": ["{{ mdadm_arrays }}", "devices"]}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "wipe_disks | Updating Initramfs", "module": "command", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Updating Initramfs", "when": "disks_wiped.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "debian | Installing mdadm", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "debian | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "update-initramfs -u", "mdadm_conf": "/etc/mdadm/mdadm.conf", "mdadm_conf_path": "/etc/mdadm"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "arrays | Checking Status Of Array(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Checking Status Of Array(s)", "register": "array_check", "changed_when": false, "failed_when": false, "with_items": "{{ mdadm_arrays }}", "check_mode": false}, "module_options": "cat /proc/mdstat | grep {{ item.name }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "arrays | Creating Array(s)", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s)", "register": "array_created", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"present\" and array_check.results[0].rc != 0\n"}, "module_options": "yes | mdadm --create /dev/{{ item.name }} --level={{ item.level }} --raid-devices={{ item.devices|count }} {{ item.devices| join (' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_created.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "arrays | Capturing Array Details", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Capturing Array Details", "register": "array_details", "changed_when": false}, "module_options": "mdadm --detail --scan", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 4}": {"py/object": "struct4.Task", "name": "arrays | Creating Array(s) Filesystem", "module": "filesystem", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s) Filesystem", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined"]}, "module_options": {"fstype": "{{ item.filesystem }}", "opts": "{{ item.filesystem_opts | default(omit) }}", "dev": "/dev/{{ item.name }}"}, "executable": "filesystem", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 5}": {"py/object": "struct4.Task", "name": "arrays | Mounting Array(s)", "module": "mount", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Mounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "fstype": "{{ item.filesystem }}", "state": "mounted", "opts": "{{ item.opts | default(omit) }}"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 6}": {"py/object": "struct4.Task", "name": "arrays | Unmounting Array(s)", "module": "mount", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Unmounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"absent\"", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "state": "unmounted"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 7}": {"py/object": "struct4.Task", "name": "arrays | Stopping Array(s)", "module": "command", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Stopping Array(s)", "register": "array_stopped", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --stop /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 8}": {"py/object": "struct4.Task", "name": "arrays | Removing Array(s)", "module": "command", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Removing Array(s)", "register": "array_removed", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --remove /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 9}": {"py/object": "struct4.Task", "name": "arrays | Zeroing Out Array Devices", "module": "command", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Zeroing Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "mdadm --zero-superblock {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 10}": {"py/object": "struct4.Task", "name": "arrays | Wiping Out Array Devices", "module": "command", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Wiping Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 11}": {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "module": "file", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "when": "mdadm_conf_path is defined"}, "module_options": {"path": "{{ mdadm_conf_path }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 12}": {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }} file exists", "module": "copy", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }} file exists"}, "module_options": {"content": "", "dest": "{{ mdadm_conf }}", "force": false}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 13}": {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ array_details.stdout_lines }}", "when": "array_created.changed"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^{{ item }}", "line": "{{ item }}", "state": "present"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 14}": {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ mdadm_arrays }}", "when": "item.state == \"absent\"\n"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^ARRAY /dev/{{ item.name }}", "line": "ARRAY /dev/{{ item.name }}", "state": "absent"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 15}": {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 15, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"Debian\""}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 16}": {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 16, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r)-backup.img", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml\", \"index\": 17}": {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 17, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "dracut /boot/initramfs-$(uname -r).img $(uname -r)", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "el | Installing mdadm", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "el | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "dracut -f", "mdadm_conf": "/etc/mdadm.conf"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml\", \"index\": 0}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"Debian\""}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml\", \"index\": 1}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"RedHat\""}, "module_options": "el.yml", "executable": "el.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml\", \"index\": 2}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "mdadm_force_wipe is defined and mdadm_force_wipe\n"}, "module_options": "wipe_disks.yml", "executable": "wipe_disks.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, "{\"path\": \"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml\", \"index\": 3}": {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {}, "module_options": "arrays.yml", "executable": "arrays.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}}, "taskfile_dict": {"./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml": {"py/object": "struct4.TaskFile", "name": "wipe_disks.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "tasks": [{"py/object": "struct4.Task", "name": "wipe_disks | Wiping Out Array Devices", "module": "command", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Wiping Out Array Devices", "register": "disks_wiped", "with_subelements": ["{{ mdadm_arrays }}", "devices"]}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "wipe_disks | Updating Initramfs", "module": "command", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Updating Initramfs", "when": "disks_wiped.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml": {"py/object": "struct4.TaskFile", "name": "debian.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "debian | Installing mdadm", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "debian | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "update-initramfs -u", "mdadm_conf": "/etc/mdadm/mdadm.conf", "mdadm_conf_path": "/etc/mdadm"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml": {"py/object": "struct4.TaskFile", "name": "arrays.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "tasks": [{"py/object": "struct4.Task", "name": "arrays | Checking Status Of Array(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Checking Status Of Array(s)", "register": "array_check", "changed_when": false, "failed_when": false, "with_items": "{{ mdadm_arrays }}", "check_mode": false}, "module_options": "cat /proc/mdstat | grep {{ item.name }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Creating Array(s)", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s)", "register": "array_created", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"present\" and array_check.results[0].rc != 0\n"}, "module_options": "yes | mdadm --create /dev/{{ item.name }} --level={{ item.level }} --raid-devices={{ item.devices|count }} {{ item.devices| join (' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_created.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Capturing Array Details", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Capturing Array Details", "register": "array_details", "changed_when": false}, "module_options": "mdadm --detail --scan", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Creating Array(s) Filesystem", "module": "filesystem", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s) Filesystem", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined"]}, "module_options": {"fstype": "{{ item.filesystem }}", "opts": "{{ item.filesystem_opts | default(omit) }}", "dev": "/dev/{{ item.name }}"}, "executable": "filesystem", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Mounting Array(s)", "module": "mount", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Mounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "fstype": "{{ item.filesystem }}", "state": "mounted", "opts": "{{ item.opts | default(omit) }}"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Unmounting Array(s)", "module": "mount", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Unmounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"absent\"", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "state": "unmounted"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Stopping Array(s)", "module": "command", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Stopping Array(s)", "register": "array_stopped", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --stop /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Removing Array(s)", "module": "command", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Removing Array(s)", "register": "array_removed", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --remove /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Zeroing Out Array Devices", "module": "command", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Zeroing Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "mdadm --zero-superblock {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Wiping Out Array Devices", "module": "command", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Wiping Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "module": "file", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "when": "mdadm_conf_path is defined"}, "module_options": {"path": "{{ mdadm_conf_path }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }} file exists", "module": "copy", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }} file exists"}, "module_options": {"content": "", "dest": "{{ mdadm_conf }}", "force": false}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ array_details.stdout_lines }}", "when": "array_created.changed"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^{{ item }}", "line": "{{ item }}", "state": "present"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ mdadm_arrays }}", "when": "item.state == \"absent\"\n"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^ARRAY /dev/{{ item.name }}", "line": "ARRAY /dev/{{ item.name }}", "state": "absent"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 15, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"Debian\""}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 16, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r)-backup.img", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 17, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "dracut /boot/initramfs-$(uname -r).img $(uname -r)", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml": {"py/object": "struct4.TaskFile", "name": "el.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "tasks": [{"py/object": "struct4.Task", "name": "el | Installing mdadm", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "el | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "dracut -f", "mdadm_conf": "/etc/mdadm.conf"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml": {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"Debian\""}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"RedHat\""}, "module_options": "el.yml", "executable": "el.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "mdadm_force_wipe is defined and mdadm_force_wipe\n"}, "module_options": "wipe_disks.yml", "executable": "wipe_disks.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {}, "module_options": "arrays.yml", "executable": "arrays.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}}, "role_dict": {"mrlesmithjr.mdadm": {"py/object": "struct4.Role", "name": "mrlesmithjr.mdadm", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm", "fqcn": "mrlesmithjr.mdadm", "collection": "", "taskfiles": [{"py/object": "struct4.TaskFile", "name": "wipe_disks.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "tasks": [{"py/object": "struct4.Task", "name": "wipe_disks | Wiping Out Array Devices", "module": "command", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Wiping Out Array Devices", "register": "disks_wiped", "with_subelements": ["{{ mdadm_arrays }}", "devices"]}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "wipe_disks | Updating Initramfs", "module": "command", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/wipe_disks.yml", "options": {"name": "wipe_disks | Updating Initramfs", "when": "disks_wiped.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "debian.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "tasks": [{"py/object": "struct4.Task", "name": "debian | Installing mdadm", "module": "apt", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "debian | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "apt", "executable_type": "Module", "fqcn": "ansible.builtin.apt", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/debian.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "update-initramfs -u", "mdadm_conf": "/etc/mdadm/mdadm.conf", "mdadm_conf_path": "/etc/mdadm"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "arrays.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "tasks": [{"py/object": "struct4.Task", "name": "arrays | Checking Status Of Array(s)", "module": "shell", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Checking Status Of Array(s)", "register": "array_check", "changed_when": false, "failed_when": false, "with_items": "{{ mdadm_arrays }}", "check_mode": false}, "module_options": "cat /proc/mdstat | grep {{ item.name }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Creating Array(s)", "module": "shell", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s)", "register": "array_created", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"present\" and array_check.results[0].rc != 0\n"}, "module_options": "yes | mdadm --create /dev/{{ item.name }} --level={{ item.level }} --raid-devices={{ item.devices|count }} {{ item.devices| join (' ') }}", "executable": "shell", "executable_type": "Module", "fqcn": "ansible.builtin.shell", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_created.changed"}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Capturing Array Details", "module": "command", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Capturing Array Details", "register": "array_details", "changed_when": false}, "module_options": "mdadm --detail --scan", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Creating Array(s) Filesystem", "module": "filesystem", "index": 4, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Creating Array(s) Filesystem", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined"]}, "module_options": {"fstype": "{{ item.filesystem }}", "opts": "{{ item.filesystem_opts | default(omit) }}", "dev": "/dev/{{ item.name }}"}, "executable": "filesystem", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Mounting Array(s)", "module": "mount", "index": 5, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Mounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"present\"", "item.filesystem is defined", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "fstype": "{{ item.filesystem }}", "state": "mounted", "opts": "{{ item.opts | default(omit) }}"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Unmounting Array(s)", "module": "mount", "index": 6, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Unmounting Array(s)", "with_items": "{{ mdadm_arrays }}", "when": ["item.state|lower == \"absent\"", "item.mountpoint is defined"]}, "module_options": {"name": "{{ item.mountpoint }}", "src": "/dev/{{ item.name }}", "state": "unmounted"}, "executable": "mount", "executable_type": "Module", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Stopping Array(s)", "module": "command", "index": 7, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Stopping Array(s)", "register": "array_stopped", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --stop /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Removing Array(s)", "module": "command", "index": 8, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Removing Array(s)", "register": "array_removed", "with_items": "{{ mdadm_arrays }}", "when": "item.state|lower == \"absent\" and array_check.results[0].rc == 0\n"}, "module_options": "mdadm --remove /dev/{{ item.name }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Zeroing Out Array Devices", "module": "command", "index": 9, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Zeroing Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "mdadm --zero-superblock {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Wiping Out Array Devices", "module": "command", "index": 10, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Wiping Out Array Devices", "with_subelements": ["{{ mdadm_arrays }}", "devices"], "when": "item.0.state|lower == \"absent\" and array_check.results[0].rc == 0 and array_removed.changed\n"}, "module_options": "wipefs -af {{ item.1 }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "module": "file", "index": 11, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }}'s directory exists", "when": "mdadm_conf_path is defined"}, "module_options": {"path": "{{ mdadm_conf_path }}", "state": "directory"}, "executable": "file", "executable_type": "Module", "fqcn": "ansible.builtin.file", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Ensure {{ mdadm_conf }} file exists", "module": "copy", "index": 12, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Ensure {{ mdadm_conf }} file exists"}, "module_options": {"content": "", "dest": "{{ mdadm_conf }}", "force": false}, "executable": "copy", "executable_type": "Module", "fqcn": "ansible.builtin.copy", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 13, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ array_details.stdout_lines }}", "when": "array_created.changed"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^{{ item }}", "line": "{{ item }}", "state": "present"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating {{ mdadm_conf }}", "module": "lineinfile", "index": 14, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating {{ mdadm_conf }}", "with_items": "{{ mdadm_arrays }}", "when": "item.state == \"absent\"\n"}, "module_options": {"dest": "{{ mdadm_conf }}", "regexp": "^ARRAY /dev/{{ item.name }}", "line": "ARRAY /dev/{{ item.name }}", "state": "absent"}, "executable": "lineinfile", "executable_type": "Module", "fqcn": "ansible.builtin.lineinfile", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 15, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"Debian\""}, "module_options": "{{ update_initramfs }}", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 16, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r)-backup.img", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Updating Initramfs", "module": "command", "index": 17, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/arrays.yml", "options": {"name": "arrays | Updating Initramfs", "when": "array_removed.changed and ansible_facts.os_family == \"RedHat\""}, "module_options": "dracut /boot/initramfs-$(uname -r).img $(uname -r)", "executable": "command", "executable_type": "Module", "fqcn": "ansible.builtin.command", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "el.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "tasks": [{"py/object": "struct4.Task", "name": "el | Installing mdadm", "module": "yum", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "el | Installing mdadm"}, "module_options": {"name": "mdadm", "state": "present"}, "executable": "yum", "executable_type": "Module", "fqcn": "ansible.builtin.yum", "annotations": {}}, {"py/object": "struct4.Task", "name": "arrays | Setting distribution-specific facts", "module": "set_fact", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/el.yml", "options": {"name": "arrays | Setting distribution-specific facts"}, "module_options": {"update_initramfs": "dracut -f", "mdadm_conf": "/etc/mdadm.conf"}, "executable": "set_fact", "executable_type": "Module", "fqcn": "ansible.builtin.set_fact", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}, {"py/object": "struct4.TaskFile", "name": "main.yml", "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "tasks": [{"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 0, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"Debian\""}, "module_options": "debian.yml", "executable": "debian.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 1, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "ansible_facts.os_family == \"RedHat\""}, "module_options": "el.yml", "executable": "el.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 2, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {"when": "mdadm_force_wipe is defined and mdadm_force_wipe\n"}, "module_options": "wipe_disks.yml", "executable": "wipe_disks.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}, {"py/object": "struct4.Task", "name": "", "module": "include_tasks", "index": 3, "defined_in": "./role-test/testdata/mrlesmithjr-mdadm/mrlesmithjr.mdadm/tasks/main.yml", "options": {}, "module_options": "arrays.yml", "executable": "arrays.yml", "executable_type": "TaskFile", "fqcn": "", "annotations": {}}], "role": "mrlesmithjr.mdadm", "used_in": [], "annotations": {}}], "modules": [], "source": "", "annotations": {}, "used_in": []}}, "annotations": {}}